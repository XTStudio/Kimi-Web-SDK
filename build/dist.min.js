(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var UIRect_1=require("../uikit/UIRect"),CALayer=function(){return function(){this._view=void 0,this.frame=UIRect_1.UIRectZero}}();exports.CALayer=CALayer;
},{"../uikit/UIRect":15}],2:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var DispatchQueue=function(){function e(e){}return e.prototype.async=function(e){setTimeout(e,0)},e.prototype.asyncAfter=function(e,t){setTimeout(t,1e3*e)},e.prototype.isolate=function(e){for(var t=[],o=1;o<arguments.length;o++)t[o-1]=arguments[o];setTimeout(function(){e.apply(void 0,t)},0)},e.main=new e,e.global=new e,e}();exports.DispatchQueue=DispatchQueue;
},{}],3:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var EventEmitterIMP=require("./EventEmitterImp");console.log(EventEmitterIMP.EventEmitter),exports.EventEmitter=EventEmitterIMP.EventEmitter;
},{"./EventEmitterImp":4}],4:[function(require,module,exports){
!function(e){"use strict";function t(){}var n=t.prototype;e.EventEmitter;function r(e,t){for(var n=e.length;n--;)if(e[n].listener===t)return n;return-1}function i(e){return function(){return this[e].apply(this,arguments)}}n.getListeners=function(e){var t,n,r=this._getEvents();if(e instanceof RegExp)for(n in t={},r)r.hasOwnProperty(n)&&e.test(n)&&(t[n]=r[n]);else t=r[e]||(r[e]=[]);return t},n.flattenListeners=function(e){var t,n=[];for(t=0;t<e.length;t+=1)n.push(e[t].listener);return n},n.getListenersAsObject=function(e){var t,n=this.getListeners(e);return n instanceof Array&&((t={})[e]=n),t||n},n.addListener=function(e,t){if(!function e(t){return"function"==typeof t||t instanceof RegExp||!(!t||"object"!=typeof t)&&e(t.listener)}(t))throw new TypeError("listener must be a function");var n,i=this.getListenersAsObject(e),s="object"==typeof t;for(n in i)i.hasOwnProperty(n)&&-1===r(i[n],t)&&i[n].push(s?t:{listener:t,once:!1});return this},n.on=i("addListener"),n.addOnceListener=function(e,t){return this.addListener(e,{listener:t,once:!0})},n.once=i("addOnceListener"),n.defineEvent=function(e){return this.getListeners(e),this},n.defineEvents=function(e){for(var t=0;t<e.length;t+=1)this.defineEvent(e[t]);return this},n.removeListener=function(e,t){var n,i,s=this.getListenersAsObject(e);for(i in s)s.hasOwnProperty(i)&&-1!==(n=r(s[i],t))&&s[i].splice(n,1);return this},n.off=i("removeListener"),n.addListeners=function(e,t){return this.manipulateListeners(!1,e,t)},n.removeListeners=function(e,t){return this.manipulateListeners(!0,e,t)},n.manipulateListeners=function(e,t,n){var r,i,s=e?this.removeListener:this.addListener,o=e?this.removeListeners:this.addListeners;if("object"!=typeof t||t instanceof RegExp)for(r=n.length;r--;)s.call(this,t,n[r]);else for(r in t)t.hasOwnProperty(r)&&(i=t[r])&&("function"==typeof i?s.call(this,r,i):o.call(this,r,i));return this},n.removeEvent=function(e){var t,n=typeof e,r=this._getEvents();if("string"===n)delete r[e];else if(e instanceof RegExp)for(t in r)r.hasOwnProperty(t)&&e.test(t)&&delete r[t];else delete this._events;return this},n.removeAllListeners=i("removeEvent"),n.emitEvent=function(e,t){var n,r,i,s,o=this.getListenersAsObject(e);for(s in o)if(o.hasOwnProperty(s))for(n=o[s].slice(0),i=0;i<n.length;i++)!0===(r=n[i]).once&&this.removeListener(e,r.listener),r.listener.apply(this,t||[])===this._getOnceReturnValue()&&this.removeListener(e,r.listener);return this},n.val=function(e){var t,n,r,i,s=Array.prototype.slice.call(arguments,1),o=this.getListenersAsObject(e);for(i in o)if(o.hasOwnProperty(i))for(t=o[i].slice(0),r=0;r<t.length;r++)return!0===(n=t[r]).once&&this.removeListener(e,n.listener),n.listener.apply(this,s||[])},n.trigger=i("emitEvent"),n.emit=function(e){var t=Array.prototype.slice.call(arguments,1);return this.emitEvent(e,t)},n.setOnceReturnValue=function(e){return this._onceReturnValue=e,this},n._getOnceReturnValue=function(){return!this.hasOwnProperty("_onceReturnValue")||this._onceReturnValue},n._getEvents=function(){return this._events||(this._events={})},e.EventEmitter=t}(this||{});
},{}],5:[function(require,module,exports){
(function (global){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),void 0===window.global&&(window.global=window);var UIEnums_1=require("./uikit/UIEnums");global.UIViewContentMode=UIEnums_1.UIViewContentMode,global.UIControlState=UIEnums_1.UIControlState,global.UIControlContentVerticalAlignment=UIEnums_1.UIControlContentVerticalAlignment,global.UIControlContentHorizontalAlignment=UIEnums_1.UIControlContentHorizontalAlignment,global.UITextAlignment=UIEnums_1.UITextAlignment,global.UILineBreakMode=UIEnums_1.UILineBreakMode,global.UITextFieldViewMode=UIEnums_1.UITextFieldViewMode,global.UITextAutocapitalizationType=UIEnums_1.UITextAutocapitalizationType,global.UITextAutocorrectionType=UIEnums_1.UITextAutocorrectionType,global.UITextSpellCheckingType=UIEnums_1.UITextSpellCheckingType,global.UIKeyboardType=UIEnums_1.UIKeyboardType,global.UIReturnKeyType=UIEnums_1.UIReturnKeyType,global.UILayoutConstraintAxis=UIEnums_1.UILayoutConstraintAxis,global.UIStackViewDistribution=UIEnums_1.UIStackViewDistribution,global.UIStackViewAlignment=UIEnums_1.UIStackViewAlignment,global.UIStatusBarStyle=UIEnums_1.UIStatusBarStyle;var UIView_1=require("./uikit/UIView");global.UIView=UIView_1.UIView,global.UIWindow=UIView_1.UIWindow;var UIGestureRecognizer_1=require("./uikit/UIGestureRecognizer");global.UIGestureRecognizerState=UIGestureRecognizer_1.UIGestureRecognizerState,global.UIGestureRecognizer=UIGestureRecognizer_1.UIGestureRecognizer;var UITapGestureRecognizer_1=require("./uikit/UITapGestureRecognizer");global.UITapGestureRecognizer=UITapGestureRecognizer_1.UITapGestureRecognizer;var UILongPressGestureRecognizer_1=require("./uikit/UILongPressGestureRecognizer");global.UILongPressGestureRecognizer=UILongPressGestureRecognizer_1.UILongPressGestureRecognizer;var UIPanGestureRecognizer_1=require("./uikit/UIPanGestureRecognizer");global.UIPanGestureRecognizer=UIPanGestureRecognizer_1.UIPanGestureRecognizer;var UIPinchGestureRecognizer_1=require("./uikit/UIPinchGestureRecognizer");global.UIPinchGestureRecognizer=UIPinchGestureRecognizer_1.UIPinchGestureRecognizer;var UIRotationGestureRecognizer_1=require("./uikit/UIRotationGestureRecognizer");global.UIRotationGestureRecognizer=UIRotationGestureRecognizer_1.UIRotationGestureRecognizer;var UIColor_1=require("./uikit/UIColor");global.UIColor=UIColor_1.UIColor;var DispatchQueue_1=require("./foundation/DispatchQueue");global.DispatchQueue=DispatchQueue_1.DispatchQueue;
}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{"./foundation/DispatchQueue":2,"./uikit/UIColor":7,"./uikit/UIEnums":9,"./uikit/UIGestureRecognizer":10,"./uikit/UILongPressGestureRecognizer":11,"./uikit/UIPanGestureRecognizer":12,"./uikit/UIPinchGestureRecognizer":13,"./uikit/UIRotationGestureRecognizer":16,"./uikit/UITapGestureRecognizer":17,"./uikit/UIView":19}],6:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.UIAffineTransformIdentity={a:1,b:0,c:0,d:1,tx:0,ty:0},exports.UIAffineTransformIsIdentity=function(t){return 1==t.a&&0==t.b&&0==t.c&&1==t.d&&0==t.tx&&0==t.ty};
},{}],7:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var UIColor=function(){function e(e,t,r,o){this.r=e,this.g=t,this.b=r,this.a=o}return e.prototype.toStyle=function(){return"rgba("+(255*this.r).toFixed(0)+", "+(255*this.g).toFixed(0)+", "+(255*this.b).toFixed(0)+", "+this.a.toString()+")"},e.black=new e(0,0,0,1),e.clear=new e(0,0,0,0),e.gray=new e(.5,.5,.5,1),e.red=new e(1,0,0,1),e.yellow=new e(1,1,0,1),e.green=new e(0,1,0,1),e.blue=new e(0,0,1,1),e.white=new e(1,1,1,1),e}();exports.UIColor=UIColor;
},{}],8:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.UIEdgeInsetsZero={top:0,left:0,bottom:0,right:0};
},{}],9:[function(require,module,exports){
"use strict";var UIViewContentMode,UIControlState,UIControlContentVerticalAlignment,UIControlContentHorizontalAlignment,UITextAlignment,UILineBreakMode,UITextFieldViewMode,UITextAutocapitalizationType,UITextAutocorrectionType,UITextSpellCheckingType,UIKeyboardType,UIReturnKeyType,UILayoutConstraintAxis,UIStackViewDistribution,UIStackViewAlignment,UIStatusBarStyle;Object.defineProperty(exports,"__esModule",{value:!0}),function(e){e[e.scaleToFill=0]="scaleToFill",e[e.scaleAspectFit=1]="scaleAspectFit",e[e.scaleAspectFill=2]="scaleAspectFill"}(UIViewContentMode=exports.UIViewContentMode||(exports.UIViewContentMode={})),function(e){e[e.normal=0]="normal",e[e.highlighted=1]="highlighted",e[e.disabled=2]="disabled",e[e.selected=3]="selected"}(UIControlState=exports.UIControlState||(exports.UIControlState={})),function(e){e[e.center=0]="center",e[e.top=1]="top",e[e.bottom=2]="bottom",e[e.fill=3]="fill"}(UIControlContentVerticalAlignment=exports.UIControlContentVerticalAlignment||(exports.UIControlContentVerticalAlignment={})),function(e){e[e.center=0]="center",e[e.left=1]="left",e[e.right=2]="right",e[e.fill=3]="fill"}(UIControlContentHorizontalAlignment=exports.UIControlContentHorizontalAlignment||(exports.UIControlContentHorizontalAlignment={})),function(e){e[e.left=0]="left",e[e.center=1]="center",e[e.right=2]="right"}(UITextAlignment=exports.UITextAlignment||(exports.UITextAlignment={})),function(e){e[e.wordWrapping=0]="wordWrapping",e[e.charWrapping=1]="charWrapping",e[e.clipping=2]="clipping",e[e.truncatingHead=3]="truncatingHead",e[e.truncatingTail=4]="truncatingTail",e[e.truncatingMiddle=5]="truncatingMiddle"}(UILineBreakMode=exports.UILineBreakMode||(exports.UILineBreakMode={})),function(e){e[e.never=0]="never",e[e.whileEditing=1]="whileEditing",e[e.unlessEditing=2]="unlessEditing",e[e.always=3]="always"}(UITextFieldViewMode=exports.UITextFieldViewMode||(exports.UITextFieldViewMode={})),function(e){e[e.none=0]="none",e[e.words=1]="words",e[e.sentences=2]="sentences",e[e.allCharacters=3]="allCharacters"}(UITextAutocapitalizationType=exports.UITextAutocapitalizationType||(exports.UITextAutocapitalizationType={})),function(e){e[e.default=0]="default",e[e.no=1]="no",e[e.yes=2]="yes"}(UITextAutocorrectionType=exports.UITextAutocorrectionType||(exports.UITextAutocorrectionType={})),function(e){e[e.default=0]="default",e[e.no=1]="no",e[e.yes=2]="yes"}(UITextSpellCheckingType=exports.UITextSpellCheckingType||(exports.UITextSpellCheckingType={})),function(e){e[e.default=0]="default",e[e.ASCIICapable=1]="ASCIICapable",e[e.numbersAndPunctuation=2]="numbersAndPunctuation",e[e.numberPad=3]="numberPad",e[e.phonePad=4]="phonePad",e[e.emailAddress=5]="emailAddress",e[e.decimalPad=6]="decimalPad"}(UIKeyboardType=exports.UIKeyboardType||(exports.UIKeyboardType={})),function(e){e[e.default=0]="default",e[e.go=1]="go",e[e.next=2]="next",e[e.send=3]="send",e[e.done=4]="done"}(UIReturnKeyType=exports.UIReturnKeyType||(exports.UIReturnKeyType={})),function(e){e[e.horizontal=0]="horizontal",e[e.vertical=1]="vertical"}(UILayoutConstraintAxis=exports.UILayoutConstraintAxis||(exports.UILayoutConstraintAxis={})),function(e){e[e.fill=0]="fill",e[e.fillEqually=1]="fillEqually",e[e.fillProportionally=2]="fillProportionally",e[e.equalSpacing=3]="equalSpacing",e[e.equalCentering=4]="equalCentering"}(UIStackViewDistribution=exports.UIStackViewDistribution||(exports.UIStackViewDistribution={})),function(e){e[e.fill=0]="fill",e[e.leading=1]="leading",e[e.center=2]="center",e[e.trailing=3]="trailing"}(UIStackViewAlignment=exports.UIStackViewAlignment||(exports.UIStackViewAlignment={})),function(e){e[e.default=0]="default",e[e.lightContent=1]="lightContent"}(UIStatusBarStyle=exports.UIStatusBarStyle||(exports.UIStatusBarStyle={}));
},{}],10:[function(require,module,exports){
"use strict";var __extends=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(exports,"__esModule",{value:!0});var UIGestureRecognizerState,UIPoint_1=require("./UIPoint"),EventEmitter_1=require("../kimi/EventEmitter");!function(e){e[e.possible=0]="possible",e[e.began=1]="began",e[e.changed=2]="changed",e[e.ended=3]="ended",e[e.cancelled=4]="cancelled",e[e.failed=5]="failed"}(UIGestureRecognizerState=exports.UIGestureRecognizerState||(exports.UIGestureRecognizerState={}));var UIGestureRecognizer=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state=UIGestureRecognizerState.possible,t.enabled=!0,t.view=void 0,t.touches=[],t}return __extends(t,e),t.prototype.requireGestureRecognizerToFail=function(e){},t.prototype.locationInView=function(e){var t=this.touches[0];return t?t.locationInView(e):UIPoint_1.UIPointZero},t.prototype.numberOfTouches=function(){return this.touches.values.length},t.prototype.locationOfTouch=function(e,t){var n=this.touches[e];return n?n.locationInView(t):UIPoint_1.UIPointZero},t.prototype.handleTouch=function(e){this.touches=e},t.prototype.handleEvent=function(e){},t}(EventEmitter_1.EventEmitter);exports.UIGestureRecognizer=UIGestureRecognizer;
},{"../kimi/EventEmitter":3,"./UIPoint":14}],11:[function(require,module,exports){
"use strict";var __extends=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(exports,"__esModule",{value:!0});var UIGestureRecognizer_1=require("./UIGestureRecognizer"),UITouch_1=require("./UITouch"),UIView_1=require("./UIView"),UILongPressGestureRecognizer=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.numberOfTapsRequired=1,t.numberOfTouchesRequired=1,t.minimumPressDuration=.5,t.allowableMovement=10,t.beganPoints={},t}return __extends(t,e),t.prototype.handleTouch=function(t){var n=this;e.prototype.handleTouch.call(this,t),t.forEach(function(e){if(e.phase==UITouch_1.UITouchPhase.began){if(null!=UIView_1.UIView.recognizedGesture)return void(n.beganPoints={});e.windowPoint&&(n.beganPoints[e.identifier]=e.windowPoint),void 0===n.timerTask&&Object.keys(n.beganPoints).length>=n.numberOfTouchesRequired&&(n.timerTask=setTimeout(function(){null==UIView_1.UIView.recognizedGesture&&n.state==UIGestureRecognizer_1.UIGestureRecognizerState.possible?(UIView_1.UIView.recognizedGesture=n,n.state=UIGestureRecognizer_1.UIGestureRecognizerState.began,n.handleEvent("began"),n.emit("began",n)):n.state=UIGestureRecognizer_1.UIGestureRecognizerState.failed},1e3*n.minimumPressDuration))}else if(e.phase==UITouch_1.UITouchPhase.moved)if(n.state==UIGestureRecognizer_1.UIGestureRecognizerState.possible){if(e.windowPoint&&n.beganPoints[e.identifier]){var t=n.beganPoints[e.identifier];(Math.abs(t.x-e.windowPoint.x)>=n.allowableMovement||Math.abs(t.y-e.windowPoint.y)>=n.allowableMovement)&&(clearTimeout(n.timerTask),n.state=UIGestureRecognizer_1.UIGestureRecognizerState.failed)}}else n.state!=UIGestureRecognizer_1.UIGestureRecognizerState.began&&n.state!=UIGestureRecognizer_1.UIGestureRecognizerState.changed||(n.state=UIGestureRecognizer_1.UIGestureRecognizerState.changed,n.handleEvent("changed"),n.emit("changed",n));else e.phase==UITouch_1.UITouchPhase.ended?(clearTimeout(n.timerTask),n.timerTask=void 0,n.state!=UIGestureRecognizer_1.UIGestureRecognizerState.began&&n.state!=UIGestureRecognizer_1.UIGestureRecognizerState.changed||(n.state=UIGestureRecognizer_1.UIGestureRecognizerState.ended,n.handleEvent("ended"),n.emit("ended",n),setTimeout(function(){UIView_1.UIView.recognizedGesture=void 0})),n.state=UIGestureRecognizer_1.UIGestureRecognizerState.possible,n.beganPoints={}):e.phase==UITouch_1.UITouchPhase.cancelled&&(clearTimeout(n.timerTask),n.timerTask=void 0,n.state!=UIGestureRecognizer_1.UIGestureRecognizerState.began&&n.state!=UIGestureRecognizer_1.UIGestureRecognizerState.changed||(n.state=UIGestureRecognizer_1.UIGestureRecognizerState.cancelled,n.handleEvent("cancelled"),n.emit("cancelled",n),setTimeout(function(){UIView_1.UIView.recognizedGesture=void 0})),n.state=UIGestureRecognizer_1.UIGestureRecognizerState.possible,n.beganPoints={})})},t}(UIGestureRecognizer_1.UIGestureRecognizer);exports.UILongPressGestureRecognizer=UILongPressGestureRecognizer;
},{"./UIGestureRecognizer":10,"./UITouch":18,"./UIView":19}],12:[function(require,module,exports){
"use strict";var __extends=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(exports,"__esModule",{value:!0});var UIGestureRecognizer_1=require("./UIGestureRecognizer"),UIView_1=require("./UIView"),UITouch_1=require("./UITouch"),UIPanGestureRecognizer=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.lockedDirection=void 0,t.firstTouch=void 0,t.translationPoint=void 0,t.beganPoints={},t}return __extends(t,e),t.prototype.translationInView=function(e){if(!this.firstTouch)return{x:0,y:0};var t=this.firstTouch.windowPoint;if(!t)return{x:0,y:0};var i=this.translationPoint;return i?{x:t.x-i.x,y:t.y-i.y}:{x:0,y:0}},t.prototype.setTranslation=function(e,t){if(this.firstTouch){var i=this.firstTouch.windowPoint;i&&(this.translationPoint={x:i.x-e.x,y:i.y-e.y})}},t.prototype.velocityInView=function(e){return UIView_1.sharedVelocityTracker.computeCurrentVelocity(),UIView_1.sharedVelocityTracker.velocity},t.prototype.handleTouch=function(t){var i=this;e.prototype.handleTouch.call(this,t),t.forEach(function(e){if(0==e.identifier&&(i.firstTouch=e),e.phase==UITouch_1.UITouchPhase.began){if(null!=UIView_1.UIView.recognizedGesture&&UIView_1.UIView.recognizedGesture!=i)return void(i.beganPoints={});e.windowPoint&&(i.beganPoints[e.identifier]=e.windowPoint),0==e.identifier&&(i.translationPoint=e.windowPoint)}else if(e.phase==UITouch_1.UITouchPhase.moved)if(i.state==UIGestureRecognizer_1.UIGestureRecognizerState.possible){if(null!=UIView_1.UIView.recognizedGesture&&UIView_1.UIView.recognizedGesture!=i)return void(i.state=UIGestureRecognizer_1.UIGestureRecognizerState.failed);if(e.windowPoint&&i.beganPoints[e.identifier]){var t=i.beganPoints[e.identifier];void 0!==i.lockedDirection?1===i.lockedDirection?Math.abs(t.y-e.windowPoint.y)>=8&&(UIView_1.UIView.recognizedGesture=i,i.state=UIGestureRecognizer_1.UIGestureRecognizerState.began,i.handleEvent("began"),i.emit("began",i)):2===i.lockedDirection&&Math.abs(t.x-e.windowPoint.x)>=8&&(UIView_1.UIView.recognizedGesture=i,i.state=UIGestureRecognizer_1.UIGestureRecognizerState.began,i.handleEvent("began"),i.emit("began",i)):(Math.abs(t.x-e.windowPoint.x)>=8||Math.abs(t.y-e.windowPoint.y)>=8)&&(UIView_1.UIView.recognizedGesture=i,i.state=UIGestureRecognizer_1.UIGestureRecognizerState.began,i.handleEvent("began"),i.emit("began",i))}}else i.state!=UIGestureRecognizer_1.UIGestureRecognizerState.began&&i.state!=UIGestureRecognizer_1.UIGestureRecognizerState.changed||(i.state=UIGestureRecognizer_1.UIGestureRecognizerState.changed,i.handleEvent("changed"),i.emit("changed",i));else e.phase==UITouch_1.UITouchPhase.ended?(i.state!=UIGestureRecognizer_1.UIGestureRecognizerState.began&&i.state!=UIGestureRecognizer_1.UIGestureRecognizerState.changed||(i.state=UIGestureRecognizer_1.UIGestureRecognizerState.ended,i.handleEvent("ended"),i.emit("ended",i),setTimeout(function(){UIView_1.UIView.recognizedGesture=void 0},0)),0==e.identifier&&(i.state=UIGestureRecognizer_1.UIGestureRecognizerState.possible)):e.phase==UITouch_1.UITouchPhase.cancelled&&(i.state!=UIGestureRecognizer_1.UIGestureRecognizerState.began&&i.state!=UIGestureRecognizer_1.UIGestureRecognizerState.changed||(i.state=UIGestureRecognizer_1.UIGestureRecognizerState.cancelled,i.handleEvent("cancelled"),i.emit("cancelled",i),setTimeout(function(){UIView_1.UIView.recognizedGesture=void 0},0)),i.state=UIGestureRecognizer_1.UIGestureRecognizerState.possible)})},t}(UIGestureRecognizer_1.UIGestureRecognizer);exports.UIPanGestureRecognizer=UIPanGestureRecognizer;
},{"./UIGestureRecognizer":10,"./UITouch":18,"./UIView":19}],13:[function(require,module,exports){
"use strict";var __extends=this&&this.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(exports,"__esModule",{value:!0});var UIGestureRecognizer_1=require("./UIGestureRecognizer"),UIPinchGestureRecognizer=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.scale=1,t.velocity=0,t}return __extends(t,e),t.prototype.handleTouch=function(t){e.prototype.handleTouch.call(this,t)},t}(UIGestureRecognizer_1.UIGestureRecognizer);exports.UIPinchGestureRecognizer=UIPinchGestureRecognizer;
},{"./UIGestureRecognizer":10}],14:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.UIPointZero={x:0,y:0};
},{}],15:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.UIRectZero={x:0,y:0,width:0,height:0};
},{}],16:[function(require,module,exports){
"use strict";var __extends=this&&this.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function o(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}();Object.defineProperty(exports,"__esModule",{value:!0});var UIGestureRecognizer_1=require("./UIGestureRecognizer"),UIRotationGestureRecognizer=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.rotation=1,t.velocity=0,t}return __extends(t,e),t}(UIGestureRecognizer_1.UIGestureRecognizer);exports.UIRotationGestureRecognizer=UIRotationGestureRecognizer;
},{"./UIGestureRecognizer":10}],17:[function(require,module,exports){
"use strict";var __extends=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(exports,"__esModule",{value:!0});var UITouch_1=require("./UITouch"),UIGestureRecognizer_1=require("./UIGestureRecognizer"),UIView_1=require("./UIView"),UITapGestureRecognizer=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.numberOfTapsRequired=1,t.numberOfTouchesRequired=1,t.beganPoints={},t.validPointsCount=0,t}return __extends(t,e),t.prototype.handleTouch=function(t){var n=this;e.prototype.handleTouch.call(this,t),t.forEach(function(e){if(e.phase==UITouch_1.UITouchPhase.began){if(null!=UIView_1.UIView.recognizedGesture)return void(n.beganPoints={});e.windowPoint&&(n.beganPoints[e.identifier]=e.windowPoint)}else if(e.phase==UITouch_1.UITouchPhase.moved)e.windowPoint&&n.beganPoints[e.identifier]&&(Math.abs(n.beganPoints[e.identifier].x-e.windowPoint.x)>=22||Math.abs(n.beganPoints[e.identifier].y-e.windowPoint.y)>=22)&&delete n.beganPoints[e.identifier];else if(e.phase==UITouch_1.UITouchPhase.ended){if(null!=UIView_1.UIView.recognizedGesture)return n.beganPoints={},n.state=UIGestureRecognizer_1.UIGestureRecognizerState.possible,void(n.validPointsCount=0);e.tapCount>=n.numberOfTapsRequired&&null!=n.beganPoints[e.identifier]&&n.validPointsCount++,delete n.beganPoints[e.identifier],n.validPointsCount>=n.numberOfTouchesRequired&&(UIView_1.UIView.recognizedGesture=n,n.state=UIGestureRecognizer_1.UIGestureRecognizerState.ended,n.handleEvent("touch"),n.emit("touch",n),setTimeout(function(){UIView_1.UIView.recognizedGesture=void 0},0)),0!=Object.keys(n.beganPoints).length&&n.state!=UIGestureRecognizer_1.UIGestureRecognizerState.ended||(n.state=UIGestureRecognizer_1.UIGestureRecognizerState.possible,n.validPointsCount=0)}})},t}(UIGestureRecognizer_1.UIGestureRecognizer);exports.UITapGestureRecognizer=UITapGestureRecognizer;
},{"./UIGestureRecognizer":10,"./UITouch":18,"./UIView":19}],18:[function(require,module,exports){
"use strict";var __assign=this&&this.__assign||function(){return(__assign=Object.assign||function(t){for(var o,i=1,e=arguments.length;i<e;i++)for(var n in o=arguments[i])Object.prototype.hasOwnProperty.call(o,n)&&(t[n]=o[n]);return t}).apply(this,arguments)};Object.defineProperty(exports,"__esModule",{value:!0});var UITouchPhase,UIPoint_1=require("./UIPoint");!function(t){t[t.began=0]="began",t[t.moved=1]="moved",t[t.stationary=2]="stationary",t[t.ended=3]="ended",t[t.cancelled=4]="cancelled"}(UITouchPhase=exports.UITouchPhase||(exports.UITouchPhase={}));var UITouch=function(){function t(){this.identifier=0,this.timestamp=0,this.phase=UITouchPhase.cancelled,this.tapCount=0,this.window=void 0,this.windowPoint=void 0,this.view=void 0,this.gestureRecognizers=[]}return t.prototype.locationInView=function(t){var o=t||this.view;if(void 0===o)return UIPoint_1.UIPointZero;var i=this.windowPoint||UIPoint_1.UIPointZero;return o.convertPointFromWindow(i)||UIPoint_1.UIPointZero},t.prototype.previousLocationInView=function(t){return UIPoint_1.UIPointZero},t}();exports.UITouch=UITouch;var VelocityTracker=function(){function t(){this.movements=[],this.velocity={x:0,y:0}}return t.prototype.reset=function(){this.movements=[],this.velocity={x:0,y:0}},t.prototype.addMovement=function(t){this.movements.push(__assign({},t))},t.prototype.computeCurrentVelocity=function(){for(var t=this.movements.length-1;t>=1;t--){var o=this.movements[t],i=this.movements[t-1];if(o.windowPoint&&i.windowPoint){var e=o.timestamp-i.timestamp;if(e>.008){this.velocity={x:(o.windowPoint.x-i.windowPoint.x)/e,y:(o.windowPoint.y-i.windowPoint.y)/e};break}}}},t}();exports.VelocityTracker=VelocityTracker;
},{"./UIPoint":14}],19:[function(require,module,exports){
"use strict";var __extends=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function o(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),__assign=this&&this.__assign||function(){return(__assign=Object.assign||function(e){for(var t,i=1,o=arguments.length;i<o;i++)for(var n in t=arguments[i])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},__values=this&&this.__values||function(e){var t="function"==typeof Symbol&&e[Symbol.iterator],i=0;return t?t.call(e):{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}}},__read=this&&this.__read||function(e,t){var i="function"==typeof Symbol&&e[Symbol.iterator];if(!i)return e;var o,n,r=i.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(o=r.next()).done;)s.push(o.value)}catch(e){n={error:e}}finally{try{o&&!o.done&&(i=r.return)&&i.call(r)}finally{if(n)throw n.error}}return s};Object.defineProperty(exports,"__esModule",{value:!0});var UIRect_1=require("./UIRect"),UIColor_1=require("./UIColor"),CALayer_1=require("../coregraphics/CALayer"),UIAffineTransform_1=require("./UIAffineTransform"),UIEnums_1=require("./UIEnums"),EventEmitter_1=require("../kimi/EventEmitter"),Matrix_1=require("./helpers/Matrix"),UITouch_1=require("./UITouch"),UIEdgeInsets_1=require("./UIEdgeInsets");exports.sharedVelocityTracker=new UITouch_1.VelocityTracker;var UIView=function(e){function t(){var t=e.call(this)||this;return t.domElement=document.createElement("div"),t.layer=new CALayer_1.CALayer,t._frame=UIRect_1.UIRectZero,t.bounds=UIRect_1.UIRectZero,t._transform=UIAffineTransform_1.UIAffineTransformIdentity,t.touchAreaInsets=UIEdgeInsets_1.UIEdgeInsetsZero,t.tag=0,t.superview=void 0,t.subviews=[],t._clipsToBounds=!1,t._backgroundColor=void 0,t._alpha=1,t._hidden=!1,t._opaque=!1,t._contentMode=UIEnums_1.UIViewContentMode.scaleToFill,t._tintColor=void 0,t.userInteractionEnabled=!0,t.gestureRecognizers=[],t.isAccessibilityElement=!1,t.domElement.style.position="absolute",t.layer._view=t,t}return __extends(t,e),t.prototype.attachToElement=function(e){var t=this;e==document.body&&(document.body.style.width="100%",document.body.style.height="100%",document.getElementsByTagName("html")[0].style.height="100%",document.getElementsByTagName("html")[0].style.overflow="hidden");var i=function(){if(t instanceof UIWindow)return t;var e=new UIWindow;return e.addSubview(t),e}();e.appendChild(i.domElement),window.addEventListener("resize",function(){t.onResize(e,i)}),this.onResize(e,i)},t.prototype.onResize=function(e,t){t.frame={x:0,y:0,width:e.clientWidth,height:e.clientHeight}},Object.defineProperty(t.prototype,"window",{get:function(){return this instanceof UIWindow?this:this.superview?this.superview.window:void 0},enumerable:!0,configurable:!0}),t.prototype.removeFromSuperview=function(){var e=this;if(void 0!==this.superview){var t=this.superview;t.willRemoveSubview(this),this.willMoveToSuperview(void 0),t.subviews=this.superview.subviews.filter(function(t){return t!==e}),t.domElement.removeChild(this.domElement),this.superview=void 0,this.didMoveToSuperview()}},t.prototype.insertSubviewAtIndex=function(e,t){void 0!==e.superview&&e.removeFromSuperview(),e.willMoveToSuperview(this),e.superview=this,this.subviews.splice(t,0,e),this.domElement.insertBefore(e.domElement,this.domElement.children[t]),this.setNeedsDisplay(),e.didMoveToSuperview(),this.didAddSubview(e)},t.prototype.exchangeSubview=function(e,t){if(e<t){var i=this.subviews[e],o=this.subviews[t];this.domElement.removeChild(i.domElement),this.domElement.insertBefore(i.domElement,o.domElement),this.domElement.removeChild(o.domElement),this.domElement.insertBefore(o.domElement,this.domElement.children[e])}else if(e>t){i=this.subviews[e];var n=this.subviews[t];this.domElement.removeChild(n.domElement),this.domElement.insertBefore(n.domElement,i.domElement),this.domElement.removeChild(i.domElement),this.domElement.insertBefore(i.domElement,this.domElement.children[t])}var r=this.subviews[t];this.subviews[t]=this.subviews[e],this.subviews[e]=r},t.prototype.addSubview=function(e){void 0!==e.superview&&e.removeFromSuperview(),e.willMoveToSuperview(this),e.superview=this,this.subviews.push(e),this.domElement.appendChild(e.domElement),this.setNeedsDisplay(),e.didMoveToSuperview(),this.didAddSubview(e)},t.prototype.insertSubviewBelowSubview=function(e,t){var i=this.subviews.indexOf(t);i>=0&&this.insertSubviewAtIndex(e,i)},t.prototype.insertSubviewAboveSubview=function(e,t){var i=this.subviews.indexOf(t);i>=0&&this.insertSubviewAtIndex(e,i+1)},t.prototype.bringSubviewToFront=function(e){var t=this.subviews.indexOf(e);t>=0&&(this.subviews.splice(t,1),this.subviews.push(e),this.domElement.removeChild(e.domElement),this.domElement.appendChild(e.domElement))},t.prototype.sendSubviewToBack=function(e){var t=this.subviews.indexOf(e);t>=0&&(this.subviews.splice(t,1),this.subviews.unshift(e),this.domElement.removeChild(e.domElement),this.domElement.insertBefore(e.domElement,this.domElement.firstChild))},t.prototype.isDescendantOfView=function(e){for(var t=this;null!=t;){if(t==e)return!0;t=t.superview}return!1},t.prototype.viewWithTag=function(e){for(var t=0;t<this.subviews.length;t++){var i=this.subviews[t];if(i.tag===e)return i;var o=i.viewWithTag(e);if(void 0!==o)return o}},t.prototype.didAddSubview=function(e){},t.prototype.willRemoveSubview=function(e){},t.prototype.willMoveToSuperview=function(e){},t.prototype.didMoveToSuperview=function(){this.tintColorDidChange()},t.prototype.setNeedsLayout=function(e){var t=this;void 0===e&&(e=!1),e&&(clearTimeout(this._layoutTimer),this._layoutTimer=setTimeout(function(){t.layoutIfNeeded()},0))},t.prototype.layoutIfNeeded=function(){this.layoutSubviews()},t.prototype.layoutSubviews=function(){},t.prototype.setNeedsDisplay=function(){},t.prototype.tintColorDidChange=function(){this.subviews.forEach(function(e){return e.tintColorDidChange()})},t.prototype.addGestureRecognizer=function(e){this.gestureRecognizers.push(e)},t.prototype.removeGestureRecognizer=function(e){var t=this.gestureRecognizers.indexOf(e);t>=0&&this.gestureRecognizers.splice(t,1)},t.prototype.endEditing=function(){},Object.defineProperty(t.prototype,"alpha",{get:function(){return this._alpha},set:function(e){this._alpha=e,this.domElement.style.opacity=e.toString()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"backgroundColor",{get:function(){return this._backgroundColor},set:function(e){this._backgroundColor=e,this.domElement.style.backgroundColor=e?e.toStyle():null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"frame",{get:function(){return this._frame},set:function(e){var t=this._frame.width!=e.width||this._frame.height!=e.height;this._frame=e,this.layer.frame=e,t&&(this.bounds=__assign({},e,{x:0,y:0})),this.setNeedsLayout(t),this.domElement.style.left=e.x.toString()+"px",this.domElement.style.top=e.y.toString()+"px",this.domElement.style.width=e.width.toString()+"px",this.domElement.style.height=e.height.toString()+"px"},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"center",{get:function(){return{x:this.frame.x+this.frame.width/2,y:this.frame.y+this.frame.height/2}},set:function(e){this.frame={x:e.x-this.frame.width/2,y:e.y-this.frame.height/2,width:this.frame.width,height:this.frame.height}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"transform",{get:function(){return this._transform},set:function(e){this._transform=e,this.domElement.style.transform="matrix("+e.a+", "+e.b+", "+e.c+", "+e.d+", "+e.tx+", "+e.ty+")",this.domElement.style.webkitTransform=this.domElement.style.transform},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"clipsToBounds",{get:function(){return this._clipsToBounds},set:function(e){this._clipsToBounds=e,this.domElement.style.overflow=e?"hidden":null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hidden",{get:function(){return this._hidden},set:function(e){this._hidden=e,this.domElement.style.visibility=e?"hidden":"inherit"},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"opaque",{get:function(){return this._opaque},set:function(e){this._opaque=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"contentMode",{get:function(){return this._contentMode},set:function(e){this._contentMode=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tintColor",{get:function(){return this._tintColor||this.superview&&this.superview.tintColor||new UIColor_1.UIColor(0,122/255,1,1)},set:function(e){this._tintColor=e,this.tintColorDidChange()},enumerable:!0,configurable:!0}),t.prototype.convertPointFromView=function(e,t){var i=t.convertPointToWindow(e);return i&&this.convertPointFromWindow(i)||e},t.prototype.convertPointToWindow=function(e){if(void 0!==this.window){for(var t=new Matrix_1.Matrix,i=this,o=[];null!=i&&!(i instanceof UIWindow);)o.push(i),i=i.superview;return o.forEach(function(e){if(t.postTranslate(e.frame.x,e.frame.y),!UIAffineTransform_1.UIAffineTransformIsIdentity(e.transform)){var i=Matrix_1.Matrix.unmatrix(e.transform),o=new Matrix_1.Matrix;o.postTranslate(-e.frame.width/2,-e.frame.height/2),o.postRotate(i.degree),o.postScale(i.scale.x,i.scale.y),o.postTranslate(i.translate.x,i.translate.y),o.postTranslate(e.frame.width/2,e.frame.height/2),t.concat(o)}}),{x:e.x*t.a+e.x*t.c+t.tx,y:e.y*t.b+e.y*t.d+t.ty}}},t.prototype.convertPointFromWindow=function(e){if(null!=this.window){for(var t=new Matrix_1.Matrix,i=this,o=[];null!=i&&!(i instanceof UIWindow);)o.push(i),i=i.superview;return o.forEach(function(e){if(t.postTranslate(e.frame.x,e.frame.y),!UIAffineTransform_1.UIAffineTransformIsIdentity(e.transform)){var i=Matrix_1.Matrix.unmatrix(e.transform),o=new Matrix_1.Matrix;o.postTranslate(-e.frame.width/2,-e.frame.height/2),o.postRotate(i.degree),o.postScale(i.scale.x,i.scale.y),o.postTranslate(i.translate.x,i.translate.y),o.postTranslate(e.frame.width/2,e.frame.height/2),t.preConcat(o)}}),{x:(e.x-t.tx)/(t.a+t.b),y:(e.y-t.ty)/(t.d+t.c)}}},t.prototype.hitTest=function(e){if(this.userInteractionEnabled&&this.alpha>0&&!this.hidden&&this.pointInside(e)){for(var t=this.subviews.reverse(),i=0;i<t.length;i++){var o=t[i],n=o.convertPointFromView(e,this),r=o.hitTest(n);if(void 0!==r)return r}return this}},t.prototype.touchesBegan=function(e){this.gestureRecognizers.filter(function(e){return e.enabled}).forEach(function(t){t.handleTouch(e)}),this.superview&&this.superview.touchesBegan(e)},t.prototype.touchesMoved=function(e){this.gestureRecognizers.filter(function(e){return e.enabled}).forEach(function(t){t.handleTouch(e)}),this.superview&&this.superview.touchesMoved(e)},t.prototype.touchesEnded=function(e){this.gestureRecognizers.filter(function(e){return e.enabled}).forEach(function(t){t.handleTouch(e)}),this.superview&&this.superview.touchesEnded(e)},t.prototype.touchesCancelled=function(e){this.gestureRecognizers.filter(function(e){return e.enabled}).forEach(function(t){t.handleTouch(e)}),this.superview&&this.superview.touchesCancelled(e)},t.prototype.pointInside=function(e){return e.x>=0-this.touchAreaInsets.left&&e.y>=0-this.touchAreaInsets.top&&e.x<=this.frame.width+this.touchAreaInsets.right&&e.y<=this.frame.height+this.touchAreaInsets.bottom},t}(EventEmitter_1.EventEmitter);exports.UIView=UIView;var UIWindow=function(e){function t(){var t=e.call(this)||this;return t.currentTouchesID=[],t.touches={},t.upCount=new Map,t.upTimestamp=new Map,t.setupTouches(),t}return __extends(t,e),t.prototype.setupTouches=function(){var e=this;this.domElement.addEventListener("touchstart",function(t){for(var i=function(i){var o=t.changedTouches[i];e.currentTouchesID.push(o.identifier);var n={x:o.pageX,y:o.pageY},r=e.hitTest(n);if(r){if(r instanceof UINativeTouchView)return{value:!1};var s=new UITouch_1.UITouch;e.touches[o.identifier]=s,s.identifier=o.identifier,s.phase=UITouch_1.UITouchPhase.began,s.tapCount=function(){var t,i;try{for(var o=__values(e.upCount),r=o.next();!r.done;r=o.next()){var s=__read(r.value,2),u=s[0],a=s[1],h=e.upTimestamp.get(u)||0;if(Date.now()/1e3-h<1&&Math.abs(u.x-n.x)<44&&Math.abs(u.y-n.y)<44)return a+1}}catch(e){t={error:e}}finally{try{r&&!r.done&&(i=o.return)&&i.call(o)}finally{if(t)throw t.error}}return 1}(),s.timestamp=Date.now()/1e3,s.window=e,s.windowPoint=n,s.view=r,0==s.identifier&&(exports.sharedVelocityTracker.reset(),exports.sharedVelocityTracker.addMovement(s)),s.view.touchesBegan([s])}},o=0;o<t.changedTouches.length;o++){var n=i(o);if("object"==typeof n)return n.value}t.preventDefault()}),this.domElement.addEventListener("touchmove",function(t){for(var i=0;i<t.changedTouches.length;i++){var o=t.changedTouches[i],n={x:o.pageX,y:o.pageY},r=e.touches[o.identifier];if(void 0===r)return!1;r.phase=UITouch_1.UITouchPhase.moved,r.timestamp=Date.now()/1e3,r.windowPoint=n,0==r.identifier&&exports.sharedVelocityTracker.addMovement(r),r.view&&r.view.touchesMoved([r])}t.preventDefault()}),this.domElement.addEventListener("touchend",function(t){for(var i=0;i<t.changedTouches.length;i++){var o=t.changedTouches[i],n={x:o.pageX,y:o.pageY},r=e.touches[o.identifier];void 0!==r&&(r.phase=UITouch_1.UITouchPhase.ended,r.timestamp=Date.now()/1e3,r.windowPoint=n,0==r.identifier&&exports.sharedVelocityTracker.addMovement(r),r.view&&r.view.touchesEnded([r]));var s=e.currentTouchesID.indexOf(o.identifier);s>=0&&e.currentTouchesID.splice(s,1)}if(0==e.currentTouchesID.length){for(var u in e.upCount.clear(),e.upTimestamp.clear(),e.touches)if(e.touches.hasOwnProperty(u)){var a=e.touches[u];a.windowPoint&&(e.upCount.set(a.windowPoint,a.tapCount),e.upTimestamp.set(a.windowPoint,a.timestamp))}e.touches={},setTimeout(function(){UIView.recognizedGesture=void 0},0)}t.preventDefault()}),this.domElement.addEventListener("touchcancel",function(t){for(var i=0;i<t.changedTouches.length;i++){var o=t.changedTouches[i],n={x:o.pageX,y:o.pageY},r=e.touches[o.identifier];r&&(r.phase=UITouch_1.UITouchPhase.cancelled,r.timestamp=Date.now()/1e3,r.windowPoint=n,0==r.identifier&&exports.sharedVelocityTracker.addMovement(r),r.view&&r.view.touchesCancelled([r]))}e.upCount.clear(),e.upTimestamp.clear(),e.touches={},t.preventDefault()})},t}(UIView);exports.UIWindow=UIWindow;var UINativeTouchView=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(UIView);exports.UINativeTouchView=UINativeTouchView;
},{"../coregraphics/CALayer":1,"../kimi/EventEmitter":3,"./UIAffineTransform":6,"./UIColor":7,"./UIEdgeInsets":8,"./UIEnums":9,"./UIRect":15,"./UITouch":18,"./helpers/Matrix":20}],20:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var MatrixAlgorithm=function(){function t(){this.props=[],this.props[0]=1,this.props[1]=0,this.props[2]=0,this.props[3]=0,this.props[4]=0,this.props[5]=1,this.props[6]=0,this.props[7]=0,this.props[8]=0,this.props[9]=0,this.props[10]=1,this.props[11]=0,this.props[12]=0,this.props[13]=0,this.props[14]=0,this.props[15]=1}return t.prototype.rotate=function(t){if(0===t)return this;var s=Math.cos(t),p=Math.sin(t);return this._t(s,-p,0,0,p,s,0,0,0,0,1,0,0,0,0,1)},t.prototype.rotateX=function(t){if(0===t)return this;var s=Math.cos(t),p=Math.sin(t);return this._t(1,0,0,0,0,s,-p,0,0,p,s,0,0,0,0,1)},t.prototype.rotateY=function(t){if(0===t)return this;var s=Math.cos(t),p=Math.sin(t);return this._t(s,0,p,0,0,1,0,0,-p,0,s,0,0,0,0,1)},t.prototype.rotateZ=function(t){if(0===t)return this;var s=Math.cos(t),p=Math.sin(t);return this._t(s,-p,0,0,p,s,0,0,0,0,1,0,0,0,0,1)},t.prototype.shear=function(t,s){return this._t(1,s,t,1,0,0)},t.prototype.skew=function(t,s){return this.shear(Math.tan(t),Math.tan(s))},t.prototype.skewFromAxis=function(t,s){var p=Math.cos(s),r=Math.sin(s);return this._t(p,r,0,0,-r,p,0,0,0,0,1,0,0,0,0,1)},t.prototype.scale=function(t,s,p){return p=isNaN(p)?1:p,1==t&&1==s&&1==p?this:this._t(t,0,0,0,0,s,0,0,0,0,p,0,0,0,0,1)},t.prototype.setTransform=function(t,s,p,r,o,i,h,a,e,n,c,u,y,l,x,f){return this.props[0]=t,this.props[1]=s,this.props[2]=p,this.props[3]=r,this.props[4]=o,this.props[5]=i,this.props[6]=h,this.props[7]=a,this.props[8]=e,this.props[9]=n,this.props[10]=c,this.props[11]=u,this.props[12]=y,this.props[13]=l,this.props[14]=x,this.props[15]=f,this},t.prototype.translate=function(t,s,p){return p=isNaN(p)?0:p,0!==t||0!==s||0!==p?this._t(1,0,0,0,0,1,0,0,0,0,1,0,t,s,p,1):this},t.prototype._t=function(t,s,p,r,o,i,h,a,e,n,c,u,y,l,x,f){this.transform(t,s,p,r,o,i,h,a,e,n,c,u,y,l,x,f)},t.prototype.transform=function(t,s,p,r,o,i,h,a,e,n,c,u,y,l,x,f){if(1===t&&0===s&&0===p&&0===r&&0===o&&1===i&&0===h&&0===a&&0===e&&0===n&&1===c&&0===u)return 0===y&&0===l&&0===x||(this.props[12]=this.props[12]*t+this.props[13]*o+this.props[14]*e+this.props[15]*y,this.props[13]=this.props[12]*s+this.props[13]*i+this.props[14]*n+this.props[15]*l,this.props[14]=this.props[12]*p+this.props[13]*h+this.props[14]*c+this.props[15]*x,this.props[15]=this.props[12]*r+this.props[13]*a+this.props[14]*u+this.props[15]*f),this;var d=this.props[0],M=this.props[1],v=this.props[2],m=this.props[3],g=this.props[4],b=this.props[5],A=this.props[6],P=this.props[7],_=this.props[8],w=this.props[9],T=this.props[10],I=this.props[11],N=this.props[12],S=this.props[13],k=this.props[14],q=this.props[15];return this.props[0]=d*t+M*o+v*e+m*y,this.props[1]=d*s+M*i+v*n+m*l,this.props[2]=d*p+M*h+v*c+m*x,this.props[3]=d*r+M*a+v*u+m*f,this.props[4]=g*t+b*o+A*e+P*y,this.props[5]=g*s+b*i+A*n+P*l,this.props[6]=g*p+b*h+A*c+P*x,this.props[7]=g*r+b*a+A*u+P*f,this.props[8]=_*t+w*o+T*e+I*y,this.props[9]=_*s+w*i+T*n+I*l,this.props[10]=_*p+w*h+T*c+I*x,this.props[11]=_*r+w*a+T*u+I*f,this.props[12]=N*t+S*o+k*e+q*y,this.props[13]=N*s+S*i+k*n+q*l,this.props[14]=N*p+S*h+k*c+q*x,this.props[15]=N*r+S*a+k*u+q*f,this},t.prototype.clone=function(t){var s;for(s=0;s<16;s+=1)t.props[s]=this.props[s]},t.prototype.cloneFromProps=function(t){var s;for(s=0;s<16;s+=1)this.props[s]=t[s]},t.prototype.applyToPoint=function(t,s,p){return{x:t*this.props[0]+s*this.props[4]+p*this.props[8]+this.props[12],y:t*this.props[1]+s*this.props[5]+p*this.props[9]+this.props[13],z:t*this.props[2]+s*this.props[6]+p*this.props[10]+this.props[14]}},t.prototype.applyToX=function(t,s,p){return t*this.props[0]+s*this.props[4]+p*this.props[8]+this.props[12]},t.prototype.applyToY=function(t,s,p){return t*this.props[1]+s*this.props[5]+p*this.props[9]+this.props[13]},t.prototype.applyToZ=function(t,s,p){return t*this.props[2]+s*this.props[6]+p*this.props[10]+this.props[14]},t.prototype.applyToPointArray=function(t,s,p){return[t*this.props[0]+s*this.props[4]+p*this.props[8]+this.props[12],t*this.props[1]+s*this.props[5]+p*this.props[9]+this.props[13],t*this.props[2]+s*this.props[6]+p*this.props[10]+this.props[14]]},t.prototype.applyToPointStringified=function(t,s){return Math.round(t*this.props[0]+s*this.props[4]+this.props[12])+","+Math.round(t*this.props[1]+s*this.props[5]+this.props[13])},t}();exports.MatrixAlgorithm=MatrixAlgorithm;var Matrix=function(){function t(t,s,p,r,o,i){void 0===t&&(t=1),void 0===s&&(s=0),void 0===p&&(p=0),void 0===r&&(r=1),void 0===o&&(o=0),void 0===i&&(i=0),this.a=t,this.b=s,this.c=p,this.d=r,this.tx=o,this.ty=i}return t.unmatrix=function(t){var s=t.a,p=t.b,r=t.c,o=t.d;if(s*o==p*r)return{scale:{x:1,y:1},degree:0,translate:{x:0,y:0}};var i=Math.sqrt(s*s+p*p),h=(s/=i)*r+(p/=i)*o;r-=s*h,o-=p*h;var a=Math.sqrt(r*r+o*o);return h/=a,s*(o/=a)<p*(r/=a)&&(s=-s,p=-p,h=-h,i=-i),{scale:{x:i,y:a},degree:Math.atan2(p,s)/(Math.PI/180),translate:{x:t.tx,y:t.ty}}},t.prototype.setValues=function(t){this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty},t.prototype.getValues=function(){return{a:this.a,b:this.b,c:this.c,d:this.d,tx:this.tx,ty:this.ty}},t.prototype.isIdentity=function(){return 1==this.a&&0==this.b&&0==this.c&&1==this.d&&0==this.tx&&0==this.ty},t.prototype.setScale=function(s,p){var r=new MatrixAlgorithm,o=t.unmatrix(this);r.rotate(-o.degree*Math.PI/180),r.scale(s||o.scale.x,p||o.scale.y,1),r.translate(o.translate.x,o.translate.y,0),this.a=r.props[0],this.b=r.props[1],this.c=r.props[4],this.d=r.props[5],this.tx=r.props[12],this.ty=r.props[13]},t.prototype.postScale=function(s,p){var r=new MatrixAlgorithm,o=t.unmatrix(this);r.rotate(-o.degree*Math.PI/180),r.scale(o.scale.x,o.scale.y,1),r.translate(o.translate.x,o.translate.y,0),r.scale(s||1,p||1,1),this.a=r.props[0],this.b=r.props[1],this.c=r.props[4],this.d=r.props[5],this.tx=r.props[12],this.ty=r.props[13]},t.prototype.setTranslate=function(s,p){var r=new MatrixAlgorithm,o=t.unmatrix(this);r.rotate(-o.degree*Math.PI/180),r.scale(o.scale.x,o.scale.y,1),r.translate(s||o.translate.x,p||o.translate.y,0),this.a=r.props[0],this.b=r.props[1],this.c=r.props[4],this.d=r.props[5],this.tx=r.props[12],this.ty=r.props[13]},t.prototype.postTranslate=function(s,p){var r=new MatrixAlgorithm,o=t.unmatrix(this);r.rotate(-o.degree*Math.PI/180),r.scale(o.scale.x,o.scale.y,1),r.translate(o.translate.x,o.translate.y,0),r.translate(s||0,p||0,0),this.a=r.props[0],this.b=r.props[1],this.c=r.props[4],this.d=r.props[5],this.tx=r.props[12],this.ty=r.props[13]},t.prototype.setRotate=function(s){var p=new MatrixAlgorithm,r=t.unmatrix(this);p.rotate(-s||-r.degree*Math.PI/180),p.scale(r.scale.x,r.scale.y,1),p.translate(r.translate.x,r.translate.y,0),this.a=p.props[0],this.b=p.props[1],this.c=p.props[4],this.d=p.props[5],this.tx=p.props[12],this.ty=p.props[13]},t.prototype.postRotate=function(s){var p=new MatrixAlgorithm,r=t.unmatrix(this);p.rotate(-r.degree*Math.PI/180),p.scale(r.scale.x,r.scale.y,1),p.translate(r.translate.x,r.translate.y,0),p.rotate(-s),this.a=p.props[0],this.b=p.props[1],this.c=p.props[4],this.d=p.props[5],this.tx=p.props[12],this.ty=p.props[13]},t.prototype.preConcat=function(t){var s=new MatrixAlgorithm;s.props[0]=t.a,s.props[1]=t.b,s.props[4]=t.c,s.props[5]=t.d,s.props[12]=t.tx,s.props[13]=t.ty,s.transform(this.a,this.b,0,0,this.c,this.d,0,0,0,0,1,0,this.tx,this.ty,0,1),this.a=s.props[0],this.b=s.props[1],this.c=s.props[4],this.d=s.props[5],this.tx=s.props[12],this.ty=s.props[13]},t.prototype.concat=function(t){var s=new MatrixAlgorithm;s.props[0]=this.a,s.props[1]=this.b,s.props[4]=this.c,s.props[5]=this.d,s.props[12]=this.tx,s.props[13]=this.ty,s.transform(t.a,t.b,0,0,t.c,t.d,0,0,0,0,1,0,t.tx,t.ty,0,1),this.a=s.props[0],this.b=s.props[1],this.c=s.props[4],this.d=s.props[5],this.tx=s.props[12],this.ty=s.props[13]},t}();exports.Matrix=Matrix;
},{}]},{},[5]);
