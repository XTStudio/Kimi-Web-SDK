(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var UIRect_1=require("../uikit/UIRect"),CALayer=function(){function t(){this._view=void 0,this.frame=UIRect_1.UIRectZero,this._cornerRadius=0,this.superlayer=void 0,this._shadowColor=void 0,this._shadowOpacity=0,this._shadowOffset={width:0,height:-3},this._shadowRadius=3}return Object.defineProperty(t.prototype,"view",{get:function(){return this.superlayer?this.superlayer._view:this._view},set:function(t){this._view=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cornerRadius",{get:function(){return this._cornerRadius},set:function(t){this._cornerRadius=t,void 0!==this._view&&(this._view.domElement.style.borderRadius=t.toFixed(0)+"px")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"shadowColor",{get:function(){return this._shadowColor},set:function(t){this._shadowColor=t,this.resetShadow()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"shadowOpacity",{get:function(){return this._shadowOpacity},set:function(t){this._shadowOpacity=t,this.resetShadow()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"shadowOffset",{get:function(){return this._shadowOffset},set:function(t){this._shadowOffset=t,this.resetShadow()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"shadowRadius",{get:function(){return this._shadowRadius},set:function(t){this._shadowRadius=t,this.resetShadow()},enumerable:!0,configurable:!0}),t.prototype.resetShadow=function(){this._view&&(this.shadowOpacity>0&&this.shadowColor&&this.shadowColor.a>0?this._view.domElement.style.boxShadow=this.shadowOffset.width.toString()+"px "+this.shadowOffset.height.toString()+"px "+this.shadowRadius.toString()+"px "+this.shadowColor.colorWithAlphaComponent(this.shadowOpacity).toStyle():this._view.domElement.style.boxShadow=null)},t}();exports.CALayer=CALayer;
},{"../uikit/UIRect":33}],2:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var DispatchQueue=function(){function e(e){}return e.prototype.async=function(e){setTimeout(e,0)},e.prototype.asyncAfter=function(e,t){setTimeout(t,1e3*e)},e.prototype.isolate=function(e){for(var t=[],o=1;o<arguments.length;o++)t[o-1]=arguments[o];setTimeout(function(){e.apply(void 0,t)},0)},e.main=new e,e.global=new e,e}();exports.DispatchQueue=DispatchQueue;
},{}],3:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var EventEmitterIMP=require("./EventEmitterImp");exports.EventEmitter=EventEmitterIMP.EventEmitter;
},{"./EventEmitterImp":4}],4:[function(require,module,exports){
!function(e){"use strict";function t(){}var n=t.prototype;e.EventEmitter;function r(e,t){for(var n=e.length;n--;)if(e[n].listener===t)return n;return-1}function i(e){return function(){return this[e].apply(this,arguments)}}n.getListeners=function(e){var t,n,r=this._getEvents();if(e instanceof RegExp)for(n in t={},r)r.hasOwnProperty(n)&&e.test(n)&&(t[n]=r[n]);else t=r[e]||(r[e]=[]);return t},n.flattenListeners=function(e){var t,n=[];for(t=0;t<e.length;t+=1)n.push(e[t].listener);return n},n.getListenersAsObject=function(e){var t,n=this.getListeners(e);return n instanceof Array&&((t={})[e]=n),t||n},n.addListener=function(e,t){if(!function e(t){return"function"==typeof t||t instanceof RegExp||!(!t||"object"!=typeof t)&&e(t.listener)}(t))throw new TypeError("listener must be a function");var n,i=this.getListenersAsObject(e),s="object"==typeof t;for(n in i)i.hasOwnProperty(n)&&-1===r(i[n],t)&&i[n].push(s?t:{listener:t,once:!1});return this},n.on=i("addListener"),n.addOnceListener=function(e,t){return this.addListener(e,{listener:t,once:!0})},n.once=i("addOnceListener"),n.defineEvent=function(e){return this.getListeners(e),this},n.defineEvents=function(e){for(var t=0;t<e.length;t+=1)this.defineEvent(e[t]);return this},n.removeListener=function(e,t){var n,i,s=this.getListenersAsObject(e);for(i in s)s.hasOwnProperty(i)&&-1!==(n=r(s[i],t))&&s[i].splice(n,1);return this},n.off=i("removeListener"),n.addListeners=function(e,t){return this.manipulateListeners(!1,e,t)},n.removeListeners=function(e,t){return this.manipulateListeners(!0,e,t)},n.manipulateListeners=function(e,t,n){var r,i,s=e?this.removeListener:this.addListener,o=e?this.removeListeners:this.addListeners;if("object"!=typeof t||t instanceof RegExp)for(r=n.length;r--;)s.call(this,t,n[r]);else for(r in t)t.hasOwnProperty(r)&&(i=t[r])&&("function"==typeof i?s.call(this,r,i):o.call(this,r,i));return this},n.removeEvent=function(e){var t,n=typeof e,r=this._getEvents();if("string"===n)delete r[e];else if(e instanceof RegExp)for(t in r)r.hasOwnProperty(t)&&e.test(t)&&delete r[t];else delete this._events;return this},n.removeAllListeners=i("removeEvent"),n.emitEvent=function(e,t){var n,r,i,s,o=this.getListenersAsObject(e);for(s in o)if(o.hasOwnProperty(s))for(n=o[s].slice(0),i=0;i<n.length;i++)!0===(r=n[i]).once&&this.removeListener(e,r.listener),r.listener.apply(this,t||[])===this._getOnceReturnValue()&&this.removeListener(e,r.listener);return this},n.val=function(e){var t,n,r,i,s=Array.prototype.slice.call(arguments,1),o=this.getListenersAsObject(e);for(i in o)if(o.hasOwnProperty(i))for(t=o[i].slice(0),r=0;r<t.length;r++)return!0===(n=t[r]).once&&this.removeListener(e,n.listener),n.listener.apply(this,s||[])},n.trigger=i("emitEvent"),n.emit=function(e){var t=Array.prototype.slice.call(arguments,1);return this.emitEvent(e,t)},n.setOnceReturnValue=function(e){return this._onceReturnValue=e,this},n._getOnceReturnValue=function(){return!this.hasOwnProperty("_onceReturnValue")||this._onceReturnValue},n._getEvents=function(){return this._events||(this._events={})},e.EventEmitter=t}(this||{});
},{}],5:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),void 0===window.global&&(window.global=window);var UIEnums_1=require("./uikit/UIEnums");global.UIViewContentMode=UIEnums_1.UIViewContentMode,global.UIControlState=UIEnums_1.UIControlState,global.UIControlContentVerticalAlignment=UIEnums_1.UIControlContentVerticalAlignment,global.UIControlContentHorizontalAlignment=UIEnums_1.UIControlContentHorizontalAlignment,global.UITextAlignment=UIEnums_1.UITextAlignment,global.UILineBreakMode=UIEnums_1.UILineBreakMode,global.UITextFieldViewMode=UIEnums_1.UITextFieldViewMode,global.UITextAutocapitalizationType=UIEnums_1.UITextAutocapitalizationType,global.UITextAutocorrectionType=UIEnums_1.UITextAutocorrectionType,global.UITextSpellCheckingType=UIEnums_1.UITextSpellCheckingType,global.UIKeyboardType=UIEnums_1.UIKeyboardType,global.UIReturnKeyType=UIEnums_1.UIReturnKeyType,global.UILayoutConstraintAxis=UIEnums_1.UILayoutConstraintAxis,global.UIStackViewDistribution=UIEnums_1.UIStackViewDistribution,global.UIStackViewAlignment=UIEnums_1.UIStackViewAlignment,global.UIStatusBarStyle=UIEnums_1.UIStatusBarStyle;var UIActivityIndicatorView_1=require("./uikit/UIActivityIndicatorView");global.UIActivityIndicatorView=UIActivityIndicatorView_1.UIActivityIndicatorView;var UIAlert_1=require("./uikit/UIAlert");global.UIAlert=UIAlert_1.UIAlert;var UIAnimator_1=require("./uikit/UIAnimator");global.UIAnimator=UIAnimator_1.UIAnimator;var UIButton_1=require("./uikit/UIButton");global.UIButton=UIButton_1.UIButton;var UICollectionView_1=require("./uikit/UICollectionView");global.UICollectionView=UICollectionView_1.UICollectionView,global.UICollectionViewCell=UICollectionView_1.UICollectionViewCell,global.UICollectionViewLayout=UICollectionView_1.UICollectionViewLayout;var UICollectionViewFlowLayout_1=require("./uikit/UICollectionViewFlowLayout");global.UICollectionViewFlowLayout=UICollectionViewFlowLayout_1.UICollectionViewFlowLayout,global.UICollectionViewScrollDirection=UICollectionViewFlowLayout_1.UICollectionViewScrollDirection;var UIColor_1=require("./uikit/UIColor");global.UIColor=UIColor_1.UIColor;var UIConfirm_1=require("./uikit/UIConfirm");global.UIConfirm=UIConfirm_1.UIConfirm;var UIFetchMoreControl_1=require("./uikit/UIFetchMoreControl");global.UIFetchMoreControl=UIFetchMoreControl_1.UIFetchMoreControl;var UIFont_1=require("./uikit/UIFont");global.UIFont=UIFont_1.UIFont;var UIGestureRecognizer_1=require("./uikit/UIGestureRecognizer");global.UIGestureRecognizerState=UIGestureRecognizer_1.UIGestureRecognizerState,global.UIGestureRecognizer=UIGestureRecognizer_1.UIGestureRecognizer;var UIImage_1=require("./uikit/UIImage");global.UIImage=UIImage_1.UIImage,global.UIImageRenderingMode=UIImage_1.UIImageRenderingMode;var UIImageView_1=require("./uikit/UIImageView");global.UIImageView=UIImageView_1.UIImageView;var UILabel_1=require("./uikit/UILabel");global.UILabel=UILabel_1.UILabel;var UILongPressGestureRecognizer_1=require("./uikit/UILongPressGestureRecognizer");global.UILongPressGestureRecognizer=UILongPressGestureRecognizer_1.UILongPressGestureRecognizer;var UINavigationBar_1=require("./uikit/UINavigationBar");global.UINavigationBar=UINavigationBar_1.UINavigationBar,global.UINavigationItem=UINavigationBar_1.UINavigationItem,global.UIBarButtonItem=UINavigationBar_1.UIBarButtonItem;var UINavigationController_1=require("./uikit/UINavigationController");global.UINavigationController=UINavigationController_1.UINavigationController;var UINavigationBarViewController_1=require("./uikit/UINavigationBarViewController");global.UINavigationBarViewController=UINavigationBarViewController_1.UINavigationBarViewController;var UIPanGestureRecognizer_1=require("./uikit/UIPanGestureRecognizer");global.UIPanGestureRecognizer=UIPanGestureRecognizer_1.UIPanGestureRecognizer;var UIPinchGestureRecognizer_1=require("./uikit/UIPinchGestureRecognizer");global.UIPinchGestureRecognizer=UIPinchGestureRecognizer_1.UIPinchGestureRecognizer;var UIProgressView_1=require("./uikit/UIProgressView");global.UIProgressView=UIProgressView_1.UIProgressView;var UIPrompt_1=require("./uikit/UIPrompt");global.UIPrompt=UIPrompt_1.UIPrompt;var UIRefreshControl_1=require("./uikit/UIRefreshControl");global.UIRefreshControl=UIRefreshControl_1.UIRefreshControl;var UIRotationGestureRecognizer_1=require("./uikit/UIRotationGestureRecognizer");global.UIRotationGestureRecognizer=UIRotationGestureRecognizer_1.UIRotationGestureRecognizer;var UIScreen_1=require("./uikit/UIScreen");global.UIScreen=UIScreen_1.UIScreen;var UIScrollView_1=require("./uikit/UIScrollView");global.UIScrollView=UIScrollView_1.UIScrollView;var UISlider_1=require("./uikit/UISlider");global.UISlider=UISlider_1.UISlider;var UISwitch_1=require("./uikit/UISwitch");global.UISwitch=UISwitch_1.UISwitch;var UITableView_1=require("./uikit/UITableView");global.UITableView=UITableView_1.UITableView,global.UITableViewCell=UITableView_1.UITableViewCell;var UITapGestureRecognizer_1=require("./uikit/UITapGestureRecognizer");global.UITapGestureRecognizer=UITapGestureRecognizer_1.UITapGestureRecognizer;var UITextField_1=require("./uikit/UITextField");global.UITextField=UITextField_1.UITextField;var UITextView_1=require("./uikit/UITextView");global.UITextView=UITextView_1.UITextView;var UIView_1=require("./uikit/UIView");global.UIView=UIView_1.UIView,global.UIWindow=UIView_1.UIWindow;var UIViewController_1=require("./uikit/UIViewController");global.UIViewController=UIViewController_1.UIViewController;var DispatchQueue_1=require("./foundation/DispatchQueue");global.DispatchQueue=DispatchQueue_1.DispatchQueue;
},{"./foundation/DispatchQueue":2,"./uikit/UIActivityIndicatorView":6,"./uikit/UIAlert":8,"./uikit/UIAnimator":9,"./uikit/UIButton":10,"./uikit/UICollectionView":11,"./uikit/UICollectionViewFlowLayout":12,"./uikit/UIColor":13,"./uikit/UIConfirm":14,"./uikit/UIEnums":16,"./uikit/UIFetchMoreControl":17,"./uikit/UIFont":18,"./uikit/UIGestureRecognizer":19,"./uikit/UIImage":20,"./uikit/UIImageView":21,"./uikit/UILabel":23,"./uikit/UILongPressGestureRecognizer":24,"./uikit/UINavigationBar":25,"./uikit/UINavigationBarViewController":26,"./uikit/UINavigationController":27,"./uikit/UIPanGestureRecognizer":28,"./uikit/UIPinchGestureRecognizer":29,"./uikit/UIProgressView":31,"./uikit/UIPrompt":32,"./uikit/UIRefreshControl":34,"./uikit/UIRotationGestureRecognizer":35,"./uikit/UIScreen":36,"./uikit/UIScrollView":37,"./uikit/UISlider":39,"./uikit/UISwitch":40,"./uikit/UITableView":41,"./uikit/UITapGestureRecognizer":42,"./uikit/UITextField":43,"./uikit/UITextView":44,"./uikit/UIView":46,"./uikit/UIViewController":47}],6:[function(require,module,exports){
"use strict";var __extends=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function a(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(a.prototype=i.prototype,new a)}}();Object.defineProperty(exports,"__esModule",{value:!0});var UIView_1=require("./UIView"),smallElement='<svg class="lds-spinner" width="36px" height="36px" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 100 100" preserveAspectRatio="xMidYMid" style="background-image: none; background-position: initial initial; background-repeat: initial initial;"><g transform="rotate(0 50 50)" class=""> <rect x="47" y="24" rx="9.4" ry="4.8" width="6" height="12" fill="#28292f" class=""> <animate attributeName="opacity" values="1;0" times="0;1" dur="1s" begin="-0.9166666666666666s" repeatCount="indefinite" class=""></animate> </rect> </g><g transform="rotate(30 50 50)" class=""> <rect x="47" y="24" rx="9.4" ry="4.8" width="6" height="12" fill="#28292f" class=""> <animate attributeName="opacity" values="1;0" times="0;1" dur="1s" begin="-0.8333333333333334s" repeatCount="indefinite" class=""></animate> </rect> </g><g transform="rotate(60 50 50)" class=""> <rect x="47" y="24" rx="9.4" ry="4.8" width="6" height="12" fill="#28292f" class=""> <animate attributeName="opacity" values="1;0" times="0;1" dur="1s" begin="-0.75s" repeatCount="indefinite" class=""></animate> </rect> </g><g transform="rotate(90 50 50)" class=""> <rect x="47" y="24" rx="9.4" ry="4.8" width="6" height="12" fill="#28292f" class=""> <animate attributeName="opacity" values="1;0" times="0;1" dur="1s" begin="-0.6666666666666666s" repeatCount="indefinite" class=""></animate> </rect> </g><g transform="rotate(120 50 50)" class=""> <rect x="47" y="24" rx="9.4" ry="4.8" width="6" height="12" fill="#28292f" class=""> <animate attributeName="opacity" values="1;0" times="0;1" dur="1s" begin="-0.5833333333333334s" repeatCount="indefinite" class=""></animate> </rect> </g><g transform="rotate(150 50 50)" class=""> <rect x="47" y="24" rx="9.4" ry="4.8" width="6" height="12" fill="#28292f" class=""> <animate attributeName="opacity" values="1;0" times="0;1" dur="1s" begin="-0.5s" repeatCount="indefinite" class=""></animate> </rect> </g><g transform="rotate(180 50 50)" class=""> <rect x="47" y="24" rx="9.4" ry="4.8" width="6" height="12" fill="#28292f" class=""> <animate attributeName="opacity" values="1;0" times="0;1" dur="1s" begin="-0.4166666666666667s" repeatCount="indefinite" class=""></animate> </rect> </g><g transform="rotate(210 50 50)" class=""> <rect x="47" y="24" rx="9.4" ry="4.8" width="6" height="12" fill="#28292f" class=""> <animate attributeName="opacity" values="1;0" times="0;1" dur="1s" begin="-0.3333333333333333s" repeatCount="indefinite" class=""></animate> </rect> </g><g transform="rotate(240 50 50)" class=""> <rect x="47" y="24" rx="9.4" ry="4.8" width="6" height="12" fill="#28292f" class=""> <animate attributeName="opacity" values="1;0" times="0;1" dur="1s" begin="-0.25s" repeatCount="indefinite" class=""></animate> </rect> </g><g transform="rotate(270 50 50)" class=""> <rect x="47" y="24" rx="9.4" ry="4.8" width="6" height="12" fill="#28292f" class=""> <animate attributeName="opacity" values="1;0" times="0;1" dur="1s" begin="-0.16666666666666666s" repeatCount="indefinite" class=""></animate> </rect> </g><g transform="rotate(300 50 50)" class=""> <rect x="47" y="24" rx="9.4" ry="4.8" width="6" height="12" fill="#28292f" class=""> <animate attributeName="opacity" values="1;0" times="0;1" dur="1s" begin="-0.08333333333333333s" repeatCount="indefinite" class=""></animate> </rect> </g><g transform="rotate(330 50 50)" class=""> <rect x="47" y="24" rx="9.4" ry="4.8" width="6" height="12" fill="#28292f" class=""> <animate attributeName="opacity" values="1;0" times="0;1" dur="1s" begin="0s" repeatCount="indefinite" class=""></animate> </rect> </g></svg>',largeElement='<svg class="lds-spinner" width="88px" height="88px" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 100 100" preserveAspectRatio="xMidYMid" style="background-image: none; background-position: initial initial; background-repeat: initial initial;"><g transform="rotate(0 50 50)"> <rect x="47" y="24" rx="9.4" ry="4.8" width="6" height="12" fill="#28292f"> <animate attributeName="opacity" values="1;0" times="0;1" dur="1s" begin="-0.9166666666666666s" repeatCount="indefinite"></animate> </rect> </g><g transform="rotate(30 50 50)"> <rect x="47" y="24" rx="9.4" ry="4.8" width="6" height="12" fill="#28292f"> <animate attributeName="opacity" values="1;0" times="0;1" dur="1s" begin="-0.8333333333333334s" repeatCount="indefinite"></animate> </rect> </g><g transform="rotate(60 50 50)"> <rect x="47" y="24" rx="9.4" ry="4.8" width="6" height="12" fill="#28292f"> <animate attributeName="opacity" values="1;0" times="0;1" dur="1s" begin="-0.75s" repeatCount="indefinite"></animate> </rect> </g><g transform="rotate(90 50 50)"> <rect x="47" y="24" rx="9.4" ry="4.8" width="6" height="12" fill="#28292f"> <animate attributeName="opacity" values="1;0" times="0;1" dur="1s" begin="-0.6666666666666666s" repeatCount="indefinite"></animate> </rect> </g><g transform="rotate(120 50 50)"> <rect x="47" y="24" rx="9.4" ry="4.8" width="6" height="12" fill="#28292f"> <animate attributeName="opacity" values="1;0" times="0;1" dur="1s" begin="-0.5833333333333334s" repeatCount="indefinite"></animate> </rect> </g><g transform="rotate(150 50 50)"> <rect x="47" y="24" rx="9.4" ry="4.8" width="6" height="12" fill="#28292f"> <animate attributeName="opacity" values="1;0" times="0;1" dur="1s" begin="-0.5s" repeatCount="indefinite"></animate> </rect> </g><g transform="rotate(180 50 50)"> <rect x="47" y="24" rx="9.4" ry="4.8" width="6" height="12" fill="#28292f"> <animate attributeName="opacity" values="1;0" times="0;1" dur="1s" begin="-0.4166666666666667s" repeatCount="indefinite"></animate> </rect> </g><g transform="rotate(210 50 50)"> <rect x="47" y="24" rx="9.4" ry="4.8" width="6" height="12" fill="#28292f"> <animate attributeName="opacity" values="1;0" times="0;1" dur="1s" begin="-0.3333333333333333s" repeatCount="indefinite"></animate> </rect> </g><g transform="rotate(240 50 50)"> <rect x="47" y="24" rx="9.4" ry="4.8" width="6" height="12" fill="#28292f"> <animate attributeName="opacity" values="1;0" times="0;1" dur="1s" begin="-0.25s" repeatCount="indefinite"></animate> </rect> </g><g transform="rotate(270 50 50)"> <rect x="47" y="24" rx="9.4" ry="4.8" width="6" height="12" fill="#28292f"> <animate attributeName="opacity" values="1;0" times="0;1" dur="1s" begin="-0.16666666666666666s" repeatCount="indefinite"></animate> </rect> </g><g transform="rotate(300 50 50)"> <rect x="47" y="24" rx="9.4" ry="4.8" width="6" height="12" fill="#28292f"> <animate attributeName="opacity" values="1;0" times="0;1" dur="1s" begin="-0.08333333333333333s" repeatCount="indefinite"></animate> </rect> </g><g transform="rotate(330 50 50)"> <rect x="47" y="24" rx="9.4" ry="4.8" width="6" height="12" fill="#28292f"> <animate attributeName="opacity" values="1;0" times="0;1" dur="1s" begin="0s" repeatCount="indefinite"></animate> </rect> </g></svg>',UIActivityIndicatorView=function(t){function e(){var e=t.call(this)||this;return e.contentElement=document.createElementNS("http://www.w3.org/2000/svg","svg"),e.color=void 0,e.largeStyle=!1,e.animating=!1,e.contentElement.style.position="absolute",e.contentElement.style.width="100%",e.contentElement.style.height="100%",e.domElement.appendChild(e.contentElement),e}return __extends(e,t),e.prototype.startAnimating=function(){this.animating=!0;var t=this.largeStyle?largeElement:smallElement;this.color&&(t=t.replace(/fill="#28292f"/g,'fill="'+this.color.toStyle()+'"'),console.log(t)),this.contentElement.innerHTML=t,this.layoutSubviews()},e.prototype.stopAnimating=function(){var t=this;this.animating=!1,this.contentElement.childNodes.forEach(function(e){t.contentElement.removeChild(e)})},e.prototype.layoutSubviews=function(){t.prototype.layoutSubviews.call(this);var e=this.largeStyle?88:36;this.contentElement.style.transform="matrix(1.0, 0.0, 0.0, 1.0, "+(this.bounds.width-e)/2+", "+(this.bounds.height-e)/2+")",this.contentElement.style.webkitTransform=this.contentElement.style.transform},e}(UIView_1.UIView);exports.UIActivityIndicatorView=UIActivityIndicatorView;
},{"./UIView":46}],7:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.UIAffineTransformIdentity={a:1,b:0,c:0,d:1,tx:0,ty:0},exports.UIAffineTransformIsIdentity=function(t){return 1==t.a&&0==t.b&&0==t.c&&1==t.d&&0==t.tx&&0==t.ty},exports.UIAffineTransformEqualTo=function(t,e){return t.a==e.a&&t.b==e.b&&t.c==e.c&&t.d==e.d&&t.tx==e.tx&&t.ty==e.ty};
},{}],8:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var UIAlert=function(){function t(t,e){void 0===e&&(e="OK"),this.message=t,this.buttonText=e}return t.prototype.show=function(t){window.alert(this.message),t&&t()},t}();exports.UIAlert=UIAlert;
},{}],9:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var LinearAnimator_1=require("./helpers/LinearAnimator"),SpringSystem=require("./helpers/rebound.min").SpringSystem,LinearAnimation=function(){function n(n){this.animator=n}return n.prototype.setStartValue=function(n){this.animator.startValue=n},n.prototype.setEndValue=function(n){this.animator.endValue=n,this.animator.start()},n.prototype.setUpdateListener=function(n){this.animator.addListener({onUpdate:function(t){n(t)},onEnd:function(){}})},n.prototype.cancel=function(){this.animator.cancel()},n}(),SpringAnimation=function(){function n(n){this.spring=n}return n.prototype.setStartValue=function(n){this.spring.setCurrentValue(n)},n.prototype.setEndValue=function(n){this.spring.setEndValue(n)},n.prototype.setUpdateListener=function(n){var t=this;this.spring.addListener({onSpringUpdate:function(){n(t.spring.getCurrentValue())}})},n.prototype.cancel=function(){this.spring.removeAllListeners()},n}(),UIAnimator=function(){function n(){this.springSystem=new SpringSystem,this.animationCreater=void 0}return n.prototype.linear=function(t,i,e,r){n.activeAnimator=this;var a=!1;this.animationCreater=function(){var n=new LinearAnimator_1.LinearAndCurveAnimator(i);return n.duration=1e3*t,n.addListener({onUpdate:function(){},onEnd:function(){a||(a=!0,r&&r())}}),new LinearAnimation(n)},e(),n.activeAnimator=void 0},n.linear=function(t,i,e){n.shared.linear(t,!1,i,e)},n.curve=function(t,i,e){n.shared.linear(t,!0,i,e)},n.prototype.spring=function(t,i,e,r,a){var o=this;n.activeAnimator=this;var s=!1;this.animationCreater=function(){var n=e?o.springSystem.createSpringWithBouncinessAndSpeed(t,i):o.springSystem.createSpring(t,i);return n.addListener({onSpringAtRest:function(){s||(s=!0,a&&a())}}),new SpringAnimation(n)},r(),n.activeAnimator=void 0},n.spring=function(t,i,e,r){n.shared.spring(t,i,!1,e,r)},n.bouncy=function(t,i,e,r){n.shared.spring(t,i,!0,e,r)},n.shared=new n,n.duringAnimationValueSet=!1,n.activeAnimator=void 0,n}();exports.UIAnimator=UIAnimator;
},{"./helpers/LinearAnimator":49,"./helpers/rebound.min":54}],10:[function(require,module,exports){
"use strict";var __extends=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),__awaiter=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))(function(o,s){function r(t){try{l(i.next(t))}catch(t){s(t)}}function a(t){try{l(i.throw(t))}catch(t){s(t)}}function l(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(r,a)}l((i=i.apply(t,e||[])).next())})},__generator=this&&this.__generator||function(t,e){var n,i,o,s,r={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=2&s[0]?i.return:s[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,s[1])).done)return o;switch(i=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return r.label++,{value:s[1],done:!1};case 5:r.label++,i=s[1],s=[0];continue;case 7:s=r.ops.pop(),r.trys.pop();continue;default:if(!(o=(o=r.trys).length>0&&o[o.length-1])&&(6===s[0]||2===s[0])){r=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){r.label=s[1];break}if(6===s[0]&&r.label<o[1]){r.label=o[1],o=s;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(s);break}o[2]&&r.ops.pop(),r.trys.pop();continue}s=e.call(t,r)}catch(t){s=[6,t],i=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}};Object.defineProperty(exports,"__esModule",{value:!0});var UIView_1=require("./UIView"),UIEdgeInsets_1=require("./UIEdgeInsets"),UILabel_1=require("./UILabel"),UIImageView_1=require("./UIImageView"),UIFont_1=require("./UIFont"),UITapGestureRecognizer_1=require("./UITapGestureRecognizer"),UILongPressGestureRecognizer_1=require("./UILongPressGestureRecognizer"),UIEnums_1=require("./UIEnums"),UIColor_1=require("./UIColor"),UISize_1=require("./UISize"),UIAnimator_1=require("./UIAnimator"),UIButton=function(t){function e(e){void 0===e&&(e=!1);var n=t.call(this)||this;return n.isCustom=e,n.titleLabel=new UILabel_1.UILabel,n.imageView=new UIImageView_1.UIImageView,n._enabled=!0,n._selected=!1,n._highlighted=!1,n._tracking=!1,n._touchInside=!1,n._contentVerticalAlignment=UIEnums_1.UIControlContentVerticalAlignment.center,n._contentHorizontalAlignment=UIEnums_1.UIControlContentHorizontalAlignment.center,n._contentEdgeInsets=UIEdgeInsets_1.UIEdgeInsetsZero,n._titleEdgeInsets=UIEdgeInsets_1.UIEdgeInsetsZero,n._imageEdgeInsets=UIEdgeInsets_1.UIEdgeInsetsZero,n.statedTitles={},n.statedTitleColors={},n.statedImages={},n.titleLabel.font=new UIFont_1.UIFont(17),n.addSubview(n.titleLabel),n.addSubview(n.imageView),n.setupTouches(),n}return __extends(e,t),Object.defineProperty(e.prototype,"enabled",{get:function(){return this._enabled},set:function(t){this._enabled=t,this.reloadContents()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selected",{get:function(){return this._selected},set:function(t){this._selected=t,this.reloadContents()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"highlighted",{get:function(){return this._highlighted},set:function(t){this._highlighted=t,this.reloadContents()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tracking",{get:function(){return this._tracking},set:function(t){this._tracking=t,this.reloadContents()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"touchInside",{get:function(){return this._touchInside},set:function(t){this._touchInside=t,this.reloadContents()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"contentVerticalAlignment",{get:function(){return this._contentVerticalAlignment},set:function(t){this._contentVerticalAlignment=t,this.reloadContents()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"contentHorizontalAlignment",{get:function(){return this._contentHorizontalAlignment},set:function(t){this._contentHorizontalAlignment=t,this.reloadContents()},enumerable:!0,configurable:!0}),e.prototype.setTitle=function(t,e){t?this.statedTitles[e]=t:delete this.statedTitles[e],this.reloadContents()},e.prototype.setTitleColor=function(t,e){t?this.statedTitleColors[e]=t:delete this.statedTitleColors[e],this.reloadContents()},e.prototype.setTitleFont=function(t){this.titleLabel.font=t,this.reloadContents()},e.prototype.setImage=function(t,e){t?this.statedImages[e]=t:delete this.statedImages[e],this.reloadContents()},e.prototype.setAttributedTitle=function(t,e){},Object.defineProperty(e.prototype,"contentEdgeInsets",{get:function(){return this._contentEdgeInsets},set:function(t){this._contentEdgeInsets=t,this.reloadContents()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"titleEdgeInsets",{get:function(){return this._titleEdgeInsets},set:function(t){this._titleEdgeInsets=t,this.reloadContents()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageEdgeInsets",{get:function(){return this._imageEdgeInsets},set:function(t){this._imageEdgeInsets=t,this.reloadContents()},enumerable:!0,configurable:!0}),e.prototype.setupTouches=function(){var t=this;this.addGestureRecognizer((new UITapGestureRecognizer_1.UITapGestureRecognizer).on("touch",function(){t.emit("touchUpInside",t)}));var e=new UILongPressGestureRecognizer_1.UILongPressGestureRecognizer;e.on("began",function(){t.tracking=!0,t.highlighted=!0,t.emit("touchDown",t)}),e.on("changed",function(e){var n=e.locationInView(void 0),i=t.highlightedPointInside(n);t.touchInside!=i&&(i?t.emit("touchDragEnter",t):t.emit("touchDragExit",t)),t.touchInside=i,t.highlighted=t.touchInside,i?t.emit("touchDragInside",t):t.emit("touchDragOutside",t)}),e.on("ended",function(e){t.highlighted=!1,t.tracking=!1;var n=e.locationInView(void 0);t.highlightedPointInside(n)?t.emit("touchUpInside",t):t.emit("touchUpOutside",t)}),e.on("cancelled",function(){t.highlighted=!1,t.tracking=!1,t.emit("touchCancel",t)}),e.minimumPressDuration=.05,this.addGestureRecognizer(e)},e.prototype.reloadContents=function(){var t=this;this.titleLabel.text=this.titleForState(this.currentState()),this.titleLabel.textColor=this.titleColorForState(this.currentState()),this.imageView.image=this.imageForState(this.currentState()),this.isCustom||UIAnimator_1.UIAnimator.linear(.1,function(){t.highlighted?(t.titleLabel.alpha=.3,t.imageView.alpha=.3):(t.titleLabel.alpha=1,t.imageView.alpha=1)},void 0),this.reloadLayouts()},e.prototype.reloadLayouts=function(){return __awaiter(this,void 0,void 0,function(){var t,e,n,i,o,s,r,a,l,h;return __generator(this,function(u){switch(u.label){case 0:return this.bounds.width<=0||this.bounds.height<=0?[2]:this.imageView.image?[4,this.imageView.image.fetchSize()]:[3,2];case 1:u.sent(),u.label=2;case 2:switch(t=this.imageView.intrinsicContentSize()||UISize_1.UISizeZero,e=0,n=0,i=t.width,o=t.height,s=this.titleLabel.intrinsicContentSize()||UISize_1.UISizeZero,r=0,a=0,l=s.width,h=s.height,this.contentHorizontalAlignment){case UIEnums_1.UIControlContentHorizontalAlignment.left:r=(e=0)+t.width+0;break;case UIEnums_1.UIControlContentHorizontalAlignment.center:e=(this.bounds.width-(t.width+s.width))/2,r=e+t.width+0;break;case UIEnums_1.UIControlContentHorizontalAlignment.right:e=this.bounds.width-(t.width+s.width),r=e+t.width+0;break;case UIEnums_1.UIControlContentHorizontalAlignment.fill:i=this.bounds.width,l=this.bounds.width}switch(this.contentVerticalAlignment){case UIEnums_1.UIControlContentVerticalAlignment.top:n=0,a=0;break;case UIEnums_1.UIControlContentVerticalAlignment.center:n=(this.bounds.height-t.height)/2,a=(this.bounds.height-s.height)/2;break;case UIEnums_1.UIControlContentVerticalAlignment.bottom:n=this.bounds.height-t.height,a=this.bounds.height-s.height;break;case UIEnums_1.UIControlContentVerticalAlignment.fill:o=this.bounds.height,h=this.bounds.height}return e+=this.contentEdgeInsets.left+this.imageEdgeInsets.left,e-=this.contentEdgeInsets.right+this.imageEdgeInsets.right,n+=this.contentEdgeInsets.top+this.imageEdgeInsets.top,n-=this.contentEdgeInsets.bottom+this.imageEdgeInsets.bottom,r+=this.contentEdgeInsets.left+this.titleEdgeInsets.left,r-=this.contentEdgeInsets.right+this.titleEdgeInsets.right,a+=this.contentEdgeInsets.top+this.titleEdgeInsets.top,a-=this.contentEdgeInsets.bottom+this.titleEdgeInsets.bottom,this.imageView.frame={x:e,y:n,width:i,height:o},this.titleLabel.frame={x:r,y:a,width:l,height:h},[2]}})})},e.prototype.currentState=function(){var t=UIEnums_1.UIControlState.normal;return this.enabled||(t|=UIEnums_1.UIControlState.disabled),this.selected&&(t|=UIEnums_1.UIControlState.selected),this.highlighted&&(t|=UIEnums_1.UIControlState.highlighted),t},e.prototype.imageForState=function(t){return void 0!==this.statedImages[t]?this.statedImages[t]:this.statedImages[0]},e.prototype.titleForState=function(t){return void 0!==this.statedTitles[t]?this.statedTitles[t]:this.statedTitles[0]},e.prototype.titleColorForState=function(t){return void 0!==this.statedTitleColors[t]?this.statedTitleColors[t]:void 0!==this.statedTitleColors[0]?this.statedTitleColors[0]:t==UIEnums_1.UIControlState.disabled?UIColor_1.UIColor.gray.colorWithAlphaComponent(.75):this.tintColor||UIColor_1.UIColor.black},e.prototype.highlightedPointInside=function(t){return t.x>=-22&&t.y>=-22&&t.x<=this.frame.width+22&&t.y<=this.frame.height+22},e.prototype.layoutSubviews=function(){t.prototype.layoutSubviews.call(this),this.reloadLayouts()},e}(UIView_1.UIView);exports.UIButton=UIButton;
},{"./UIAnimator":9,"./UIColor":13,"./UIEdgeInsets":15,"./UIEnums":16,"./UIFont":18,"./UIImageView":21,"./UILabel":23,"./UILongPressGestureRecognizer":24,"./UISize":38,"./UITapGestureRecognizer":42,"./UIView":46}],11:[function(require,module,exports){
"use strict";var __extends=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function o(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}();Object.defineProperty(exports,"__esModule",{value:!0});var ItemType,UIView_1=require("./UIView"),UIScrollView_1=require("./UIScrollView"),UIRect_1=require("./UIRect"),UIIndexPath_1=require("./UIIndexPath"),UISize_1=require("./UISize"),UIAffineTransform_1=require("./UIAffineTransform"),UIPoint_1=require("./UIPoint"),UIAnimator_1=require("./UIAnimator"),EventEmitter_1=require("../kimi/EventEmitter"),UITouch_1=require("./UITouch");!function(e){e[e.cell=0]="cell",e[e.supplementaryView=1]="supplementaryView",e[e.decorationView=2]="decorationView"}(ItemType=exports.ItemType||(exports.ItemType={})),exports.UICollectionElementKindCell="UICollectionElementKindCell";var UICollectionViewItemKey=function(){function e(e,t,i){void 0===e&&(e=ItemType.cell),this.type=e,this.indexPath=t,this.identifier=i}return e.collectionItemKeyForCellWithIndexPath=function(t){return new e(ItemType.cell,t,exports.UICollectionElementKindCell)},e.collectionItemKeyForLayoutAttributes=function(t){return new e(t.representedElementCategory,t.indexPath,t.representedElementKind)},e}();exports.UICollectionViewItemKey=UICollectionViewItemKey;var UICollectionViewLayoutAttributes=function(){function e(e,t,i){void 0===t&&(t=""),void 0===i&&(i=ItemType.cell),this.indexPath=e,this.elementKind=t,this.representedElementCategory=i,this.frame=UIRect_1.UIRectZero,this.center=UIPoint_1.UIPointZero,this.size=UISize_1.UISizeZero,this.transform=UIAffineTransform_1.UIAffineTransformIdentity,this.alpha=1,this.zIndex=0,this.hidden=!1,this.representedElementKind=this.elementKind}return e.prototype.isDecorationView=function(){return this.representedElementCategory===ItemType.decorationView},e.prototype.isSupplementaryView=function(){return this.representedElementCategory===ItemType.supplementaryView},e.prototype.isCell=function(){return this.representedElementCategory===ItemType.cell},e.layoutAttributesForCellWithIndexPath=function(t){return new e(t,exports.UICollectionElementKindCell,ItemType.cell)},e.layoutAttributesForSupplementaryViewOfKind=function(t,i){return new e(i,t,ItemType.supplementaryView)},e.layoutAttributesForDecorationViewOfKind=function(t,i){return new e(i,t,ItemType.decorationView)},e}();exports.UICollectionViewLayoutAttributes=UICollectionViewLayoutAttributes;var UICollectionViewLayout=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.layoutAttributesClass=UICollectionViewLayoutAttributes,t.collectionView=void 0,t}return __extends(t,e),t.prototype.prepareLayout=function(){},t.prototype.invalidateLayout=function(){this.collectionView&&this.collectionView._collectionViewData&&this.collectionView._collectionViewData.invalidate(),this.collectionView&&this.collectionView.setNeedsLayout(!0)},t.prototype.layoutAttributesForElementsInRect=function(e){return[]},t.prototype.layoutAttributesForItemAtIndexPath=function(e){},t.prototype.layoutAttributesForSupplementaryViewOfKind=function(e,t){},t.prototype.layoutAttributesForDecorationViewOfKind=function(e,t){},t.prototype.collectionViewContentSize=function(){return UISize_1.UISizeZero},t}(EventEmitter_1.EventEmitter);exports.UICollectionViewLayout=UICollectionViewLayout;var UICollectionView=function(e){function t(t){var i=e.call(this)||this;return i.collectionViewLayout=t,i.allowsSelection=!0,i.allowsMultipleSelection=!1,i._allVisibleViewsDict=new Map,i._indexPathsForSelectedItems=[],i._indexPathsForHighlightedItems=[],i._registeredCells={},i._collectionViewData=new UICollectionViewData(i,i.collectionViewLayout),i._cellReuseQueues={},i._supplementaryViewReuseQueues={},i._decorationViewReuseQueues={},i.firstTouchPoint=void 0,i.firstTouchCell=void 0,t.collectionView=i,i}return __extends(t,e),t.prototype.register=function(e,t){this._registeredCells[t]=e},t.prototype.dequeueReusableCell=function(e,t){if(this._cellReuseQueues[e]&&this._cellReuseQueues[e].length>0){var i=this._cellReuseQueues[e][0];if(i instanceof UICollectionViewCell)return this._cellReuseQueues[e].splice(0,1),i}var o=this._registeredCells[e];if(!o)return new UICollectionViewCell;var n=o(void 0);return n.reuseIdentifier=e,n.collectionView=this,n},t.prototype.allCells=function(){var e=[];return this._allVisibleViewsDict.forEach(function(t){t instanceof UICollectionViewCell&&e.push(t)}),e},t.prototype.visibleCells=function(){var e=this;return this.allCells().filter(function(t){return UIRect_1.UIRectIntersectsRect(e.visibleBoundRects,t.frame)})},t.prototype.reloadData=function(){var e=this;this.invalidateLayout(),this._allVisibleViewsDict.forEach(function(e){e.hidden=!0}),this._allVisibleViewsDict.clear(),this._indexPathsForSelectedItems.forEach(function(t){var i=e.cellForItemAtIndexPath(t);i&&(i.selected=!1,i.highlighted=!1)}),this._indexPathsForSelectedItems=[],this._indexPathsForHighlightedItems=[],this.setNeedsLayout(!0)},t.prototype.selectItem=function(e,t){var i=this;this.allowsMultipleSelection||(this._indexPathsForSelectedItems.forEach(function(e){i._allVisibleViewsDict.forEach(function(t){t instanceof UICollectionViewCell&&t.currentIndexPath&&t.currentIndexPath.mapKey()===e.mapKey()&&(t.selected=!1,i.emit("didDeselectItem",t.currentIndexPath,t))})}),this._indexPathsForSelectedItems=[]),this._indexPathsForSelectedItems.push(e),t?UIAnimator_1.UIAnimator.linear(.5,function(){i._allVisibleViewsDict.forEach(function(t){t instanceof UICollectionViewCell&&t.currentIndexPath&&t.currentIndexPath.mapKey()===e.mapKey()&&(t.selected=!0)})},void 0):this._allVisibleViewsDict.forEach(function(t){t instanceof UICollectionViewCell&&t.currentIndexPath&&t.currentIndexPath.mapKey()===e.mapKey()&&(t.selected=!0)})},t.prototype.deselectItem=function(e,t){var i=this,o=this._indexPathsForSelectedItems.map(function(e){return e.mapKey()}).indexOf(e.mapKey());o>=0&&this._indexPathsForSelectedItems.splice(o,1),t?UIAnimator_1.UIAnimator.linear(.5,function(){i._allVisibleViewsDict.forEach(function(t){t instanceof UICollectionViewCell&&t.currentIndexPath&&t.currentIndexPath.mapKey()===e.mapKey()&&(t.selected=!1)})},void 0):this._allVisibleViewsDict.forEach(function(t){t instanceof UICollectionViewCell&&t.currentIndexPath&&t.currentIndexPath.mapKey()===e.mapKey()&&(t.selected=!1)})},t.prototype.numberOfSections=function(){return this._collectionViewData.numberOfSections()},t.prototype.numberOfItemsInSection=function(e){return this._collectionViewData.numberOfItemsInSection(e)},t.prototype.layoutAttributesForItemAtIndexPath=function(e){return this.collectionViewLayout.layoutAttributesForItemAtIndexPath(e)},t.prototype.layoutAttributesForSupplementaryElementOfKind=function(e,t){return this.collectionViewLayout.layoutAttributesForSupplementaryViewOfKind(e,t)},t.prototype.indexPathForItemAtPoint=function(e){var t=this.collectionViewLayout.layoutAttributesForElementsInRect({x:e.x,y:e.y,width:1,height:1});return t[t.length-1].indexPath},t.prototype.indexPathForCell=function(e){for(var t=this._allVisibleViewsDict.keys();;){var i=t.next();if(i.done)break;if(this._allVisibleViewsDict.get(i.value)===e)return i.value.indexPath}},t.prototype.cellForItemAtIndexPath=function(e){for(var t=this._allVisibleViewsDict.keys();;){var i=t.next();if(i.done)break;if(i.value.indexPath.mapKey()===e.mapKey()){var o=this._allVisibleViewsDict.get(i.value);if(o instanceof UICollectionViewCell)return o}}},t.prototype.indexPathsForVisibleItems=function(){return this.visibleCells().filter(function(e){return void 0!==e.layoutAttributes}).map(function(e){return e.layoutAttributes.indexPath})},t.prototype.indexPathsForSelectedItems=function(){return this._indexPathsForSelectedItems},Object.defineProperty(t.prototype,"visibleBoundRects",{get:function(){return{x:this.contentOffset.x,y:this.contentOffset.y,width:this.bounds.width,height:this.bounds.height}},enumerable:!0,configurable:!0}),t.prototype.contentOffsetDidChanged=function(){e.prototype.contentOffsetDidChanged.call(this),this.layoutCollectionViews()},t.prototype.layoutSubviews=function(){e.prototype.layoutSubviews.call(this),this.layoutCollectionViews()},t.prototype.layoutCollectionViews=function(){this._collectionViewData.validateLayoutInRect(this.visibleBoundRects);var e=this._collectionViewData.collectionViewContentRect();this.contentSize=e,this._collectionViewData.validateLayoutInRect(this.visibleBoundRects),this.updateVisibleCellsNow(!0)},t.prototype.invalidateLayout=function(){this.collectionViewLayout.invalidateLayout(),this._collectionViewData.invalidate()},t.prototype.updateVisibleCellsNow=function(e){var t=this;void 0===e&&(e=!1);var i=this._collectionViewData.layoutAttributesForElementsInRect(this.visibleBoundRects);if(0!==i.length){var o=new Map;i.forEach(function(e){var i=UICollectionViewItemKey.collectionItemKeyForLayoutAttributes(e);o.set(i,e);var n=t._allVisibleViewsDict.get(i);if(n instanceof UICollectionReusableView)n instanceof UICollectionViewCell&&(n.currentIndexPath=i.indexPath,n.highlighted=t._indexPathsForHighlightedItems.map(function(e){return e.mapKey()}).indexOf(i.indexPath.mapKey())>=0,n.selected=t._indexPathsForSelectedItems.map(function(e){return e.mapKey()}).indexOf(i.indexPath.mapKey())>=0),n.applyLayoutAttributes(e);else{switch(i.type){case ItemType.cell:(n=t.createPreparedCellForItemAtIndexPath(i.indexPath,e))instanceof UICollectionViewCell&&(n.currentIndexPath=i.indexPath,n.highlighted=t._indexPathsForHighlightedItems.map(function(e){return e.mapKey()}).indexOf(i.indexPath.mapKey())>=0,n.selected=t._indexPathsForSelectedItems.map(function(e){return e.mapKey()}).indexOf(i.indexPath.mapKey())>=0);break;case ItemType.supplementaryView:n=t.createPreparedSupplementaryViewForElementOfKind(e.representedElementKind,e.indexPath,e);break;case ItemType.decorationView:n=void 0}n instanceof UICollectionReusableView&&(t._allVisibleViewsDict.set(i,n),t.addControlledSubview(n),n.applyLayoutAttributes(e))}});var n=function(){for(var e=[],i=t._allVisibleViewsDict.keys();;){var o=i.next();if(o.done)break;e.push(o.value)}return e}();o.forEach(function(e,t){var i=n.indexOf(t);i>=0&&n.splice(i,1)}),n.forEach(function(e){var i=t._allVisibleViewsDict.get(e);if(i)switch(i.hidden=!0,t._allVisibleViewsDict.delete(e),e.type){case ItemType.cell:t.reuseCell(i);break;case ItemType.supplementaryView:t.reuseSupplementaryView(i);break;case ItemType.decorationView:t.reuseDecorationView(i)}})}},t.prototype.createPreparedCellForItemAtIndexPath=function(e,t){return this.__cellForItemAtIndexPath(this,e)},t.prototype.createPreparedSupplementaryViewForElementOfKind=function(e,t,i){var o=this.__viewForSupplementaryElementOfKind(this,e,t);return o&&o.applyLayoutAttributes(i),o},t.prototype.addControlledSubview=function(e){void 0===e.superview&&this.addSubview(e),e.hidden=!1},t.prototype.queueReusableView=function(e,t,i){e.hidden=!0,e.prepareForReuse(),void 0===t[i]&&(t[i]=[]),(t[i]||[]).push(e)},t.prototype.reuseCell=function(e){var t=e.reuseIdentifier;void 0!==t&&this.queueReusableView(e,this._cellReuseQueues,t)},t.prototype.reuseSupplementaryView=function(e){var t=e.layoutAttributes,i=e.reuseIdentifier;if(void 0!==t&&void 0!==i){this.queueReusableView(e,this._supplementaryViewReuseQueues,"${layoutAttributes.elementKind}/$reuseIdentifier")}},t.prototype.reuseDecorationView=function(e){var t=e.reuseIdentifier;void 0!==t&&this.queueReusableView(e,this._decorationViewReuseQueues,t)},t.prototype.touchesBegan=function(t){e.prototype.touchesBegan.call(this,t);var i=t[0];i&&this.handleTouch(UITouch_1.UITouchPhase.began,i)},t.prototype.touchesMoved=function(t){e.prototype.touchesMoved.call(this,t);var i=t[0];i&&this.handleTouch(UITouch_1.UITouchPhase.moved,i)},t.prototype.touchesEnded=function(t){e.prototype.touchesEnded.call(this,t);var i=t[0];i&&this.handleTouch(UITouch_1.UITouchPhase.ended,i)},t.prototype.touchesCancelled=function(t){e.prototype.touchesCancelled.call(this,t);var i=t[0];i&&this.handleTouch(UITouch_1.UITouchPhase.cancelled,i)},t.prototype.handleTouch=function(e,t){var i=this;if(this.allowsSelection)switch(e){case UITouch_1.UITouchPhase.began:if(!this.tracking){for(var o=t.view,n=!0;void 0!==o&&!(o instanceof UICollectionViewCell);)o.gestureRecognizers.length>0&&(n=!1),o=o.superview;n&&(this.firstTouchPoint=t.windowPoint,o instanceof UICollectionViewCell&&(this.firstTouchCell=o,setTimeout(function(){void 0!==i.firstTouchPoint&&o instanceof UICollectionViewCell&&(o.currentIndexPath&&i._indexPathsForHighlightedItems.push(o.currentIndexPath),o.highlighted=!0)},150)))}break;case UITouch_1.UITouchPhase.moved:this.firstTouchPoint&&t.windowPoint&&(void 0!==UIView_1.UIView.recognizedGesture||Math.abs(t.windowPoint.y-this.firstTouchPoint.y)>8)&&(this._indexPathsForHighlightedItems=[],this._allVisibleViewsDict.forEach(function(e){e instanceof UICollectionViewCell&&(e.highlighted=!1)}),this.firstTouchPoint=void 0,this.firstTouchCell=void 0);break;case UITouch_1.UITouchPhase.ended:if(this.firstTouchCell){var r=this.firstTouchCell;if(this._indexPathsForHighlightedItems=[],this.allowsMultipleSelection||(this._indexPathsForSelectedItems.forEach(function(e){i._allVisibleViewsDict.forEach(function(t,o){o.indexPath&&o.indexPath.mapKey()===e.mapKey()&&t instanceof UICollectionViewCell&&(t.selected=!1,i.emit("didDeselectItem",t.currentIndexPath,t))})}),this._indexPathsForSelectedItems=[]),this.firstTouchPoint=void 0,this.firstTouchCell=void 0,this._indexPathsForHighlightedItems=[],this._allVisibleViewsDict.forEach(function(e){e instanceof UICollectionViewCell&&(e.highlighted=!1)}),r.currentIndexPath){var l=this._indexPathsForSelectedItems.map(function(e){return e.mapKey()}).indexOf(r.currentIndexPath.mapKey());l>=0?this._indexPathsForSelectedItems.splice(l,1):this._indexPathsForSelectedItems.push(r.currentIndexPath)}r.selected=!r.selected,r.selected?this.emit("didSelectItem",r.currentIndexPath,r):this.emit("didDeselectItem",r.currentIndexPath,r)}else this.firstTouchPoint=void 0,this.firstTouchCell=void 0,this._indexPathsForHighlightedItems=[],this._allVisibleViewsDict.forEach(function(e){e instanceof UICollectionViewCell&&(e.highlighted=!1)});break;case UITouch_1.UITouchPhase.cancelled:this.firstTouchPoint=void 0,this.firstTouchCell=void 0,this._indexPathsForHighlightedItems=[],this._allVisibleViewsDict.forEach(function(e){e instanceof UICollectionViewCell&&(e.highlighted=!1)})}},t.prototype.__cellForItemAtIndexPath=function(e,t){return e.val("cellForItem",t)||new UICollectionViewCell},t.prototype.__viewForSupplementaryElementOfKind=function(e,t,i){},t.prototype.__numberOfSections=function(e){var t=e.val("numberOfSections");return"number"==typeof t?t:1},t.prototype.__numberOfItemsInSection=function(e,t){var i=e.val("numberOfItems",t);return"number"==typeof i?i:0},t}(UIScrollView_1.UIScrollView);exports.UICollectionView=UICollectionView;var UICollectionReusableView=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.collectionView=void 0,t.layoutAttributes=void 0,t.reuseIdentifier=void 0,t}return __extends(t,e),t.prototype.prepareForReuse=function(){this.layoutAttributes=void 0},t.prototype.applyLayoutAttributes=function(e){e!==this.layoutAttributes&&(this.layoutAttributes=e,this.frame=e.frame,this.transform=e.transform)},t}(UIView_1.UIView);exports.UICollectionReusableView=UICollectionReusableView;var UICollectionViewCell=function(e){function t(){var t=e.call(this)||this;return t._selected=!1,t._highlighted=!1,t.contentView=new UIView_1.UIView,t.currentIndexPath=void 0,t.addSubview(t.contentView),t}return __extends(t,e),Object.defineProperty(t.prototype,"selected",{get:function(){return this._selected},set:function(e){this._selected=e,this.emit("selected",this,e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"highlighted",{get:function(){return this._highlighted},set:function(e){this._highlighted=e,this.emit("highlighted",this,e)},enumerable:!0,configurable:!0}),t.prototype.prepareForReuse=function(){e.prototype.prepareForReuse.call(this),this.selected=!1,this.highlighted=!1},t.prototype.layoutSubviews=function(){e.prototype.layoutSubviews.call(this),this.contentView.frame=this.bounds},t}(UICollectionReusableView);exports.UICollectionViewCell=UICollectionViewCell;var UICollectionViewData=function(){function e(e,t){this.collectionView=e,this.layout=t,this.layoutIsPrepared=!1,this.itemCountsAreValid=!1,this._numSections=0,this._numItems=0,this._sectionItemCounts=[],this.validLayoutRect=void 0,this.contentSize=UISize_1.UISizeZero,this.cachedLayoutAttributes=[]}return e.prototype.validateLayoutInRect=function(e){this.validateItemCounts(),this.prepareToLoadData(),void 0!==this.validLayoutRect&&UIRect_1.UIRectEqualToRect(this.validLayoutRect,e)||(this.validLayoutRect=e,this.cachedLayoutAttributes=this.layout.layoutAttributesForElementsInRect(e).filter(function(e){return e.isCell()||e.isDecorationView()||e.isSupplementaryView()}))},e.prototype.rectForItemAtIndexPath=function(e){return UIRect_1.UIRectZero},e.prototype.globalIndexForItemAtIndexPath=function(e){return this.numberOfItemsBeforeSection(e.section)+e.row},e.prototype.indexPathForItemAtGlobalIndex=function(e){this.validateItemCounts();for(var t=0,i=0;i<this._numSections;i++){var o=i,n=t+this._sectionItemCounts[o];if(n>e)break;t=n}var r=e-t;return new UIIndexPath_1.UIIndexPath(r,0)},e.prototype.layoutAttributesForElementsInRect=function(e){return this.validateLayoutInRect(e),this.cachedLayoutAttributes},e.prototype.invalidate=function(){this.itemCountsAreValid=!1,this.layoutIsPrepared=!1,this.validLayoutRect=void 0},e.prototype.numberOfItemsBeforeSection=function(e){this.validateItemCounts();for(var t=0,i=0;i<e;i++)t+=this._sectionItemCounts[i];return t},e.prototype.numberOfItemsInSection=function(e){return this.validateItemCounts(),e>=this._numSections||e<0?0:this._sectionItemCounts[e]},e.prototype.numberOfItems=function(){return this.validateItemCounts(),this._numItems},e.prototype.numberOfSections=function(){return this.validateItemCounts(),this._numSections},e.prototype.collectionViewContentRect=function(){return{x:0,y:0,width:this.contentSize.width,height:this.contentSize.height}},e.prototype.updateItemCounts=function(){var e=this.collectionView;if(this._numSections=e.__numberOfSections(e),this._numSections<=0)return this._numItems=0,this._sectionItemCounts=[],void(this.itemCountsAreValid=!0);this._numItems=0;for(var t=[],i=0;i<this._numSections;i++){var o=e.__numberOfItemsInSection(e,i);t.push(o),this._numItems+=o}this._sectionItemCounts=t,this.itemCountsAreValid=!0},e.prototype.validateItemCounts=function(){this.itemCountsAreValid||this.updateItemCounts()},e.prototype.prepareToLoadData=function(){this.layoutIsPrepared||(this.layout.prepareLayout(),this.contentSize=this.layout.collectionViewContentSize(),this.layoutIsPrepared=!0)},e}();exports.UICollectionViewData=UICollectionViewData;
},{"../kimi/EventEmitter":3,"./UIAffineTransform":7,"./UIAnimator":9,"./UIIndexPath":22,"./UIPoint":30,"./UIRect":33,"./UIScrollView":37,"./UISize":38,"./UITouch":45,"./UIView":46}],12:[function(require,module,exports){
"use strict";var __extends=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),__assign=this&&this.__assign||function(){return(__assign=Object.assign||function(t){for(var e,i=1,o=arguments.length;i<o;i++)for(var n in e=arguments[i])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}).apply(this,arguments)};Object.defineProperty(exports,"__esModule",{value:!0});var UICollectionViewScrollDirection,UISize_1=require("./UISize"),UIRect_1=require("./UIRect"),UIEdgeInsets_1=require("./UIEdgeInsets"),UICollectionView_1=require("./UICollectionView"),UIIndexPath_1=require("./UIIndexPath");!function(t){t[t.vertical=0]="vertical",t[t.horizontal=1]="horizontal"}(UICollectionViewScrollDirection=exports.UICollectionViewScrollDirection||(exports.UICollectionViewScrollDirection={}));var UIFlowLayoutHorizontalAlignment,UIFlowLayoutCommonRowHorizontalAlignmentKey="UIFlowLayoutCommonRowHorizontalAlignmentKey",UIFlowLayoutLastRowHorizontalAlignmentKey="UIFlowLayoutLastRowHorizontalAlignmentKey",UIFlowLayoutRowVerticalAlignmentKey="UIFlowLayoutRowVerticalAlignmentKey",UICollectionElementKindSectionHeader="UICollectionElementKindSectionHeader",UICollectionElementKindSectionFooter="UICollectionElementKindSectionFooter";!function(t){t[t.left=0]="left",t[t.center=1]="center",t[t.right=2]="right",t[t.justify=3]="justify"}(UIFlowLayoutHorizontalAlignment=exports.UIFlowLayoutHorizontalAlignment||(exports.UIFlowLayoutHorizontalAlignment={}));var UIGridLayoutInfo=function(){function t(){this.sections=[],this.rowAlignmentOptions={},this.usesFloatingHeaderFooter=!1,this.dimension=0,this.horizontal=!1,this.leftToRight=!1,this.contentSize=UISize_1.UISizeZero,this._isValid=!1}return t.prototype.frameForItemAtIndexPath=function(t){var e=this.sections[t.section];return e.fixedItemSize?{x:0,y:0,width:e.itemSize.width,height:e.itemSize.height}:e.items[t.row].itemFrame},t.prototype.addSection=function(){var t=new UIGridLayoutSection;return t.rowAlignmentOptions=this.rowAlignmentOptions,t.layoutInfo=this,this.sections.push(t),this.invalidate(!1),t},t.prototype.invalidate=function(t){this._isValid=!1},t.prototype.snapshot=function(){var e=new t;return e.sections=this.sections.slice(0),e.rowAlignmentOptions=this.rowAlignmentOptions,e.usesFloatingHeaderFooter=this.usesFloatingHeaderFooter,e.dimension=this.dimension,e.horizontal=this.horizontal,e.leftToRight=this.leftToRight,e.contentSize=__assign({},this.contentSize),e},t}(),UIGridLayoutSection=function(){function t(){this.items=[],this.rows=[],this.fixedItemSize=!1,this.itemSize=UISize_1.UISizeZero,this._itemsCount=0,this.verticalInterstice=0,this.horizontalInterstice=0,this.sectionMargins=UIEdgeInsets_1.UIEdgeInsetsZero,this.frame=UIRect_1.UIRectZero,this.headerFrame=UIRect_1.UIRectZero,this.footerFrame=UIRect_1.UIRectZero,this.headerDimension=0,this.footerDimension=0,this.layoutInfo=void 0,this.rowAlignmentOptions={},this.otherMargin=0,this.beginMargin=0,this.endMargin=0,this.actualGap=0,this.lastRowBeginMargin=0,this.lastRowEndMargin=0,this.lastRowActualGap=0,this.lastRowIncomplete=!1,this.itemsByRowCount=0,this.indexOfImcompleteRow=0,this._isValid=!1}return Object.defineProperty(t.prototype,"itemsCount",{get:function(){return this.fixedItemSize?this._itemsCount:this.items.length},set:function(t){this._itemsCount=t},enumerable:!0,configurable:!0}),t.prototype.recomputeFromIndex=function(t){this.invalidate(),this.computeLayout()},t.prototype.invalidate=function(){this._isValid=!1,this.rows=[]},t.prototype.computeLayout=function(){if(!this._isValid){var t=this.layoutInfo;if(void 0===t)return;var e={width:0,height:0},i=0,o=0,n=0,r=0,s=void 0,h=t.dimension,a=h;t.horizontal?(a-=this.sectionMargins.top+this.sectionMargins.bottom,this.headerFrame={x:e.width,y:0,width:this.headerDimension,height:h},e.width+=this.headerDimension+this.sectionMargins.right):(a-=this.sectionMargins.left+this.sectionMargins.right,this.headerFrame={x:0,y:e.height,width:h,height:this.headerDimension},e.height+=this.headerDimension+this.sectionMargins.top);for(var l=t.horizontal?this.verticalInterstice:this.horizontalInterstice;o<=this.itemsCount;){var m=o>=this.itemsCount,c=void 0;m||(c=this.fixedItemSize?void 0:this.items[o]);var d=this.fixedItemSize?this.itemSize:c&&c.itemFrame?{width:c.itemFrame.width,height:c.itemFrame.height}:{width:0,height:0},u=t.horizontal?d.height:d.width;n>0&&(u+=l),r<u||m?(s&&(this.itemsByRowCount=Math.max(n,this.itemsByRowCount),s.itemCount=n,m||(this.indexOfImcompleteRow=i),s.layoutRow(),t.horizontal?(s.rowFrame={x:e.width,y:this.sectionMargins.top,width:s.rowSize.width,height:s.rowSize.height},e.height=Math.max(s.rowSize.height,e.height),e.width+=s.rowSize.width+(m?0:this.horizontalInterstice)):(s.rowFrame={x:this.sectionMargins.left,y:e.height,width:s.rowSize.width,height:s.rowSize.height},e.height+=s.rowSize.height+(m?0:this.verticalInterstice),e.width=Math.max(s.rowSize.width,e.width))),m||(s&&(s.complete=!0),(s=this.addRow()).fixedItemSize=this.fixedItemSize,s.index=i,this.indexOfImcompleteRow=i,i++,n>0&&(u-=l),r=a-u,n=0)):r-=u,c&&s&&s.addItem(c),o++,n++}t.horizontal?(e.width+=this.sectionMargins.right,this.footerFrame={x:e.width,y:0,width:this.footerDimension,height:h},e.width+=this.footerDimension):(e.height+=this.sectionMargins.bottom,this.footerFrame={x:0,y:e.height,width:h,height:this.footerDimension},e.height+=this.footerDimension),this.frame={x:0,y:0,width:e.width,height:e.height},this._isValid=!0}},t.prototype.addItem=function(){var t=new UIGridLayoutItem;return t.section=this,this.items.push(t),t},t.prototype.addRow=function(){var t=new UIGridLayoutRow;return t.section=this,this.rows.push(t),t},t.prototype.snapshot=function(){var e=new t;return e.items=this.items.slice(0),e.rows=this.rows.slice(0),e.verticalInterstice=this.verticalInterstice,e.horizontalInterstice=this.horizontalInterstice,e.sectionMargins=this.sectionMargins,e.frame=this.frame,e.headerFrame=this.headerFrame,e.footerFrame=this.footerFrame,e.headerDimension=this.headerDimension,e.footerDimension=this.footerDimension,e.layoutInfo=this.layoutInfo,e.rowAlignmentOptions=this.rowAlignmentOptions,e.fixedItemSize=this.fixedItemSize,e.itemSize=this.itemSize,e.itemsCount=this.itemsCount,e.otherMargin=this.otherMargin,e.beginMargin=this.beginMargin,e.endMargin=this.endMargin,e.actualGap=this.actualGap,e.lastRowBeginMargin=this.lastRowBeginMargin,e.lastRowEndMargin=this.lastRowEndMargin,e.lastRowActualGap=this.lastRowActualGap,e.lastRowIncomplete=this.lastRowIncomplete,e.itemsByRowCount=this.itemsByRowCount,e.indexOfImcompleteRow=this.indexOfImcompleteRow,e},t}(),UIGridLayoutItem=function(){return function(){this.section=void 0,this.rowObject=void 0,this.itemFrame={x:0,y:0,width:0,height:0}}}(),UIGridLayoutRow=function(){function t(){this.section=void 0,this.items=[],this.rowSize=UISize_1.UISizeZero,this.rowFrame={x:0,y:0,width:0,height:0},this.index=0,this.complete=!1,this.fixedItemSize=!1,this._itemCount=0,this._isValid=!1}return Object.defineProperty(t.prototype,"itemCount",{get:function(){return this.fixedItemSize?this._itemCount:this.items.length},set:function(t){this._itemCount=t},enumerable:!0,configurable:!0}),t.prototype.addItem=function(t){this.items.push(t),t.rowObject=this,this.invalidate()},t.prototype.layoutRow=function(){this.layoutRowAndGenerateRectArray(!1)},t.prototype.itemRects=function(){return this.layoutRowAndGenerateRectArray(!0)||[]},t.prototype.invalidate=function(){this._isValid=!1,this.rowSize=UISize_1.UISizeZero,this.rowFrame={x:0,y:0,width:0,height:0}},t.prototype.snapshot=function(){var e=new t;return e.section=this.section,e.items=this.items,e.rowSize=__assign({},this.rowSize),e.rowFrame=__assign({},this.rowFrame),e.index=this.index,e.complete=this.complete,e.fixedItemSize=this.fixedItemSize,e.itemCount=this.itemCount,e},t.prototype.layoutRowAndGenerateRectArray=function(t){var e=t?[]:void 0;if(!this._isValid||t){var i=this.section;if(void 0===i)return;var o=!(!i.layoutInfo||!i.layoutInfo.horizontal),n=i.indexOfImcompleteRow==this.index,r=i.rowAlignmentOptions[n?UIFlowLayoutLastRowHorizontalAlignmentKey:UIFlowLayoutCommonRowHorizontalAlignmentKey];if(void 0===r)return;var s=i.layoutInfo&&i.layoutInfo.dimension||0;s-=o?i.sectionMargins.top+i.sectionMargins.bottom:i.sectionMargins.left+i.sectionMargins.right;for(var h=0,a=0,l=o?i.verticalInterstice:i.horizontalInterstice;a<this.itemCount||n;){var m;if(this.fixedItemSize)m=o?i.itemSize.height:i.itemSize.width;else{var c=this.items[Math.min(a,this.itemCount-1)];m=o?c.itemFrame.height:c.itemFrame.width}if(a>0&&(m+=l),s<m)break;s-=m,h=++a}var d={x:0,y:0};r==UIFlowLayoutHorizontalAlignment.right?d.x+=s:(r==UIFlowLayoutHorizontalAlignment.center||r==UIFlowLayoutHorizontalAlignment.justify&&1==h)&&(d.x+=s/2);for(var u=h<=1?0:s/(h-1),w={x:0,y:0,width:0,height:0},I={x:0,y:0,width:i.itemSize.width,height:i.itemSize.height},f=0;f<this.itemCount;f++){var y=void 0;this.fixedItemSize||(y=this.items[f],I=__assign({},y.itemFrame)),o?(I.y=d.y,d.y+=I.height+i.verticalInterstice,r==UIFlowLayoutHorizontalAlignment.justify&&(d.y+=u)):(I.x=d.x,d.x+=I.width+i.horizontalInterstice,r==UIFlowLayoutHorizontalAlignment.justify&&(d.x+=u));var g={x:I.x,y:I.y,width:I.width,height:I.height};y&&(y.itemFrame=g),e&&e.push(g),w=UIRect_1.UIRectUnion(w,g)}this.rowSize={width:w.width,height:w.height},this._isValid=!0}return e},t}(),UICollectionViewFlowLayout=function(t){function e(){var e,i=null!==t&&t.apply(this,arguments)||this;return i._data=void 0,i.minimumLineSpacing=10,i.minimumInteritemSpacing=10,i.itemSize={width:50,height:50},i.headerReferenceSize=UISize_1.UISizeZero,i.footerReferenceSize=UISize_1.UISizeZero,i._sectionInset=UIEdgeInsets_1.UIEdgeInsetsZero,i.scrollDirection=UICollectionViewScrollDirection.vertical,i.rowAlignmentOptions=((e={})[UIFlowLayoutCommonRowHorizontalAlignmentKey]=UIFlowLayoutHorizontalAlignment.justify,e[UIFlowLayoutLastRowHorizontalAlignmentKey]=UIFlowLayoutHorizontalAlignment.justify,e[UIFlowLayoutRowVerticalAlignmentKey]=1,e),i._visibleBounds=UIRect_1.UIRectZero,i.rectCache=[],i}return __extends(e,t),Object.defineProperty(e.prototype,"sectionInset",{get:function(){return this._sectionInset},set:function(t){this._sectionInset=t,this.invalidateLayout()},enumerable:!0,configurable:!0}),e.prototype.prepareLayout=function(){t.prototype.prepareLayout.call(this);var e=new UIGridLayoutInfo;e.horizontal=this.scrollDirection==UICollectionViewScrollDirection.horizontal,this._visibleBounds=this.collectionView?this.collectionView.visibleBoundRects:UIRect_1.UIRectZero,e.dimension=e.horizontal?this._visibleBounds.height:this._visibleBounds.width,e.rowAlignmentOptions=this.rowAlignmentOptions,this._data=e,this.fetchItemsInfo()},e.prototype.layoutAttributesForElementsInRect=function(t){var e=this;null==this._data&&this.prepareLayout();var i=[],o=this._data;return void 0===o?[]:(o.sections.forEach(function(o,n){var r=e.rectCache,s={x:o.headerFrame.x+o.frame.x,y:o.headerFrame.y+o.frame.y,width:o.headerFrame.width,height:o.headerFrame.height};!UIRect_1.UIRectIsEmpty(s)&&UIRect_1.UIRectIntersectsRect(s,t)&&((a=new e.layoutAttributesClass(new UIIndexPath_1.UIIndexPath(0,n),UICollectionElementKindSectionHeader,UICollectionView_1.ItemType.supplementaryView)).frame=s,i.push(a));var h=r[n];void 0===h&&o.fixedItemSize&&o.rows.length>0&&null!=(h=o.rows[0].itemRects())&&(r[n]=h),o.rows.forEach(function(r){var s={x:r.rowFrame.x+o.frame.x,y:r.rowFrame.y+o.frame.y,width:r.rowFrame.width,height:r.rowFrame.height};if(UIRect_1.UIRectIntersectsRect(s,t))for(var a=0;a<r.itemCount;a++){var l=void 0,m=void 0,c=void 0;if(r.fixedItemSize)c=h[a]||UIRect_1.UIRectZero,m=r.index*o.itemsByRowCount+a;else{var d=r.items[a];m=o.items.indexOf(d),c=d.itemFrame}var u={x:s.x+c.x,y:s.y+c.y,width:c.width,height:c.height};UIRect_1.UIRectIntersectsRect(u,t)&&((l=new e.layoutAttributesClass(new UIIndexPath_1.UIIndexPath(m,n),UICollectionView_1.UICollectionElementKindCell,UICollectionView_1.ItemType.cell)).frame=u,i.push(l))}});var a,l={x:o.footerFrame.x+o.frame.x,y:o.footerFrame.y+o.frame.y,width:o.footerFrame.width,height:o.footerFrame.height};!UIRect_1.UIRectIsEmpty(l)&&UIRect_1.UIRectIntersectsRect(l,t)&&((a=new e.layoutAttributesClass(new UIIndexPath_1.UIIndexPath(0,n),UICollectionElementKindSectionFooter,UICollectionView_1.ItemType.supplementaryView)).frame=l,i.push(a))}),i)},e.prototype.layoutAttributesForItemAtIndexPath=function(t){void 0===this._data&&this.prepareLayout();var e=this._data;if(void 0!==e){var i=e.sections[t.section],o=void 0,n={x:0,y:0,width:0,height:0};if(i.fixedItemSize&&i.itemsByRowCount>0&&t.row/i.itemsByRowCount<i.rows.length){o=i.rows[t.row/i.itemsByRowCount];var r=t.row%i.itemsByRowCount;n=o.itemRects()[r]}else if(t.row<i.items.length){var s=i.items[t.row];o=s.rowObject,n=s.itemFrame}var h=new this.layoutAttributesClass(t,UICollectionView_1.UICollectionElementKindCell,UICollectionView_1.ItemType.cell);if(o){var a={x:o.rowFrame.x+i.frame.x,y:o.rowFrame.y+i.frame.y,width:o.rowFrame.width,height:o.rowFrame.height};h.frame={x:a.x+n.x,y:a.y+n.y,width:n.width,height:n.height}}return h}},e.prototype.layoutAttributesForSupplementaryViewOfKind=function(t,e){void 0===this._data&&this.prepareLayout();var i=this._data;if(void 0!==i){var o=e.section,n=void 0;if(o<i.sections.length){var r=i.sections[o],s={x:0,y:0,width:0,height:0};t==UICollectionElementKindSectionHeader?s=r.headerFrame:t==UICollectionElementKindSectionFooter&&(s=r.footerFrame),UIRect_1.UIRectIsEmpty(s)||(s={x:s.x+r.frame.x,y:s.y+r.frame.y,width:s.width,height:s.height},(n=new this.layoutAttributesClass(new UIIndexPath_1.UIIndexPath(0,o),t,UICollectionView_1.ItemType.supplementaryView)).frame=s)}return n}},e.prototype.layoutAttributesForDecorationViewOfKind=function(t,e){},e.prototype.collectionViewContentSize=function(){void 0===this._data&&this.prepareLayout();var e=this._data;return void 0===e?t.prototype.collectionViewContentSize.call(this):e.contentSize},e.prototype.invalidateLayout=function(){t.prototype.invalidateLayout.call(this),this.rectCache=[],this._data=void 0},e.prototype.__sizeForItem=function(t){return this.val("sizeForItem",t)||this.itemSize},e.prototype.__insetForSection=function(t){return this.val("insetForSection",t)||this.sectionInset},e.prototype.__minimumLineSpacing=function(t){var e=this.val("minimumLineSpacing",t);return"number"==typeof e?e:this.minimumLineSpacing},e.prototype.__minimumInteritemSpacing=function(t){var e=this.val("minimumInteritemSpacing",t);return"number"==typeof e?e:this.minimumInteritemSpacing},e.prototype.__referenceSizeForHeader=function(t){return this.headerReferenceSize},e.prototype.__referenceSizeForFooter=function(t){return this.footerReferenceSize},e.prototype.fetchItemsInfo=function(){this.getSizingInfos(),this.updateItemsLayout()},e.prototype.getSizingInfos=function(){var t=this._data;if(void 0!==t){var e=this.collectionView;if(void 0!==e)for(var i=e.numberOfSections(),o=0;o<i;o++){var n=t.addSection();n.verticalInterstice=t.horizontal?this.__minimumInteritemSpacing(o):this.__minimumLineSpacing(o),n.horizontalInterstice=t.horizontal?this.__minimumLineSpacing(o):this.__minimumInteritemSpacing(o),n.sectionMargins=this.__insetForSection(o),n.headerDimension=t.horizontal?this.__referenceSizeForHeader(o).width:this.__referenceSizeForHeader(o).height,n.footerDimension=t.horizontal?this.__referenceSizeForFooter(o).width:this.__referenceSizeForFooter(o).height;for(var r=e.numberOfItemsInSection(o),s=0;s<r;s++){var h=new UIIndexPath_1.UIIndexPath(s,o),a=this.__sizeForItem(h);n.addItem().itemFrame={x:0,y:0,width:a.width,height:a.height}}}}},e.prototype.updateItemsLayout=function(){var t=this._data;if(void 0!==t){var e={width:0,height:0};t.sections.forEach(function(i){i.computeLayout();var o=__assign({},i.frame);t.horizontal?(o.x+=e.width,e.width+=i.frame.width+i.frame.x,e.height=Math.max(e.height,o.height+i.frame.y+i.sectionMargins.top+i.sectionMargins.bottom)):(o.y+=e.height,e.height+=o.height+i.frame.y,e.width=Math.max(e.width,o.width+i.frame.x+i.sectionMargins.left+i.sectionMargins.right)),i.frame={x:o.x,y:o.y,width:o.width,height:o.height}}),t.contentSize={width:e.width,height:e.height}}},e}(UICollectionView_1.UICollectionViewLayout);exports.UICollectionViewFlowLayout=UICollectionViewFlowLayout;
},{"./UICollectionView":11,"./UIEdgeInsets":15,"./UIIndexPath":22,"./UIRect":33,"./UISize":38}],13:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var UIColor=function(){function t(t,e,o,r){this.r=t,this.g=e,this.b=o,this.a=r}return t.prototype.colorWithAlphaComponent=function(e){return new t(this.r,this.g,this.b,this.a*e)},t.prototype.toStyle=function(){return"rgba("+(255*this.r).toFixed(0)+", "+(255*this.g).toFixed(0)+", "+(255*this.b).toFixed(0)+", "+this.a.toString()+")"},t.black=new t(0,0,0,1),t.clear=new t(0,0,0,0),t.gray=new t(.5,.5,.5,1),t.red=new t(1,0,0,1),t.yellow=new t(1,1,0,1),t.green=new t(0,1,0,1),t.blue=new t(0,0,1,1),t.white=new t(1,1,1,1),t}();exports.UIColor=UIColor;
},{}],14:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var UIConfirm=function(){function e(e){this.message=e,this.confirmTitle="Yes",this.cancelTitle="No"}return e.prototype.show=function(e,t){window.confirm(this.message)?e&&e():t&&t()},e}();exports.UIConfirm=UIConfirm;
},{}],15:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.UIEdgeInsetsZero={top:0,left:0,bottom:0,right:0};
},{}],16:[function(require,module,exports){
"use strict";var UIViewContentMode,UIControlState,UIControlContentVerticalAlignment,UIControlContentHorizontalAlignment,UITextAlignment,UILineBreakMode,UITextFieldViewMode,UITextAutocapitalizationType,UITextAutocorrectionType,UITextSpellCheckingType,UIKeyboardType,UIReturnKeyType,UILayoutConstraintAxis,UIStackViewDistribution,UIStackViewAlignment,UIStatusBarStyle;Object.defineProperty(exports,"__esModule",{value:!0}),function(e){e[e.scaleToFill=0]="scaleToFill",e[e.scaleAspectFit=1]="scaleAspectFit",e[e.scaleAspectFill=2]="scaleAspectFill"}(UIViewContentMode=exports.UIViewContentMode||(exports.UIViewContentMode={})),function(e){e[e.normal=0]="normal",e[e.highlighted=1]="highlighted",e[e.disabled=2]="disabled",e[e.selected=3]="selected"}(UIControlState=exports.UIControlState||(exports.UIControlState={})),function(e){e[e.center=0]="center",e[e.top=1]="top",e[e.bottom=2]="bottom",e[e.fill=3]="fill"}(UIControlContentVerticalAlignment=exports.UIControlContentVerticalAlignment||(exports.UIControlContentVerticalAlignment={})),function(e){e[e.center=0]="center",e[e.left=1]="left",e[e.right=2]="right",e[e.fill=3]="fill"}(UIControlContentHorizontalAlignment=exports.UIControlContentHorizontalAlignment||(exports.UIControlContentHorizontalAlignment={})),function(e){e[e.left=0]="left",e[e.center=1]="center",e[e.right=2]="right"}(UITextAlignment=exports.UITextAlignment||(exports.UITextAlignment={})),function(e){e[e.wordWrapping=0]="wordWrapping",e[e.charWrapping=1]="charWrapping",e[e.clipping=2]="clipping",e[e.truncatingHead=3]="truncatingHead",e[e.truncatingTail=4]="truncatingTail",e[e.truncatingMiddle=5]="truncatingMiddle"}(UILineBreakMode=exports.UILineBreakMode||(exports.UILineBreakMode={})),function(e){e[e.never=0]="never",e[e.whileEditing=1]="whileEditing",e[e.unlessEditing=2]="unlessEditing",e[e.always=3]="always"}(UITextFieldViewMode=exports.UITextFieldViewMode||(exports.UITextFieldViewMode={})),function(e){e[e.none=0]="none",e[e.words=1]="words",e[e.sentences=2]="sentences",e[e.allCharacters=3]="allCharacters"}(UITextAutocapitalizationType=exports.UITextAutocapitalizationType||(exports.UITextAutocapitalizationType={})),function(e){e[e.default=0]="default",e[e.no=1]="no",e[e.yes=2]="yes"}(UITextAutocorrectionType=exports.UITextAutocorrectionType||(exports.UITextAutocorrectionType={})),function(e){e[e.default=0]="default",e[e.no=1]="no",e[e.yes=2]="yes"}(UITextSpellCheckingType=exports.UITextSpellCheckingType||(exports.UITextSpellCheckingType={})),function(e){e[e.default=0]="default",e[e.ASCIICapable=1]="ASCIICapable",e[e.numbersAndPunctuation=2]="numbersAndPunctuation",e[e.numberPad=3]="numberPad",e[e.phonePad=4]="phonePad",e[e.emailAddress=5]="emailAddress",e[e.decimalPad=6]="decimalPad"}(UIKeyboardType=exports.UIKeyboardType||(exports.UIKeyboardType={})),function(e){e[e.default=0]="default",e[e.go=1]="go",e[e.next=2]="next",e[e.send=3]="send",e[e.done=4]="done"}(UIReturnKeyType=exports.UIReturnKeyType||(exports.UIReturnKeyType={})),function(e){e[e.horizontal=0]="horizontal",e[e.vertical=1]="vertical"}(UILayoutConstraintAxis=exports.UILayoutConstraintAxis||(exports.UILayoutConstraintAxis={})),function(e){e[e.fill=0]="fill",e[e.fillEqually=1]="fillEqually",e[e.fillProportionally=2]="fillProportionally",e[e.equalSpacing=3]="equalSpacing",e[e.equalCentering=4]="equalCentering"}(UIStackViewDistribution=exports.UIStackViewDistribution||(exports.UIStackViewDistribution={})),function(e){e[e.fill=0]="fill",e[e.leading=1]="leading",e[e.center=2]="center",e[e.trailing=3]="trailing"}(UIStackViewAlignment=exports.UIStackViewAlignment||(exports.UIStackViewAlignment={})),function(e){e[e.default=0]="default",e[e.lightContent=1]="lightContent"}(UIStatusBarStyle=exports.UIStatusBarStyle||(exports.UIStatusBarStyle={}));
},{}],17:[function(require,module,exports){
"use strict";var __extends=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(exports,"__esModule",{value:!0});var UIView_1=require("./UIView"),UIColor_1=require("./UIColor"),UIFetchMoreControl=function(t){function e(){var e=t.call(this)||this;return e.scrollView=void 0,e.enabled=!0,e.fetching=!1,e.tintColor=UIColor_1.UIColor.gray,e}return __extends(e,t),e.prototype.tintColorDidChange=function(){t.prototype.tintColorDidChange.call(this)},e.prototype.beginFetching=function(){this.fetching=!0,this.emit("fetch",this)},e.prototype.endFetching=function(){if(this.scrollView){var t=this.scrollView;t.contentOffset.y>t.contentSize.height+t.contentInset.bottom-t.bounds.height&&t.setContentOffset({x:0,y:t.contentSize.height+t.contentInset.bottom-t.bounds.height},!0)}this.fetching=!1},e}(UIView_1.UIView);exports.UIFetchMoreControl=UIFetchMoreControl;
},{"./UIColor":13,"./UIView":46}],18:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var UIFont=function(){return function(t,e,n){this.pointSize=t,this.fontStyle=e,this.fontName=n}}();exports.UIFont=UIFont;
},{}],19:[function(require,module,exports){
"use strict";var __extends=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(exports,"__esModule",{value:!0});var UIGestureRecognizerState,UIPoint_1=require("./UIPoint"),EventEmitter_1=require("../kimi/EventEmitter");!function(e){e[e.possible=0]="possible",e[e.began=1]="began",e[e.changed=2]="changed",e[e.ended=3]="ended",e[e.cancelled=4]="cancelled",e[e.failed=5]="failed"}(UIGestureRecognizerState=exports.UIGestureRecognizerState||(exports.UIGestureRecognizerState={}));var UIGestureRecognizer=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state=UIGestureRecognizerState.possible,t.enabled=!0,t.view=void 0,t.touches=[],t}return __extends(t,e),t.prototype.requireGestureRecognizerToFail=function(e){},t.prototype.locationInView=function(e){var t=this.touches[0];return t?t.locationInView(e):UIPoint_1.UIPointZero},t.prototype.numberOfTouches=function(){return this.touches.values.length},t.prototype.locationOfTouch=function(e,t){var n=this.touches[e];return n?n.locationInView(t):UIPoint_1.UIPointZero},t.prototype.handleTouch=function(e){this.touches=e},t.prototype.handleEvent=function(e){},t}(EventEmitter_1.EventEmitter);exports.UIGestureRecognizer=UIGestureRecognizer;
},{"../kimi/EventEmitter":3,"./UIPoint":30}],20:[function(require,module,exports){
"use strict";var __extends=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),__awaiter=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,a){function o(e){try{u(r.next(e))}catch(e){a(e)}}function l(e){try{u(r.throw(e))}catch(e){a(e)}}function u(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(o,l)}u((r=r.apply(e,t||[])).next())})},__generator=this&&this.__generator||function(e,t){var n,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}};Object.defineProperty(exports,"__esModule",{value:!0});var UIImageRenderingMode,UISize_1=require("./UISize"),EventEmitter_1=require("../kimi/EventEmitter");!function(e){e[e.automatic=0]="automatic",e[e.alwaysOriginal=1]="alwaysOriginal",e[e.alwaysTemplate=2]="alwaysTemplate"}(UIImageRenderingMode=exports.UIImageRenderingMode||(exports.UIImageRenderingMode={}));var UIImage=function(e){function t(n){var r=e.call(this)||this;return r.options=n,r.imageElement=document.createElement("img"),r.renderingMode=UIImageRenderingMode.alwaysOriginal,r.loaded=!1,r.size=UISize_1.UISizeZero,r.scale=1,n.base64?(r.imageElement.src="data:image;base64,"+n.base64,r.imageElement.addEventListener("load",function(){var e=n.name?t.scaleFromName(n.name):1;r.size={width:r.imageElement.naturalWidth/e,height:r.imageElement.naturalHeight/e},r.scale=e,r.loaded=!0,r.emit("load")})):n.name,void 0!==n.renderingMode&&(r.renderingMode=n.renderingMode),r}return __extends(t,e),t.fromURL=function(e){var n=new t({});return n.imageElement.src=e,n.imageElement.addEventListener("load",function(){n.size={width:n.imageElement.naturalWidth,height:n.imageElement.naturalHeight},n.loaded=!0,n.emit("load")}),n},t.scaleFromName=function(e){return e.indexOf("@2x")>0?2:e.indexOf("@3x")>0?3:e.indexOf("@4x")>0?4:1},t.prototype.fetchSize=function(){return __awaiter(this,void 0,void 0,function(){var e=this;return __generator(this,function(t){switch(t.label){case 0:return this.loaded?[2,this.size]:[3,1];case 1:return[4,new Promise(function(t,n){e.on("load",function(){t(e.size)})})];case 2:return[2,t.sent()]}})})},t.prototype.clone=function(){return new t(this.options)},t}(EventEmitter_1.EventEmitter);exports.UIImage=UIImage;
},{"../kimi/EventEmitter":3,"./UISize":38}],21:[function(require,module,exports){
"use strict";var __extends=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(exports,"__esModule",{value:!0});var UIView_1=require("./UIView"),UIImage_1=require("./UIImage"),UIEnums_1=require("./UIEnums"),Now_1=require("./helpers/Now"),UISize_1=require("./UISize"),cachingImages={},svgFilterRoot=document.createElementNS("http://www.w3.org/2000/svg","svg");document.body.appendChild(svgFilterRoot);var UIImageView=function(e){function t(){var t=e.call(this)||this;return t.contentElement=document.createElement("div"),t.duringSetImageWithAnimation=!1,t.duringSetImageAnimating=!1,t.currentURLString=void 0,t.filterElement=void 0,t.userInteractionEnabled=!1,t.contentElement.style.position="absolute",t.contentElement.style.width="100%",t.contentElement.style.height="100%",t.domElement.appendChild(t.contentElement),t}return __extends(t,e),Object.defineProperty(t.prototype,"image",{get:function(){return this._image},set:function(e){var t=this;this.currentURLString=void 0,this._image=e,this.duringSetImageWithAnimation&&!this.duringSetImageAnimating||this.contentElement.childNodes.forEach(function(e){t.contentElement.removeChild(e)}),e&&(e.imageElement.style.position="absolute",e.imageElement.style.width="100%",e.imageElement.style.height="100%",this.contentElement.appendChild(e.imageElement),this.resetContentObjectFit(),this.duringSetImageWithAnimation&&(e.imageElement.style.opacity="0.0",e.imageElement.style.webkitTransition="opacity 0.25s linear",e.imageElement.style.transition="opacity 0.25s linear",this.duringSetImageWithAnimation=!0,setTimeout(function(){e.imageElement.style.opacity="1.0",setTimeout(function(){e.imageElement.style.webkitTransition=null,e.imageElement.style.transition=null,t.contentElement.childNodes.forEach(function(i){i!=e.imageElement&&t.contentElement.removeChild(i)}),t.duringSetImageWithAnimation=!1},250)},0))),this.createTintFilter()},enumerable:!0,configurable:!0}),t.prototype.loadImageWithURLString=function(e,t){var i=this;void 0!==e&&void 0===cachingImages[e]&&(this.image=t),this.currentURLString=e,e&&setTimeout(function(){if(i.currentURLString===e){var t=cachingImages[e]||UIImage_1.UIImage.fromURL(e),n=Now_1.currentAnimationTimeMillis();t.fetchSize().then(function(){(cachingImages[e]=t,i.currentURLString===e)&&(Now_1.currentAnimationTimeMillis()-n<1||void 0===i.image?i.image=t:(i.duringSetImageWithAnimation=!0,i.image=t,i.duringSetImageWithAnimation=!1))})}})},Object.defineProperty(t.prototype,"contentMode",{get:function(){return this._contentMode},set:function(e){this._contentMode=e,this.resetContentObjectFit()},enumerable:!0,configurable:!0}),t.prototype.tintColorDidChange=function(){e.prototype.tintColorDidChange.call(this),this.createTintFilter()},t.prototype.resetContentObjectFit=function(){if(this.image)switch(this.contentMode){case UIEnums_1.UIViewContentMode.scaleAspectFit:this.image.imageElement.style.setProperty("object-fit","contain");break;case UIEnums_1.UIViewContentMode.scaleAspectFill:this.image.imageElement.style.setProperty("object-fit","cover");break;case UIEnums_1.UIViewContentMode.scaleToFill:this.image.imageElement.style.setProperty("object-fit","fill")}},t.prototype.didRemovedFromWindow=function(){e.prototype.didRemovedFromWindow.call(this),this.filterElement&&svgFilterRoot.removeChild(this.filterElement)},t.prototype.createTintFilter=function(){if(this.image&&this.image.renderingMode===UIImage_1.UIImageRenderingMode.alwaysTemplate){this.filterElement&&svgFilterRoot.removeChild(this.filterElement);var e="com.xt.filter."+Math.random()+Math.random(),t=document.createElementNS("http://www.w3.org/2000/svg","filter");t.id=e,t.innerHTML='\n            <feColorMatrix in="SourceGraphic"\n                        type="matrix"\n                        values="'+this.tintColor.r+" 0 0 0 0\n                                0 "+this.tintColor.g+" 0 0 0\n                                0 0 "+this.tintColor.b+" 0 0 \n                                0 0 0 "+this.tintColor.a+' 0" />\n            ',svgFilterRoot.appendChild(t),this.filterElement=t,this.image.imageElement.style.filter="url(#"+e+")"}},t.prototype.intrinsicContentSize=function(){return this.image?this.image.size:UISize_1.UISizeZero},t}(UIView_1.UIView);exports.UIImageView=UIImageView;
},{"./UIEnums":16,"./UIImage":20,"./UISize":38,"./UIView":46,"./helpers/Now":51}],22:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var UIIndexPath=function(){function t(t,e){this.row=t,this.section=e}return t.prototype.mapKey=function(){return this.row+"-"+this.section},t}();exports.UIIndexPath=UIIndexPath;
},{}],23:[function(require,module,exports){
"use strict";var __extends=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(exports,"__esModule",{value:!0});var UIView_1=require("./UIView"),UIEnums_1=require("./UIEnums"),UIColor_1=require("./UIColor"),UIFont_1=require("./UIFont"),TextMeasurer_1=require("./helpers/TextMeasurer"),UILabel=function(t){function e(){var e=t.call(this)||this;return e.textElement=document.createElement("span"),e._text=void 0,e._attributedText=void 0,e._font=void 0,e._textColor=void 0,e._textAlignment=UIEnums_1.UITextAlignment.left,e.lineBreakMode=UIEnums_1.UILineBreakMode.truncatingTail,e._numberOfLines=1,e.userInteractionEnabled=!1,e.textElement.style.position="absolute",e.textElement.style.userSelect="none",e.textElement.style.cursor="default",e.textElement.style.width="100%",e.textElement.style.top="50%",e.textElement.style.left="0",e.textElement.style.transform="translateY(-50%)",e.numberOfLines=1,e.domElement.appendChild(e.textElement),e}return __extends(e,t),Object.defineProperty(e.prototype,"text",{get:function(){return this._text},set:function(t){this._text=t,this.textElement.innerText="string"==typeof t?t:""},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"attributedText",{get:function(){return this._attributedText},set:function(t){this._attributedText=t,this.textElement.innerText=t?t.toHTMLText():""},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"font",{get:function(){return this._font},set:function(t){this._font=t,t?(this.textElement.style.fontSize=t.pointSize.toString()+"px",this.textElement.style.fontFamily="string"==typeof t.fontName?t.fontName:null,this.textElement.style.fontWeight="string"==typeof t.fontStyle?t.fontStyle:null,this.textElement.style.fontStyle="string"==typeof t.fontStyle?t.fontStyle:null):(this.textElement.style.fontSize="14px",this.textElement.style.fontFamily=null,this.textElement.style.fontWeight=null,this.textElement.style.fontStyle=null)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"textColor",{get:function(){return this._textColor},set:function(t){this._textColor=t,this.textElement.style.color=t?t.toStyle():UIColor_1.UIColor.black.toStyle()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"textAlignment",{get:function(){return this._textAlignment},set:function(t){switch(this._textAlignment=t,t){case UIEnums_1.UITextAlignment.left:this.textElement.style.textAlign="left";break;case UIEnums_1.UITextAlignment.center:this.textElement.style.textAlign="center";break;case UIEnums_1.UITextAlignment.right:this.textElement.style.textAlign="right"}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"numberOfLines",{get:function(){return this._numberOfLines},set:function(t){this._numberOfLines=t,1===t?(this.textElement.style.overflow="hidden",this.textElement.style.wordWrap=null,this.textElement.style.wordBreak=null,this.textElement.style.textOverflow=this.lineBreakMode===UIEnums_1.UILineBreakMode.truncatingTail?"ellipsis":null,this.textElement.style.display="inline-block",this.textElement.style.setProperty("-webkit-line-clamp",null),this.textElement.style.whiteSpace="nowrap",this.textElement.style.visibility=null):(this.textElement.style.overflow="hidden",this.textElement.style.wordWrap=null,this.textElement.style.wordBreak=null,this.textElement.style.textOverflow=this.lineBreakMode===UIEnums_1.UILineBreakMode.truncatingTail?"ellipsis":null,this.textElement.style.display="-webkit-box",this.textElement.style.webkitBoxOrient="vertical",this.resetLineClamp(),this.textElement.style.whiteSpace=null)},enumerable:!0,configurable:!0}),e.prototype.resetLineClamp=function(){if(1!=this.numberOfLines){var t=0==this.numberOfLines?99999:this.numberOfLines,e=16;this.font&&(e=Math.max(1.5*this.font.pointSize,this.font.pointSize+12));var n=Math.min(Math.floor(this.bounds.height/e),t);n>0?(this.textElement.style.setProperty("-webkit-line-clamp",n.toFixed(0)),this.textElement.style.visibility=null):this.textElement.style.visibility="none"}},e.prototype.layoutSubviews=function(){t.prototype.layoutSubviews.call(this),this.resetLineClamp()},e.prototype.intrinsicContentSize=function(){return this.text?TextMeasurer_1.TextMeasurer.measureText(this.text,{font:this.font||new UIFont_1.UIFont(14),inRect:{x:0,y:0,width:1/0,height:1/0},numberOfLines:this.numberOfLines}):{width:0,height:0}},e}(UIView_1.UIView);exports.UILabel=UILabel;
},{"./UIColor":13,"./UIEnums":16,"./UIFont":18,"./UIView":46,"./helpers/TextMeasurer":53}],24:[function(require,module,exports){
"use strict";var __extends=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(exports,"__esModule",{value:!0});var UIGestureRecognizer_1=require("./UIGestureRecognizer"),UITouch_1=require("./UITouch"),UIView_1=require("./UIView"),UILongPressGestureRecognizer=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.numberOfTapsRequired=1,t.numberOfTouchesRequired=1,t.minimumPressDuration=.5,t.allowableMovement=10,t.beganPoints={},t}return __extends(t,e),t.prototype.handleTouch=function(t){var n=this;e.prototype.handleTouch.call(this,t),t.forEach(function(e){if(e.phase==UITouch_1.UITouchPhase.began){if(null!=UIView_1.UIView.recognizedGesture)return void(n.beganPoints={});e.windowPoint&&(n.beganPoints[e.identifier]=e.windowPoint),void 0===n.timerTask&&Object.keys(n.beganPoints).length>=n.numberOfTouchesRequired&&(n.timerTask=setTimeout(function(){null==UIView_1.UIView.recognizedGesture&&n.state==UIGestureRecognizer_1.UIGestureRecognizerState.possible?(UIView_1.UIView.recognizedGesture=n,n.state=UIGestureRecognizer_1.UIGestureRecognizerState.began,n.handleEvent("began"),n.emit("began",n)):n.state=UIGestureRecognizer_1.UIGestureRecognizerState.failed},1e3*n.minimumPressDuration))}else if(e.phase==UITouch_1.UITouchPhase.moved)if(n.state==UIGestureRecognizer_1.UIGestureRecognizerState.possible){if(e.windowPoint&&n.beganPoints[e.identifier]){var t=n.beganPoints[e.identifier];(Math.abs(t.x-e.windowPoint.x)>=n.allowableMovement||Math.abs(t.y-e.windowPoint.y)>=n.allowableMovement)&&(clearTimeout(n.timerTask),n.state=UIGestureRecognizer_1.UIGestureRecognizerState.failed)}}else n.state!=UIGestureRecognizer_1.UIGestureRecognizerState.began&&n.state!=UIGestureRecognizer_1.UIGestureRecognizerState.changed||(n.state=UIGestureRecognizer_1.UIGestureRecognizerState.changed,n.handleEvent("changed"),n.emit("changed",n));else e.phase==UITouch_1.UITouchPhase.ended?(clearTimeout(n.timerTask),n.timerTask=void 0,n.state!=UIGestureRecognizer_1.UIGestureRecognizerState.began&&n.state!=UIGestureRecognizer_1.UIGestureRecognizerState.changed||(n.state=UIGestureRecognizer_1.UIGestureRecognizerState.ended,n.handleEvent("ended"),n.emit("ended",n),setTimeout(function(){UIView_1.UIView.recognizedGesture=void 0},0)),n.state=UIGestureRecognizer_1.UIGestureRecognizerState.possible,n.beganPoints={}):e.phase==UITouch_1.UITouchPhase.cancelled&&(clearTimeout(n.timerTask),n.timerTask=void 0,n.state!=UIGestureRecognizer_1.UIGestureRecognizerState.began&&n.state!=UIGestureRecognizer_1.UIGestureRecognizerState.changed||(n.state=UIGestureRecognizer_1.UIGestureRecognizerState.cancelled,n.handleEvent("cancelled"),n.emit("cancelled",n),setTimeout(function(){UIView_1.UIView.recognizedGesture=void 0},0)),n.state=UIGestureRecognizer_1.UIGestureRecognizerState.possible,n.beganPoints={})})},t}(UIGestureRecognizer_1.UIGestureRecognizer);exports.UILongPressGestureRecognizer=UILongPressGestureRecognizer;
},{"./UIGestureRecognizer":19,"./UITouch":45,"./UIView":46}],25:[function(require,module,exports){
"use strict";var __extends=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}();Object.defineProperty(exports,"__esModule",{value:!0});var UIView_1=require("./UIView"),UIColor_1=require("./UIColor"),UIImage_1=require("./UIImage"),EventEmitter_1=require("../kimi/EventEmitter"),UIAnimator_1=require("./UIAnimator"),UISize_1=require("./UISize"),UILabel_1=require("./UILabel"),UIButton_1=require("./UIButton"),UIEnums_1=require("./UIEnums"),UIFont_1=require("./UIFont"),UINavigationItem=function(){function t(){var t,e=this;this.viewController=void 0,this.navigationBar=void 0,this._title=void 0,this._titleView=((t=new UILabel_1.UILabel).font=new UIFont_1.UIFont(18),t),this.backButton=(new UIButton_1.UIButton).on("touchUpInside",function(){e.viewController&&e.viewController.navigationController&&e.viewController.navigationController.popViewController(!0)}),this._hidesBackButton=!1,this._leftBarButtonItems=[],this._rightBarButtonItem=void 0,this._rightBarButtonItems=[]}return Object.defineProperty(t.prototype,"title",{get:function(){return this._title||(this.viewController?this.viewController.title:void 0)},set:function(t){this._title=t,this.setNeedsUpdate()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"titleView",{get:function(){return this._titleView},set:function(t){this._titleView&&this._titleView.removeFromSuperview(),this._titleView=t,this.setNeedsUpdate()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hidesBackButton",{get:function(){return this._hidesBackButton},set:function(t){this._hidesBackButton=t,this.setNeedsUpdate()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"leftBarButtonItem",{get:function(){return this.leftBarButtonItems[0]},set:function(t){this.leftBarButtonItems=t?[t]:[]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"leftBarButtonItems",{get:function(){return this._leftBarButtonItems},set:function(t){this._leftBarButtonItems.forEach(function(t){t.customView&&t.customView.removeFromSuperview()}),this._leftBarButtonItems=t,this.setNeedsUpdate()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rightBarButtonItem",{get:function(){return this.rightBarButtonItems[0]},set:function(t){this.rightBarButtonItems=t?[t]:[]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rightBarButtonItems",{get:function(){return this._rightBarButtonItems},set:function(t){this._rightBarButtonItems.forEach(function(t){t.customView&&t.customView.removeFromSuperview()}),this._rightBarButtonItems=t,this.setNeedsUpdate()},enumerable:!0,configurable:!0}),t.prototype.setNeedsUpdate=function(){this.titleView instanceof UILabel_1.UILabel&&(this.titleView.text=this.title),this.navigationBar&&this.navigationBar.displayItems()},t.prototype.allViews=function(){var t=[];return t.push(this.backButton),t.push(this.titleView),this.leftViews().forEach(function(e){t.push(e)}),this.rightViews().forEach(function(e){t.push(e)}),t},t.prototype.leftViews=function(){return this.leftBarButtonItems.filter(function(t){return void 0!==t.customView}).map(function(t){return t.customView})},t.prototype.rightViews=function(){return this.rightBarButtonItems.filter(function(t){return void 0!==t.customView}).map(function(t){return t.customView})},t}();exports.UINavigationItem=UINavigationItem;var UIBarButton=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(UIButton_1.UIButton),UIBarButtonItem=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._title=void 0,e.titleAttributes=void 0,e._image=void 0,e._tintColor=UIColor_1.UIColor.black,e.width=44,e.customView=(new UIBarButton).on("touchUpInside",function(){e.emit("touchUpInside",e)}),e}return __extends(e,t),Object.defineProperty(e.prototype,"title",{get:function(){return this._title},set:function(t){this._title=t,this.resetText()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"image",{get:function(){return this._image},set:function(t){this._image=t,this.customView instanceof UIBarButton&&this.customView.setImage(t,UIEnums_1.UIControlState.normal)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tintColor",{get:function(){return this._tintColor},set:function(t){this._tintColor=t,this.customView instanceof UIBarButton&&(this.customView.tintColor=t)},enumerable:!0,configurable:!0}),e.prototype.resetText=function(){this.customView instanceof UIBarButton&&(this.customView.tintColor=this.tintColor,this.customView.setTitle(this.title,UIEnums_1.UIControlState.normal))},e}(EventEmitter_1.EventEmitter);exports.UIBarButtonItem=UIBarButtonItem;var UINavigationBar=function(t){function e(){var e=t.call(this)||this;return e.navigationController=void 0,e.barHeight=48,e.translucent=!1,e._barTintColor=void 0,e.titleTextAttributes={},e.backIndicatorImage=new UIImage_1.UIImage({name:"icon_back@3x",base64:"iVBORw0KGgoAAAANSUhEUgAAADkAAAA8CAMAAADrC+IEAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAABOUExURUdwTP///////////////////////////////////////////////////////////////////////////////////////////////////4il91oAAAAZdFJOUwD+ZRPxOKUhoAPR0BY3pxSZmAIOMyhEh7SA0BQ9AAAAfElEQVRIx+3VSQqAMBAF0XaIGudZ+/4XVaMLCQjxo4LQtX/rIrpO14qgdMShAiFD1ECEHnClPQg5CwQ+D1OBAv8Cq68hz4ljnQXdy1FoZMOoLEJUYtRIiO7yRKfYsZYs6vl3z6WEChUq1JGOKC01YRSAO4XgRkFINKDwrRZIeEfaMx4tYAAAAABJRU5ErkJggg==",renderingMode:UIImage_1.UIImageRenderingMode.alwaysTemplate}),e.backIndicatorTransitionMaskImage=void 0,e.items=[],e.barTintColor=UIColor_1.UIColor.white,e.tintColor=UIColor_1.UIColor.black,e.domElement.style.borderBottom="solid",e.domElement.style.borderBottomWidth=(1/devicePixelRatio).toFixed(2)+"px",e.domElement.style.borderBottomColor=new UIColor_1.UIColor(152/255,150/255,155/255,.75).toStyle(),e}return __extends(e,t),Object.defineProperty(e.prototype,"hidden",{get:function(){return this._hidden},set:function(t){this._hidden=t,this.domElement.style.visibility=t?"hidden":"inherit",this.navigationController&&this.navigationController.view.setNeedsDisplay()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"barTintColor",{get:function(){return this._barTintColor},set:function(t){this._barTintColor=t,this.backgroundColor=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"topItem",{get:function(){return this.items[this.items.length-1]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"backItem",{get:function(){return this.items[this.items.length-2]},enumerable:!0,configurable:!0}),e.prototype.setItems=function(t,e){this.items.forEach(function(t){return t.allViews().forEach(function(t){return t.removeFromSuperview()})}),this.items=t,this.displayItems()},e.prototype.pushNavigationItem=function(t,e){var i,o,n=this;this.items.push(t),t.navigationBar=this,this.displayItems(),e&&(i=n.items[n.items.length-2],o=n.items[n.items.length-1],void 0!==i&&void 0!==o&&(i.allViews().forEach(function(t){return t.alpha=1}),o.allViews().forEach(function(t){t.transform={a:1,b:0,c:0,d:1,tx:t.bounds.width,ty:0},t.alpha=1}),UIAnimator_1.UIAnimator.bouncy(0,16,function(){i.allViews().forEach(function(t){return t.alpha=0}),o.allViews().forEach(function(t){t.transform={a:1,b:0,c:0,d:1,tx:0,ty:0},t.alpha=1})},void 0)))},e.prototype.popNavigationItem=function(t){var e=this;if(!(this.items.length<=1)){var i=this.items[this.items.length-1],o=this.items[this.items.length-2];this.items.pop(),t?(i.allViews().forEach(function(t){t.alpha=1}),o.allViews().forEach(function(t){t.alpha=0}),UIAnimator_1.UIAnimator.bouncy(0,16,function(){i.allViews().forEach(function(t){t.alpha=0}),o.allViews().forEach(function(t){t.alpha=1})},function(){i.allViews().forEach(function(t){return t.removeFromSuperview()}),e.displayItems()})):(i.allViews().forEach(function(t){return t.removeFromSuperview()}),this.displayItems())}},e.prototype.popToNavigationItem=function(t,e){var i=this;if(!(this.items.indexOf(t)<0)){var o=this.items.indexOf(t),n=this.items.filter(function(t,e){return e>o});if(0!=n.length){this.items=this.items.filter(function(t,e){return e<=o});var r=t;if(e){var a=n[n.length-1];a.allViews().forEach(function(t){t.alpha=1}),r.allViews().forEach(function(t){t.alpha=0}),UIAnimator_1.UIAnimator.bouncy(0,16,function(){a.allViews().forEach(function(t){t.alpha=0}),r.allViews().forEach(function(t){t.alpha=1})},function(){n.forEach(function(t){t.allViews().forEach(function(t){t.removeFromSuperview()})}),i.displayItems()})}else n.forEach(function(t){t.allViews().forEach(function(t){t.removeFromSuperview()})}),this.displayItems()}}},e.prototype.displayItems=function(){var t=this;this.items.forEach(function(e,i){e.titleView.superview!=t&&t.addSubview(e.titleView),e.backButton.superview!=t&&t.addSubview(e.backButton),e.leftViews().forEach(function(e){e.superview!=t&&t.addSubview(e)}),e.rightViews().forEach(function(e){e.superview!=t&&t.addSubview(e)}),e.backButton.hidden=e.hidesBackButton||0==i||e.leftBarButtonItems.length>0,e.backButton.setImage(t.backIndicatorImage?t.backIndicatorImage.clone():void 0,UIEnums_1.UIControlState.normal)}),this.layoutItems()},e.prototype.layoutItems=function(){var t=this,e=this.items.length-1;this.items.forEach(function(i,o){var n=16;i.backButton.hidden||(i.backButton.frame={x:0,y:t.bounds.height-t.barHeight,width:44,height:t.barHeight},n+=32),i.leftBarButtonItems.forEach(function(e){e.customView&&(e.customView.frame={x:n,y:t.bounds.height-t.barHeight,width:e.width,height:t.barHeight},n+=e.width+8)});var r=i.titleView.intrinsicContentSize()||UISize_1.UISizeZero;i.titleView.frame={x:n,y:t.bounds.height-t.barHeight+(t.barHeight-r.height)/2,width:r.width,height:r.height};var a=t.bounds.width-16;i.rightBarButtonItems.forEach(function(e){if(e.customView){var i=e.customView;a-=e.width,i.frame={x:a,y:t.bounds.height-t.barHeight,width:e.width,height:t.barHeight},a-=8}}),i.allViews().forEach(function(t){t.alpha=o<e?0:1})})},e.prototype.layoutSubviews=function(){t.prototype.layoutSubviews.call(this),this.layoutItems()},e}(UIView_1.UIView);exports.UINavigationBar=UINavigationBar;
},{"../kimi/EventEmitter":3,"./UIAnimator":9,"./UIButton":10,"./UIColor":13,"./UIEnums":16,"./UIFont":18,"./UIImage":20,"./UILabel":23,"./UISize":38,"./UIView":46}],26:[function(require,module,exports){
"use strict";var __extends=this&&this.__extends||function(){var t=function(r,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var e in r)r.hasOwnProperty(e)&&(t[e]=r[e])})(r,e)};return function(r,e){function o(){this.constructor=r}t(r,e),r.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}}();Object.defineProperty(exports,"__esModule",{value:!0});var UIViewController_1=require("./UIViewController"),UINavigationBarViewController=function(t){function r(){return null!==t&&t.apply(this,arguments)||this}return __extends(r,t),r}(UIViewController_1.UIViewController);exports.UINavigationBarViewController=UINavigationBarViewController;
},{"./UIViewController":47}],27:[function(require,module,exports){
"use strict";var __extends=this&&this.__extends||function(){var i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,e){i.__proto__=e}||function(i,e){for(var t in e)e.hasOwnProperty(t)&&(i[t]=e[t])})(e,t)};return function(e,t){function o(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}}();Object.defineProperty(exports,"__esModule",{value:!0});var UIViewController_1=require("./UIViewController"),UINavigationBar_1=require("./UINavigationBar"),UIColor_1=require("./UIColor"),UIAnimator_1=require("./UIAnimator"),UINavigationBarViewController_1=require("./UINavigationBarViewController"),UINavigationController=function(i){function e(e){var t=i.call(this)||this;return t.rootViewController=e,t._isUINavigationController=!0,t.navigationBar=new UINavigationBar_1.UINavigationBar,t.beingAnimating=!1,t}return __extends(e,i),e.prototype.viewDidLoad=function(){this.navigationBar.navigationController=this,this.view.backgroundColor=UIColor_1.UIColor.clear,this.view.addSubview(this.navigationBar),this.rootViewController&&this.pushViewController(this.rootViewController,!1),i.prototype.viewDidLoad.call(this)},e.prototype.pushViewController=function(i,e){var t=this;if(void 0===e&&(e=!0),!this.beingAnimating){this.childViewControllers.length>0&&(i.hidesBottomBarWhenPushed=!0),i.hidesBottomBarWhenPushed,this.addChildViewController(i),this.view.addSubview(i.view),i.view.frame=this.contentFrame(i);var o=this.childViewControllers[this.childViewControllers.length-2],r=this.childViewControllers[this.childViewControllers.length-1];0!=e&&null!=o&&null!=r?(o.viewWillDisappear(!0),r.viewWillAppear(!0),this.beingAnimating=!0,this.doPushAnimation(o,r,function(){o.viewDidDisappear(!0),r.viewDidAppear(!0),t.childViewControllers.forEach(function(i){i!=r&&(i.view.hidden=!0)}),t.beingAnimating=!1}),this.navigationBar.pushNavigationItem(r.navigationItem,!0)):(o&&o.viewWillDisappear(!1),r&&r.viewWillAppear(!1),o&&o.viewDidDisappear(!1),r&&r.viewDidAppear(!1),r&&this.navigationBar.pushNavigationItem(r.navigationItem,!1),this.childViewControllers.forEach(function(i){i!=r&&(i.view.hidden=!0)}))}},e.prototype.popViewController=function(i){var e=this;if(void 0===i&&(i=!0),!this.beingAnimating){var t=this.childViewControllers[this.childViewControllers.length-1],o=this.childViewControllers[this.childViewControllers.length-2];if(void 0!==t&&void 0!==o)return o.view.hidden=!1,t.viewWillDisappear(i),o.viewWillAppear(i),0!=i?(this.beingAnimating=!0,this.doPopAnimation(t,o,function(){t.removeFromParentViewController(),t.view.removeFromSuperview(),t.viewDidDisappear(!0),o.viewDidAppear(!0),o.hidesBottomBarWhenPushed,e.beingAnimating=!1})):(t.removeFromParentViewController(),t.view.removeFromSuperview(),o.view.frame=this.contentFrame(o),t.viewDidDisappear(!0),o.viewDidAppear(!0),o.hidesBottomBarWhenPushed),this.navigationBar.popNavigationItem(0!=i),t}},e.prototype.popToViewController=function(i,e){var t=this;if(void 0===e&&(e=!0),this.beingAnimating)return[];if(this.childViewControllers.indexOf(i)<0)return[];var o=this.childViewControllers.indexOf(i),r=this.childViewControllers.filter(function(i,e){return e>o});if(0==r.length)return[];var n=i;return n.view.hidden=!1,r.forEach(function(i){i.viewWillDisappear(e)}),n.viewWillAppear(e),0!=e?(this.beingAnimating=!0,this.doPopAnimation(r[r.length-1],n,function(){r.forEach(function(i){i.removeFromParentViewController()}),r.forEach(function(i){i.view.removeFromSuperview()}),r.forEach(function(i){i.viewDidDisappear(!0)}),n.viewDidAppear(!0),n.hidesBottomBarWhenPushed,t.beingAnimating=!1})):(r.forEach(function(i){i.removeFromParentViewController()}),r.forEach(function(i){i.view.removeFromSuperview()}),n.view.frame=this.contentFrame(n),r.forEach(function(i){i.viewDidDisappear(!1)}),n.viewDidAppear(!1),n.hidesBottomBarWhenPushed),this.navigationBar.popToNavigationItem(n.navigationItem,0!=e),r},e.prototype.popToRootViewController=function(i){void 0===i&&(i=!0);var e=this.childViewControllers[0];return void 0===e?[]:this.popToViewController(e,i)},e.prototype.setViewControllers=function(i,e){var t=this;void 0===e&&(e=!1),this.beingAnimating||(this.childViewControllers.forEach(function(i){i.removeFromParentViewController(),i.view.removeFromSuperview()}),i.forEach(function(i){t.addChildViewController(i),t.view.addSubview(i.view),i.view.frame=t.contentFrame(i)}),this.navigationBar.setItems(i.map(function(i){return i.navigationItem}),0!=e),i[i.length-1]&&i[i.length-1].hidesBottomBarWhenPushed)},e.prototype.viewWillLayoutSubviews=function(){var e=this;this.navigationBar.frame=this.barFrame,this.childViewControllers.forEach(function(i){i.view.frame=e.contentFrame(i)}),i.prototype.viewWillLayoutSubviews.call(this)},Object.defineProperty(e.prototype,"barFrame",{get:function(){return this.navigationBar.hidden?{x:0,y:0,width:this.view.bounds.width,height:0}:{x:0,y:0,width:this.view.bounds.width,height:this.navigationBar.barHeight}},enumerable:!0,configurable:!0}),e.prototype.contentFrame=function(i){return i.hidesBottomBarWhenPushed?{x:0,y:this.barFrame.height,width:this.view.bounds.width,height:this.view.bounds.height-this.barFrame.height}:{x:0,y:this.barFrame.height,width:this.view.bounds.width,height:this.view.bounds.height-this.barFrame.height-0}},e.prototype.doPushAnimation=function(i,e,t){var o=this;i.view.frame=this.contentFrame(i);var r=this.contentFrame(e);e.view.frame={x:r.width,y:r.y,width:r.width,height:r.height},UIAnimator_1.UIAnimator.bouncy(0,16,function(){var t=o.contentFrame(i);i.view.frame={x:.25*-t.width,y:t.y,width:t.width,height:t.height},e.view.frame=o.contentFrame(e)},function(){t()})},e.prototype.doPopAnimation=function(i,e,t){var o=this;i instanceof UINavigationBarViewController_1.UINavigationBarViewController?i.view.frame=this.view.bounds:i.view.frame=this.contentFrame(i);var r=this.contentFrame(e);e.view.frame={x:.25*-r.width,y:r.y,width:r.width,height:r.height},UIAnimator_1.UIAnimator.bouncy(0,16,function(){if(i instanceof UINavigationBarViewController_1.UINavigationBarViewController)i.view.frame={x:o.contentFrame(i).width,y:o.view.frame.y,width:o.view.frame.width,height:o.view.frame.height};else{var t=o.contentFrame(i);i.view.frame={x:t.width,y:t.y,width:t.width,height:t.height}}e.view.frame=o.contentFrame(e)},function(){t()})},e.prototype.didAddSubview=function(e){this.view.bringSubviewToFront(this.navigationBar),i.prototype.didAddSubview.call(this,e)},e.prototype.setNavigationBarHidden=function(i,e,t){var o=this;void 0===t&&(t=!1),e?(t&&(this.navigationBar.hidden=i,this.navigationBar.alpha=i?1:0),UIAnimator_1.UIAnimator.curve(.25,function(){t?o.navigationBar.alpha=i?0:1:o.navigationBar.hidden=i},void 0)):this.navigationBar.hidden=i},e}(UIViewController_1.UIViewController);exports.UINavigationController=UINavigationController;
},{"./UIAnimator":9,"./UIColor":13,"./UINavigationBar":25,"./UINavigationBarViewController":26,"./UIViewController":47}],28:[function(require,module,exports){
"use strict";var __extends=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(exports,"__esModule",{value:!0});var UIGestureRecognizer_1=require("./UIGestureRecognizer"),UIView_1=require("./UIView"),UITouch_1=require("./UITouch"),UIPanGestureRecognizer=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.lockedDirection=void 0,t.firstTouch=void 0,t.translationPoint=void 0,t.beganPoints={},t}return __extends(t,e),t.prototype.translationInView=function(e){if(!this.firstTouch)return{x:0,y:0};var t=this.firstTouch.windowPoint;if(!t)return{x:0,y:0};var i=this.translationPoint;return i?{x:t.x-i.x,y:t.y-i.y}:{x:0,y:0}},t.prototype.setTranslation=function(e,t){if(this.firstTouch){var i=this.firstTouch.windowPoint;i&&(this.translationPoint={x:i.x-e.x,y:i.y-e.y})}},t.prototype.velocityInView=function(e){return UIView_1.sharedVelocityTracker.computeCurrentVelocity(),UIView_1.sharedVelocityTracker.velocity},t.prototype.handleTouch=function(t){var i=this;e.prototype.handleTouch.call(this,t),t.forEach(function(e){if(0==e.identifier&&(i.firstTouch=e),e.phase==UITouch_1.UITouchPhase.began){if(null!=UIView_1.UIView.recognizedGesture&&UIView_1.UIView.recognizedGesture!=i)return void(i.beganPoints={});e.windowPoint&&(i.beganPoints[e.identifier]=e.windowPoint),0==e.identifier&&(i.translationPoint=e.windowPoint)}else if(e.phase==UITouch_1.UITouchPhase.moved)if(i.state==UIGestureRecognizer_1.UIGestureRecognizerState.possible){if(null!=UIView_1.UIView.recognizedGesture&&UIView_1.UIView.recognizedGesture!=i)return void(i.state=UIGestureRecognizer_1.UIGestureRecognizerState.failed);if(e.windowPoint&&i.beganPoints[e.identifier]){var t=i.beganPoints[e.identifier];void 0!==i.lockedDirection?1===i.lockedDirection?Math.abs(t.y-e.windowPoint.y)>=8&&(UIView_1.UIView.recognizedGesture=i,i.state=UIGestureRecognizer_1.UIGestureRecognizerState.began,i.handleEvent("began"),i.emit("began",i)):2===i.lockedDirection&&Math.abs(t.x-e.windowPoint.x)>=8&&(UIView_1.UIView.recognizedGesture=i,i.state=UIGestureRecognizer_1.UIGestureRecognizerState.began,i.handleEvent("began"),i.emit("began",i)):(Math.abs(t.x-e.windowPoint.x)>=8||Math.abs(t.y-e.windowPoint.y)>=8)&&(UIView_1.UIView.recognizedGesture=i,i.state=UIGestureRecognizer_1.UIGestureRecognizerState.began,i.handleEvent("began"),i.emit("began",i))}}else i.state!=UIGestureRecognizer_1.UIGestureRecognizerState.began&&i.state!=UIGestureRecognizer_1.UIGestureRecognizerState.changed||(i.state=UIGestureRecognizer_1.UIGestureRecognizerState.changed,i.handleEvent("changed"),i.emit("changed",i));else e.phase==UITouch_1.UITouchPhase.ended?(i.state!=UIGestureRecognizer_1.UIGestureRecognizerState.began&&i.state!=UIGestureRecognizer_1.UIGestureRecognizerState.changed||(i.state=UIGestureRecognizer_1.UIGestureRecognizerState.ended,i.handleEvent("ended"),i.emit("ended",i),setTimeout(function(){UIView_1.UIView.recognizedGesture=void 0},0)),0==e.identifier&&(i.state=UIGestureRecognizer_1.UIGestureRecognizerState.possible)):e.phase==UITouch_1.UITouchPhase.cancelled&&(i.state!=UIGestureRecognizer_1.UIGestureRecognizerState.began&&i.state!=UIGestureRecognizer_1.UIGestureRecognizerState.changed||(i.state=UIGestureRecognizer_1.UIGestureRecognizerState.cancelled,i.handleEvent("cancelled"),i.emit("cancelled",i),setTimeout(function(){UIView_1.UIView.recognizedGesture=void 0},0)),i.state=UIGestureRecognizer_1.UIGestureRecognizerState.possible)})},t}(UIGestureRecognizer_1.UIGestureRecognizer);exports.UIPanGestureRecognizer=UIPanGestureRecognizer;
},{"./UIGestureRecognizer":19,"./UITouch":45,"./UIView":46}],29:[function(require,module,exports){
"use strict";var __extends=this&&this.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(exports,"__esModule",{value:!0});var UIGestureRecognizer_1=require("./UIGestureRecognizer"),UIPinchGestureRecognizer=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.scale=1,t.velocity=0,t}return __extends(t,e),t.prototype.handleTouch=function(t){e.prototype.handleTouch.call(this,t)},t}(UIGestureRecognizer_1.UIGestureRecognizer);exports.UIPinchGestureRecognizer=UIPinchGestureRecognizer;
},{"./UIGestureRecognizer":19}],30:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.UIPointZero={x:0,y:0};
},{}],31:[function(require,module,exports){
"use strict";var __extends=this&&this.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function o(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}();Object.defineProperty(exports,"__esModule",{value:!0});var UIView_1=require("./UIView"),UIAnimator_1=require("./UIAnimator"),UIProgressView=function(t){function e(){var e=t.call(this)||this;return e._progress=0,e._progressTintColor=void 0,e._trackTintColor=void 0,e.trackView=new UIView_1.UIView,e.progressView=new UIView_1.UIView,e.userInteractionEnabled=!1,e.progressTintColor=e.tintColor,e.trackTintColor=e.tintColor.colorWithAlphaComponent(.35),e.addSubview(e.trackView),e.addSubview(e.progressView),e}return __extends(e,t),Object.defineProperty(e.prototype,"progress",{get:function(){return this._progress},set:function(t){this._progress=t,this.layoutIfNeeded()},enumerable:!0,configurable:!0}),e.prototype.setProgress=function(t,e){var r=this;e?UIAnimator_1.UIAnimator.curve(.3,function(){r.progress=t,r.layoutIfNeeded()},void 0):this.layoutIfNeeded()},Object.defineProperty(e.prototype,"progressTintColor",{get:function(){return this._progressTintColor},set:function(t){this._progressTintColor=t,this.progressView.backgroundColor=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"trackTintColor",{get:function(){return this._trackTintColor},set:function(t){this._trackTintColor=t,this.trackView.backgroundColor=t},enumerable:!0,configurable:!0}),e.prototype.layoutSubviews=function(){t.prototype.layoutSubviews.call(this),this.trackView.frame=this.bounds,this.progressView.frame={x:0,y:0,width:this.bounds.width*this.progress,height:this.bounds.height}},e}(UIView_1.UIView);exports.UIProgressView=UIProgressView;
},{"./UIAnimator":9,"./UIView":46}],32:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var UIPrompt=function(){function t(t){this.message=t,this.confirmTitle="",this.cancelTitle="",this.placeholder="",this.defaultValue=void 0}return t.prototype.show=function(t,e){var o=window.prompt(this.message,this.defaultValue);"string"==typeof o?t&&t(o):e&&e()},t}();exports.UIPrompt=UIPrompt;
},{}],33:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.UIRectZero={x:0,y:0,width:0,height:0},exports.UIRectEqualToRect=function(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height},exports.UIRectIntersectsRect=function(t,e){return!(t.x+t.width-.1<=e.x||e.x+e.width-.1<=t.x||t.y+t.height-.1<=e.y||e.y+e.height-.1<=t.y)},exports.UIRectUnion=function(t,e){return{x:Math.min(t.x,e.x),y:Math.min(t.y,e.y),width:Math.max(t.x+t.width,e.x+e.width),height:Math.max(t.y+t.height,e.y+e.height)}},exports.UIRectIsEmpty=function(t){return 0==t.width||0==t.height};
},{}],34:[function(require,module,exports){
"use strict";var __extends=this&&this.__extends||function(){var t=function(i,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var o in i)i.hasOwnProperty(o)&&(t[o]=i[o])})(i,o)};return function(i,o){function e(){this.constructor=i}t(i,o),i.prototype=null===o?Object.create(o):(e.prototype=o.prototype,new e)}}();Object.defineProperty(exports,"__esModule",{value:!0});var UIView_1=require("./UIView"),UIColor_1=require("./UIColor"),UIRefreshAnimationView=function(t){function i(){var i=t.call(this)||this;return i.leftDot=new UIView_1.UIView,i.midDot=new UIView_1.UIView,i.rightDot=new UIView_1.UIView,i.currentIdx=0,i.leftDot.alpha=.5,i.leftDot.layer.cornerRadius=4,i.midDot.alpha=.5,i.midDot.layer.cornerRadius=4,i.rightDot.alpha=.5,i.rightDot.layer.cornerRadius=4,i.addSubview(i.leftDot),i.addSubview(i.midDot),i.addSubview(i.rightDot),i}return __extends(i,t),i.prototype.layoutSubviews=function(){t.prototype.layoutSubviews.call(this),this.leftDot.frame={x:this.bounds.width/2-4-28,y:this.bounds.height/2-4,width:8,height:8},this.midDot.frame={x:this.bounds.width/2-4,y:this.bounds.height/2-4,width:8,height:8},this.rightDot.frame={x:this.bounds.width/2+4+20,y:this.bounds.height/2-4,width:8,height:8}},i.prototype.startAnimation=function(){var t=this;this.stopAnimation(),this.currentIdx=0,this.doAnimation(),this.intervalHandler=setInterval(function(){t.currentIdx=t.currentIdx+1,3==t.currentIdx&&(t.currentIdx=0),t.doAnimation()},1250/3)},i.prototype.doAnimation=function(){this.leftDot.alpha=0==this.currentIdx?1:.5,this.midDot.alpha=1==this.currentIdx?1:.5,this.rightDot.alpha=2==this.currentIdx?1:.5},i.prototype.stopAnimation=function(){this.leftDot.alpha=.5,this.midDot.alpha=.5,this.rightDot.alpha=.5,clearInterval(this.intervalHandler)},i.prototype.tintColorDidChange=function(){t.prototype.tintColorDidChange.call(this),this.leftDot.backgroundColor=this.tintColor,this.midDot.backgroundColor=this.tintColor,this.rightDot.backgroundColor=this.tintColor},i}(UIView_1.UIView),UIRefreshControl=function(t){function i(){var i=t.call(this)||this;return i.animationView=new UIRefreshAnimationView,i.scrollView=void 0,i.enabled=!0,i.refreshing=!1,i.animationView.alpha=0,i.tintColor=UIColor_1.UIColor.gray,i}return __extends(i,t),i.prototype.tintColorDidChange=function(){t.prototype.tintColorDidChange.call(this),this.animationView.tintColor=this.tintColor},i.prototype.beginRefreshing_callFromScrollView=function(){this.refreshing=!0,this.animationView.startAnimation(),this.emit("refresh",this)},i.prototype.beginRefreshing=function(){var t=this;void 0!==this.scrollView&&(this.refreshing=!0,this.scrollView.setContentOffset({x:0,y:-this.scrollView.contentInset.top-44},!0),this.animationView.startAnimation(),setTimeout(function(){t.animationView.alpha=1,t.emit("refresh",t)},750))},i.prototype.endRefreshing=function(){this.scrollView&&this.scrollView.contentOffset.y<-this.scrollView.contentInset.top&&this.scrollView.setContentOffset({x:0,y:-this.scrollView.contentInset.top},!0),this.animationView.alpha=0,this.animationView.stopAnimation(),this.refreshing=!1},i}(UIView_1.UIView);exports.UIRefreshControl=UIRefreshControl;
},{"./UIColor":13,"./UIView":46}],35:[function(require,module,exports){
"use strict";var __extends=this&&this.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function o(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}();Object.defineProperty(exports,"__esModule",{value:!0});var UIGestureRecognizer_1=require("./UIGestureRecognizer"),UIRotationGestureRecognizer=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.rotation=1,t.velocity=0,t}return __extends(t,e),t}(UIGestureRecognizer_1.UIGestureRecognizer);exports.UIRotationGestureRecognizer=UIRotationGestureRecognizer;
},{"./UIGestureRecognizer":19}],36:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var UIScreen=function(){function e(){this.bounds={x:0,y:0,width:window.screen.width,height:window.screen.height},this.scale=window.devicePixelRatio}return e.main=new e,e}();exports.UIScreen=UIScreen;
},{}],37:[function(require,module,exports){
"use strict";var __extends=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(exports,"__esModule",{value:!0});var UIView_1=require("./UIView"),UIPoint_1=require("./UIPoint"),UISize_1=require("./UISize"),UIEdgeInsets_1=require("./UIEdgeInsets"),UIPanGestureRecognizer_1=require("./UIPanGestureRecognizer"),UIAnimator_1=require("./UIAnimator"),Scroller_1=require("./helpers/Scroller"),UIColor_1=require("./UIColor"),UIRefreshControl_1=require("./UIRefreshControl"),UIFetchMoreControl_1=require("./UIFetchMoreControl"),UIScrollView=function(t){function e(){var e=t.call(this)||this;return e._contentOffset=UIPoint_1.UIPointZero,e._contentSize=UISize_1.UISizeZero,e._contentInset=UIEdgeInsets_1.UIEdgeInsetsZero,e.directionalLockEnabled=!1,e.bounces=!0,e.alwaysBounceVertical=!1,e.alwaysBounceHorizontal=!1,e.pagingEnabled=!1,e._scrollEnabled=!0,e._showsHorizontalScrollIndicator=!0,e._showsVerticalScrollIndicator=!0,e._tracking=!1,e._dragging=!1,e._decelerating=!1,e.scrollsToTop=!1,e.panGestureRecognizer=new UIPanGestureRecognizer_1.UIPanGestureRecognizer,e.contentView=new UIView_1.UIView,e.scroller=new Scroller_1.Scroller,e.currentLockedDirection=void 0,e.horizontalScrollIndicator=new UIView_1.UIView,e.verticalScrollIndicator=new UIView_1.UIView,e.deceleratingWasCancelled=!1,e._refreshControl=void 0,e._fetchMoreControl=void 0,e.panGestureRecognizer.on("began",function(t){e.deceleratingWasCancelled=!1,e.currentLockedDirection=void 0,t.setTranslation({x:0,y:0},void 0),e.willBeginDragging()}).on("changed",function(t){var i=t.translationInView(void 0);if(e.directionalLockEnabled&&null==e.currentLockedDirection)Math.abs(i.x)>=4?e.currentLockedDirection=0:Math.abs(i.y)>=4&&(e.currentLockedDirection=1);else{e.directionalLockEnabled&&0==e.currentLockedDirection?i={x:i.x,y:0}:e.directionalLockEnabled&&1==e.currentLockedDirection&&(i={x:0,y:i.y}),e.createFetchMoreEffect(i);var n=e.createRefreshEffect(i);e.contentOffset={x:Math.max(e.contentInset.left,Math.min(Math.max(0,e.contentSize.width+e.contentInset.right-e.bounds.width),e.contentOffset.x-i.x)),y:Math.max(e.contentInset.top-(e.refreshControl&&e.refreshControl.enabled?240:0),Math.min(Math.max(0,e.contentSize.height+e.contentInset.bottom-e.bounds.height),e.contentOffset.y-(void 0!==n?n:i.y)))},t.setTranslation({x:0,y:0},void 0),e.didScroll()}}).on("ended",function(t){var i=t.velocityInView(void 0);e.directionalLockEnabled&&null==e.currentLockedDirection?i=UIPoint_1.UIPointZero:e.directionalLockEnabled&&0==e.currentLockedDirection?i={x:i.x,y:0}:e.directionalLockEnabled&&1==e.currentLockedDirection&&(i={x:0,y:i.y}),e.willEndDragging(i),void 0!==e.refreshControl&&e.refreshControl.animationView.alpha>=1?(e.didEndDragging(!1),e.willBeginDecelerating(),e.didEndDecelerating(),e.refreshControl.beginRefreshing_callFromScrollView(),e.setContentOffset({x:0,y:-e.contentInset.top-44},!0)):void 0!==e.refreshControl&&e.refreshControl.animationView.alpha>0?(e.didEndDragging(!1),e.willBeginDecelerating(),e.didEndDecelerating(),e.refreshControl.animationView.alpha=0,e.setContentOffset({x:0,y:-e.contentInset.top},!0)):e.shouldDecelerating(i)?(e.didEndDragging(!0),e.willBeginDecelerating(),e.startDecelerating(i)):(e.didEndDragging(!1),e.willBeginDecelerating(),e.didEndDecelerating())}),e.addGestureRecognizer(e.panGestureRecognizer),t.prototype.addSubview.call(e,e.contentView),e.setupScrollIndicators(),e.clipsToBounds=!0,e}return __extends(e,t),Object.defineProperty(e.prototype,"contentOffset",{get:function(){return this._contentOffset},set:function(t){this._contentOffset=t,this.resetContentViewFrame(),this.resetScrollIndicators(),this.contentOffsetDidChanged()},enumerable:!0,configurable:!0}),e.prototype.contentOffsetDidChanged=function(){},Object.defineProperty(e.prototype,"contentSize",{get:function(){return this._contentSize},set:function(t){this._contentSize=t,this.resetContentViewFrame(),this.resetLockedDirection()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"contentInset",{get:function(){return this._contentInset},set:function(t){this._contentInset=t,this.resetLockedDirection()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scrollEnabled",{get:function(){return this._scrollEnabled},set:function(t){this._scrollEnabled=t,this.panGestureRecognizer.enabled=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showsHorizontalScrollIndicator",{get:function(){return this._showsHorizontalScrollIndicator},set:function(t){this._showsHorizontalScrollIndicator=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showsVerticalScrollIndicator",{get:function(){return this._showsVerticalScrollIndicator},set:function(t){this._showsVerticalScrollIndicator=t},enumerable:!0,configurable:!0}),e.prototype.setContentOffset=function(t,e){this.scroller.abortAnimation(),this.decelerating&&this.didEndDecelerating(),e?(this.scroller.startScroll(this.contentOffset.x,this.contentOffset.y,t.x-this.contentOffset.x,t.y-this.contentOffset.y,500),this.loopScrollAnimation(!0)):(this.contentOffset=t,this.didScroll())},e.prototype.scrollRectToVisible=function(t,e){var i=this.contentOffset;t.x<this.contentOffset.x?i={x:t.x,y:i.y}:t.x+t.width>this.contentOffset.x+this.bounds.width&&(i={x:t.x+t.width-this.bounds.width,y:i.y}),t.y<this.contentOffset.y?i={x:i.x,y:t.y}:t.y+t.height>this.contentOffset.y+this.bounds.height&&(i={x:i.x,y:t.y+t.height-this.bounds.height}),i={x:Math.max(0,Math.min(this.contentSize.width-this.bounds.width,i.x)),y:Math.max(0,Math.min(this.contentSize.height-this.bounds.height,i.y))},this.setContentOffset(i,e)},Object.defineProperty(e.prototype,"tracking",{get:function(){return this._tracking},set:function(t){this._tracking=t,this.resetScrollIndicatorVisibleState()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dragging",{get:function(){return this._dragging},set:function(t){this._dragging=t,this.resetScrollIndicatorVisibleState()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"decelerating",{get:function(){return this._decelerating},set:function(t){this._decelerating=t,this.resetScrollIndicatorVisibleState()},enumerable:!0,configurable:!0}),e.prototype.resetContentViewFrame=function(){this.contentView.frame={x:-this.contentOffset.x,y:-this.contentOffset.y,width:Math.max(this.bounds.width,this.contentSize.width),height:Math.max(this.bounds.height,this.contentSize.height)}},e.prototype.resetLockedDirection=function(){var t=this.contentSize.width+this.contentInset.left+this.contentInset.right,e=this.contentSize.height+this.contentInset.top+this.contentInset.bottom;t<=this.bounds.width&&e<=this.bounds.height?this.panGestureRecognizer.lockedDirection=0:t<=this.bounds.width?this.panGestureRecognizer.lockedDirection=1:e<=this.bounds.height&&(this.panGestureRecognizer.lockedDirection=2)},e.prototype.touchesBegan=function(e){t.prototype.touchesBegan.call(this,e),this.deceleratingWasCancelled=!1,this.scroller.finished||(UIView_1.UIView.recognizedGesture=this.panGestureRecognizer,this.scroller.abortAnimation(),this.tracking=!0,this.decelerating&&(this.deceleratingWasCancelled=!0,this.didEndDecelerating()))},e.prototype.touchesEnded=function(e){t.prototype.touchesEnded.call(this,e),this.tracking=!1,this.deceleratingWasCancelled&&this.pagingEnabled&&this.startDecelerating({x:0,y:0}),this.deceleratingWasCancelled&&setTimeout(function(){UIView_1.UIView.recognizedGesture=void 0},0)},e.prototype.touchesCancelled=function(e){t.prototype.touchesCancelled.call(this,e),this.tracking=!1,this.deceleratingWasCancelled&&this.pagingEnabled&&this.startDecelerating({x:0,y:0}),this.deceleratingWasCancelled&&setTimeout(function(){UIView_1.UIView.recognizedGesture=void 0},0)},e.prototype.didScroll=function(){this.emit("didScroll",this)},e.prototype.willBeginDragging=function(){this.emit("willBeginDragging",this),this.tracking=!0,this.dragging=!0},e.prototype.willEndDragging=function(t){this.emit("willEndDragging",this,t)},e.prototype.didEndDragging=function(t){this.tracking=!1,this.dragging=!1,this.emit("didEndDragging",this,t)},e.prototype.willBeginDecelerating=function(){this.emit("willBeginDecelerating",this),this.decelerating=!0},e.prototype.didEndDecelerating=function(){this.decelerating=!1,this.emit("didEndDecelerating",this)},e.prototype.didEndScrollingAnimation=function(){this.emit("didEndScrollingAnimation",this)},e.prototype.didScrollToTop=function(){this.emit("didScrollToTop",this)},e.prototype.shouldDecelerating=function(t){return t.y>0&&this.contentOffset.y<this.contentSize.height+this.contentInset.bottom-this.bounds.height||(t.y<0&&this.contentOffset.y>-this.contentInset.top||(t.x>0&&this.contentOffset.x<this.contentSize.width+this.contentInset.right-this.bounds.width||t.x<0&&this.contentOffset.x>-this.contentInset.left))},e.prototype.startDecelerating=function(t){if(this.scroller.fling(this.contentOffset.x,this.contentOffset.y,-t.x,-t.y,-this.contentInset.left-1e3,this.contentSize.width+this.contentInset.right-this.bounds.width+1e3,-this.contentInset.top-1e3,this.contentSize.height+this.contentInset.bottom-this.bounds.height+1e3),this.pagingEnabled){this.scroller.abortAnimation();var e=Math.floor(this.contentOffset.y/this.bounds.height)*this.bounds.height,i=Math.ceil(this.contentOffset.y/this.bounds.height)*this.bounds.height,n=Math.floor(this.contentOffset.x/this.bounds.width)*this.bounds.width,o=Math.ceil(this.contentOffset.x/this.bounds.width)*this.bounds.width;this.scroller.startScroll(this.contentOffset.x,this.contentOffset.y,Math.ceil(Math.max(n,Math.min(o,Math.round(this.scroller.finalX/this.bounds.width)*this.bounds.width))-this.contentOffset.x),Math.ceil(Math.max(e,Math.min(i,Math.round(this.scroller.finalY/this.bounds.height)*this.bounds.height))-this.contentOffset.y),500)}this.loopScrollAnimation()},e.prototype.loopScrollAnimation=function(t){var e=this;if(void 0===t&&(t=!1),!this.scroller.computeScrollOffset())this.decelerating?this.didEndDecelerating():this.didEndScrollingAnimation();else{var i=-this.contentInset.top;if(this.refreshControl&&!0===this.refreshControl.refreshing&&(i-=44),!0===t&&(i=-1/0),this.contentOffset={x:Math.max(-this.contentInset.left,Math.min(Math.max(-this.contentInset.left,this.contentSize.width+this.contentInset.right-this.bounds.width),this.scroller.currX)),y:Math.max(i,Math.min(Math.max(i,this.contentSize.height+this.contentInset.bottom-this.bounds.height),this.scroller.currY))},this.didScroll(),this.contentSize.height>this.bounds.height&&Math.abs(this.scroller.currY-this.contentOffset.y)>.01)return this.scroller.forceFinished(!0),void this.didEndDecelerating();if(this.contentSize.width>this.bounds.width&&Math.abs(this.scroller.currX-this.contentOffset.x)>.01)return this.scroller.forceFinished(!0),void this.didEndDecelerating();requestAnimationFrame(function(){e.loopScrollAnimation(t)})}},e.prototype.setupScrollIndicators=function(){this.horizontalScrollIndicator.backgroundColor=new UIColor_1.UIColor(143/255,143/255,144/255,1),this.horizontalScrollIndicator.alpha=0,this.horizontalScrollIndicator.layer.cornerRadius=1,t.prototype.addSubview.call(this,this.horizontalScrollIndicator),this.verticalScrollIndicator.backgroundColor=new UIColor_1.UIColor(143/255,143/255,144/255,1),this.verticalScrollIndicator.alpha=0,this.verticalScrollIndicator.layer.cornerRadius=1,t.prototype.addSubview.call(this,this.verticalScrollIndicator)},e.prototype.resetScrollIndicatorVisibleState=function(){var t=this;this.tracking||this.dragging||this.decelerating?(this.showsHorizontalScrollIndicator&&(this.horizontalScrollIndicator.alpha=1),this.showsVerticalScrollIndicator&&(this.verticalScrollIndicator.alpha=1)):(this.horizontalScrollIndicator.alpha>0&&UIAnimator_1.UIAnimator.linear(.3,function(){t.horizontalScrollIndicator.alpha=0},void 0),this.verticalScrollIndicator.alpha>0&&UIAnimator_1.UIAnimator.linear(.3,function(){t.verticalScrollIndicator.alpha=0},void 0))},e.prototype.resetScrollIndicators=function(){var t=this.contentInset.left+this.contentInset.right+this.contentSize.width;if(t>this.bounds.width){var e=(this.contentOffset.x+this.contentInset.left)/(t-this.bounds.width),i=Math.max(36,(this.bounds.width-8)/(t/(this.bounds.width-8)));this.horizontalScrollIndicator.frame={x:4+e*(this.bounds.width-8-i),y:this.bounds.height-4,width:i,height:2}}else this.horizontalScrollIndicator.frame={x:0,y:this.bounds.height-4,width:0,height:2};var n=this.contentInset.top+this.contentInset.bottom+this.contentSize.height;if(n>this.bounds.height){var o=(this.contentOffset.y+this.contentInset.top)/(n-this.bounds.height),r=Math.max(36,(this.bounds.height-8)/(n/(this.bounds.height-8)));this.verticalScrollIndicator.frame={x:this.bounds.width-4,y:4+o*(this.bounds.height-8-r),width:2,height:r}}else this.verticalScrollIndicator.frame={x:this.bounds.width-4,y:0,width:2,height:0}},Object.defineProperty(e.prototype,"subviews",{get:function(){return this.contentView.subviews},enumerable:!0,configurable:!0}),e.prototype.insertSubviewAtIndex=function(t,e){this.contentView.insertSubviewAtIndex(t,e)},e.prototype.exchangeSubview=function(t,e){this.contentView.exchangeSubview(t,e)},e.prototype.addSubview=function(t){t instanceof UIRefreshControl_1.UIRefreshControl?this.refreshControl=t:t instanceof UIFetchMoreControl_1.UIFetchMoreControl?this.fetchMoreControl=t:this.contentView.addSubview(t)},e.prototype.insertSubviewBelowSubview=function(t,e){this.contentView.insertSubviewBelowSubview(t,e)},e.prototype.insertSubviewAboveSubview=function(t,e){this.contentView.insertSubviewAboveSubview(t,e)},e.prototype.bringSubviewToFront=function(t){this.contentView.bringSubviewToFront(t)},e.prototype.sendSubviewToBack=function(t){this.contentView.sendSubviewToBack(t)},e.prototype.layoutSubviews=function(){t.prototype.layoutSubviews.call(this),this.resetContentViewFrame(),this.resetLockedDirection(),this.refreshControl&&(this.refreshControl.animationView.frame={x:0,y:0,width:this.bounds.width,height:44})},Object.defineProperty(e.prototype,"refreshControl",{get:function(){return this._refreshControl},set:function(e){this._refreshControl=e,e&&(t.prototype.addSubview.call(this,e.animationView),e.animationView.frame={x:0,y:0,width:this.bounds.width,height:44},e.scrollView=this)},enumerable:!0,configurable:!0}),e.prototype.createRefreshEffect=function(t){if(this.refreshControl&&this.refreshControl.enabled&&this.contentSize.width<=this.bounds.width){if(this.contentOffset.y-t.y<-this.contentInset.top){var e=Math.max(0,Math.min(1,(-this.contentInset.top-(this.contentOffset.y-t.y))/88));return this.refreshControl.animationView.alpha=e,t.y/3}this.refreshControl.animationView.alpha=0}},Object.defineProperty(e.prototype,"fetchMoreControl",{get:function(){return this._fetchMoreControl},set:function(t){this._fetchMoreControl=t,t&&(t.scrollView=this)},enumerable:!0,configurable:!0}),e.prototype.createFetchMoreEffect=function(t){if(this.fetchMoreControl&&this.fetchMoreControl.enabled&&this.contentSize.width<=this.bounds.width){if(this.fetchMoreControl.fetching)return!0;if(this.contentOffset.y-t.y>this.contentSize.height+this.contentInset.bottom-2*this.bounds.height)return this.fetchMoreControl.beginFetching(),!0}return!1},e}(UIView_1.UIView);exports.UIScrollView=UIScrollView;
},{"./UIAnimator":9,"./UIColor":13,"./UIEdgeInsets":15,"./UIFetchMoreControl":17,"./UIPanGestureRecognizer":28,"./UIPoint":30,"./UIRefreshControl":34,"./UISize":38,"./UIView":46,"./helpers/Scroller":52}],38:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.UISizeZero={width:0,height:0},exports.UISizeEqualToSize=function(e,t){return e.width===t.width&&e.height===t.height};
},{}],39:[function(require,module,exports){
"use strict";var __extends=this&&this.__extends||function(){var t=function(i,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var e in i)i.hasOwnProperty(e)&&(t[e]=i[e])})(i,e)};return function(i,e){function n(){this.constructor=i}t(i,e),i.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(exports,"__esModule",{value:!0});var UIView_1=require("./UIView"),UIAnimator_1=require("./UIAnimator"),UILongPressGestureRecognizer_1=require("./UILongPressGestureRecognizer"),ThumbView=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return __extends(i,t),i.prototype.pointInside=function(t){return t.x>=-22&&t.y>=-22&&t.x<=this.frame.width+22&&t.y<=this.frame.height+22},i}(UIView_1.UIView),UISlider=function(t){function i(){var i=t.call(this)||this;return i.value=.5,i.minimumValue=0,i.maximumValue=1,i._minimumTrackTintColor=void 0,i._maximumTrackTintColor=void 0,i._thumbTintColor=void 0,i.minimumTrackView=new UIView_1.UIView,i.maximumTrackView=new UIView_1.UIView,i.thumbView=new ThumbView,i.thumbOutLightView=new UIView_1.UIView,i._tracking=!1,i.previousLocation=void 0,i.tintColor&&(i.minimumTrackTintColor=i.tintColor,i.maximumTrackTintColor=i.tintColor.colorWithAlphaComponent(.3),i.thumbTintColor=i.tintColor),i.maximumTrackView.userInteractionEnabled=!1,i.addSubview(i.maximumTrackView),i.minimumTrackView.userInteractionEnabled=!1,i.addSubview(i.minimumTrackView),i.thumbOutLightView.userInteractionEnabled=!1,i.addSubview(i.thumbOutLightView),i.addSubview(i.thumbView),i.setupTouches(),i}return __extends(i,t),Object.defineProperty(i.prototype,"minimumTrackTintColor",{get:function(){return this._minimumTrackTintColor},set:function(t){this._minimumTrackTintColor=t,this.minimumTrackView.backgroundColor=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"maximumTrackTintColor",{get:function(){return this._maximumTrackTintColor},set:function(t){this._maximumTrackTintColor=t,this.maximumTrackView.backgroundColor=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"thumbTintColor",{get:function(){return this._thumbTintColor},set:function(t){this._thumbTintColor=t,t&&(this.thumbView.backgroundColor=t,this.thumbOutLightView.backgroundColor=t.colorWithAlphaComponent(.2))},enumerable:!0,configurable:!0}),i.prototype.setValue=function(t,i){var e=this;i?(this.value=t,UIAnimator_1.UIAnimator.curve(.5,function(){e.layoutSubviews()},void 0)):(this.value=t,this.layoutSubviews())},Object.defineProperty(i.prototype,"tracking",{get:function(){return this._tracking},set:function(t){var i=this;this._tracking!==t&&(this._tracking=t,UIAnimator_1.UIAnimator.linear(.15,function(){t?(i.thumbView.transform={a:1.4,b:0,c:0,d:1.4,tx:0,ty:0},i.thumbOutLightView.transform={a:2.4,b:0,c:0,d:2.4,tx:0,ty:0}):(i.thumbView.transform={a:1,b:0,c:0,d:1,tx:0,ty:0},i.thumbOutLightView.transform={a:1,b:0,c:0,d:1,tx:0,ty:0})},void 0))},enumerable:!0,configurable:!0}),i.prototype.setupTouches=function(){var t=this,i=new UILongPressGestureRecognizer_1.UILongPressGestureRecognizer;i.on("began",function(i){t.previousLocation=i.locationInView(t),t.tracking=!0}),i.on("changed",function(i){var e=t.previousLocation;if(e){var n=i.locationInView(t),r=n.x-e.x;t.previousLocation=n;var o=t.value+r/t.frame.width*(t.maximumValue-t.minimumValue);t.value=Math.max(t.minimumValue,Math.min(t.maximumValue,o)),t.emit("valueChanged",t),t.layoutSubviews()}}),i.on("ended",function(){t.tracking=!1}),i.on("cancelled",function(){t.tracking=!1}),i.minimumPressDuration=0,this.thumbView.addGestureRecognizer(i)},i.prototype.layoutSubviews=function(){t.prototype.layoutSubviews.call(this);var i=Math.max(0,Math.min(1,(this.value-this.minimumValue)/(this.maximumValue-this.minimumValue)));this.maximumTrackView.frame={x:0,y:(this.bounds.height-4)/2,width:this.bounds.width,height:4},this.minimumTrackView.frame={x:0,y:(this.bounds.height-4)/2,width:this.bounds.width*i,height:4},this.thumbOutLightView.frame={x:this.bounds.width*i-7.5,y:(this.bounds.height-15)/2,width:15,height:15},this.thumbOutLightView.layer.cornerRadius=7.5,this.thumbView.frame={x:this.bounds.width*i-7.5,y:(this.bounds.height-15)/2,width:15,height:15},this.thumbView.layer.cornerRadius=7.5},i.prototype.pointInside=function(t){return t.x>=-22&&t.y>=-(44-this.frame.height)/2&&t.x<=this.frame.width+22&&t.y<=this.frame.height+(44-this.frame.height)/2},i}(UIView_1.UIView);exports.UISlider=UISlider;
},{"./UIAnimator":9,"./UILongPressGestureRecognizer":24,"./UIView":46}],40:[function(require,module,exports){
"use strict";var __extends=this&&this.__extends||function(){var t=function(i,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var e in i)i.hasOwnProperty(e)&&(t[e]=i[e])})(i,e)};return function(i,e){function n(){this.constructor=i}t(i,e),i.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(exports,"__esModule",{value:!0});var UIView_1=require("./UIView"),UIColor_1=require("./UIColor"),UIAnimator_1=require("./UIAnimator"),UILongPressGestureRecognizer_1=require("./UILongPressGestureRecognizer"),ThumbView=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return __extends(i,t),i.prototype.pointInside=function(t){return t.x>=-22&&t.y>=-22&&t.x<=this.frame.width+22&&t.y<=this.frame.height+22},i}(UIView_1.UIView),UISwitch=function(t){function i(){var i=t.call(this)||this;return i.onTintColor=i.tintColor,i.thumbTintColor=UIColor_1.UIColor.white,i._isOn=!1,i.tintView=new UIView_1.UIView,i.thumbView=new ThumbView,i.thumbOutLightView=new UIView_1.UIView,i._tracking=!1,i.touchChanged=!1,i.tintView.userInteractionEnabled=!1,i.addSubview(i.tintView),i.thumbOutLightView.userInteractionEnabled=!1,i.addSubview(i.thumbOutLightView),i.thumbView.layer.shadowColor=new UIColor_1.UIColor(0,0,0,1),i.thumbView.layer.shadowRadius=2,i.thumbView.layer.shadowOffset={width:0,height:3},i.thumbView.layer.shadowOpacity=.2,i.addSubview(i.thumbView),i.setupTouches(),i}return __extends(i,t),Object.defineProperty(i.prototype,"isOn",{get:function(){return this._isOn},set:function(t){this._isOn=t,this.layoutSubviews()},enumerable:!0,configurable:!0}),i.prototype.setOn=function(t,i){var e=this;i?UIAnimator_1.UIAnimator.curve(.2,function(){e.isOn=t},void 0):this.isOn=t},Object.defineProperty(i.prototype,"tracking",{get:function(){return this._tracking},set:function(t){var i=this;this._tracking!=t&&(this._tracking=t,UIAnimator_1.UIAnimator.linear(.15,function(){i.thumbOutLightView.transform=t?{a:1.6,b:0,c:0,d:1.6,tx:0,ty:0}:{a:1,b:0,c:0,d:1,tx:0,ty:0}},void 0))},enumerable:!0,configurable:!0}),i.prototype.setupTouches=function(){var t=this,i=new UILongPressGestureRecognizer_1.UILongPressGestureRecognizer;i.on("began",function(){t.touchChanged=!1,t.tracking=!0}).on("changed",function(i){var e=i.locationInView(t).x>t.bounds.width/2;t.isOn!=e&&(t.touchChanged=!0,UIAnimator_1.UIAnimator.curve(.2,function(){t.isOn=e},void 0))}).on("ended",function(i){if(t.touchChanged)t.emit("valueChanged",t);else{var e=i.locationInView(t);t.pointInside(e)&&UIAnimator_1.UIAnimator.curve(.2,function(){t.isOn=!t.isOn},function(){t.emit("valueChanged",t)})}t.tracking=!1}).on("cancelled",function(){t.touchChanged&&t.emit("valueChanged",t),t.tracking=!1}),i.minimumPressDuration=0,this.thumbView.addGestureRecognizer(i)},i.prototype.layoutSubviews=function(){t.prototype.layoutSubviews.call(this),this.tintView.frame={x:(this.bounds.width-34)/2,y:(this.bounds.height-14)/2,width:34,height:14},this.tintView.layer.cornerRadius=7,this.isOn?(this.thumbView.frame={x:this.tintView.frame.x+this.tintView.frame.width-20,y:(this.bounds.height-20)/2,width:20,height:20},this.thumbView.layer.cornerRadius=10,this.onTintColor&&(this.thumbView.backgroundColor=this.onTintColor,this.tintView.backgroundColor=this.onTintColor.colorWithAlphaComponent(.5),this.thumbOutLightView.frame={x:this.tintView.frame.x+this.tintView.frame.width-20,y:(this.bounds.height-20)/2,width:20,height:20},this.thumbOutLightView.layer.cornerRadius=10,this.thumbOutLightView.backgroundColor=this.onTintColor.colorWithAlphaComponent(.2))):(this.thumbView.frame={x:this.tintView.frame.x,y:(this.bounds.height-20)/2,width:20,height:20},this.thumbView.layer.cornerRadius=10,this.thumbView.backgroundColor=this.thumbTintColor,this.tintView.backgroundColor=new UIColor_1.UIColor(132/255,132/255,132/255,1),this.thumbOutLightView.frame={x:this.tintView.frame.x,y:(this.bounds.height-20)/2,width:20,height:20},this.thumbOutLightView.layer.cornerRadius=10,this.thumbOutLightView.backgroundColor=new UIColor_1.UIColor(132/255,132/255,132/255,.2))},i.prototype.pointInside=function(t){return t.x>=0&&t.y>=-(44-this.frame.height)/2&&t.x<=this.frame.width&&t.y<=this.frame.height+(44-this.frame.height)/2},i}(UIView_1.UIView);exports.UISwitch=UISwitch;
},{"./UIAnimator":9,"./UIColor":13,"./UILongPressGestureRecognizer":24,"./UIView":46}],41:[function(require,module,exports){
"use strict";var __extends=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function o(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}();Object.defineProperty(exports,"__esModule",{value:!0});var UIView_1=require("./UIView"),UIScrollView_1=require("./UIScrollView"),UIColor_1=require("./UIColor"),UIEdgeInsets_1=require("./UIEdgeInsets"),UIIndexPath_1=require("./UIIndexPath"),UIRect_1=require("./UIRect"),UIAnimator_1=require("./UIAnimator"),UITouch_1=require("./UITouch"),UITableView=function(e){function t(){var t=e.call(this)||this;return t.rowHeight=44,t._tableHeaderView=void 0,t._tableFooterView=void 0,t.separatorColor=new UIColor_1.UIColor(188/255,186/255,193/255,1),t.separatorInset=UIEdgeInsets_1.UIEdgeInsetsZero,t.allowsSelection=!0,t.allowsMultipleSelection=!1,t._registeredCells={},t._reusableCells=[],t._cachedCells={},t._selectedRows=[],t._highlightedRow=void 0,t._needsReload=!1,t._sections=[],t.firstTouchPoint=void 0,t.firstTouchCell=void 0,t.alwaysBounceVertical=!0,t}return __extends(t,e),Object.defineProperty(t.prototype,"tableHeaderView",{get:function(){return this._tableHeaderView},set:function(e){this._tableHeaderView&&this._tableHeaderView.removeFromSuperview(),this._tableHeaderView=e,this._setContentSize(),e&&this.addSubview(e),this._layoutTableView()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tableFooterView",{get:function(){return this._tableFooterView},set:function(e){this._tableFooterView&&this._tableFooterView.removeFromSuperview(),this._tableFooterView=e,this._setContentSize(),e&&this.addSubview(e),this._layoutTableView()},enumerable:!0,configurable:!0}),t.prototype.register=function(e,t){this._registeredCells[t]=e},t.prototype.dequeueReusableCell=function(e,t){for(var i=0;i<this._reusableCells.length;i++)if(this._reusableCells[i].reuseIdentifier==e){var o=this._reusableCells[i];return this._reusableCells.splice(i,1),o}var r=this._registeredCells[e]?this._registeredCells[e]():new UITableViewCell;return r.reuseIdentifier=e,r},t.prototype.reloadData=function(){var e=this;Object.keys(this._cachedCells).forEach(function(t){e._cachedCells[t].removeFromSuperview()}),this._reusableCells.forEach(function(e){return e.removeFromSuperview()}),this._reusableCells=[],this._cachedCells={},this._updateSectionsCache(),this._setContentSize(),this._needsReload=!1,this._layoutTableView()},t.prototype.selectRow=function(e,t){var i=this;this.allowsMultipleSelection||(this._selectedRows.forEach(function(e){for(var t=Object.keys(i._cachedCells).map(function(e){return i._cachedCells[e]}),o=0;o<t.length;o++){var r=t[o];if(r.currentIndexPath&&r.currentIndexPath.mapKey()===e){r.selected=!1,r.emit("selected",r,!1,!1);break}}}),this._selectedRows=[]),this._selectedRows.push(e.mapKey());for(var o=Object.keys(this._cachedCells).map(function(e){return i._cachedCells[e]}),r=function(i){var r=o[i];if(r.currentIndexPath&&r.currentIndexPath.mapKey()===e.mapKey())return t?UIAnimator_1.UIAnimator.linear(.3,function(){r.selected=!0},void 0):r.selected=!0,r.emit("selected",r,!0,t),"break"},h=0;h<o.length;h++){if("break"===r(h))break}},t.prototype.deselectRow=function(e,t){var i=this,o=this._selectedRows.indexOf(e.mapKey());o>=0&&this._selectedRows.splice(o,1);for(var r=Object.keys(this._cachedCells).map(function(e){return i._cachedCells[e]}),h=function(i){var o=r[i];if(o.currentIndexPath&&o.currentIndexPath.mapKey()===e.mapKey())return t?UIAnimator_1.UIAnimator.linear(.3,function(){o.selected=!1},void 0):o.selected=!1,o.emit("selected",o,!1,!1),"break"},n=0;n<r.length;n++){if("break"===h(n))break}},t.prototype.numberOfSections=function(){var e=this.val("numberOfSections");return"number"==typeof e?e:1},t.prototype.numberOfRows=function(e){var t=this.val("numberOfRows",e);return"number"==typeof t?t:0},t.prototype.heightForRow=function(e){var t=this.val("heightForRow",e);return"number"==typeof t?t:this.rowHeight},t.prototype.cellForRow=function(e){return this.val("cellForRow",e)||new UITableViewCell},t.prototype.viewForHeader=function(e){return this.val("viewForHeader",e)},t.prototype.heightForHeader=function(e){var t=this.val("heightForHeader",e);return"number"==typeof t?t:0},t.prototype.viewForFooter=function(e){return this.val("viewForFooter",e)},t.prototype.heightForFooter=function(e){var t=this.val("heightForFooter",e);return"number"==typeof t?t:0},t.prototype.didSelectRow=function(e){},t.prototype.didDeselectRow=function(e){},t.prototype.contentOffsetDidChanged=function(){this._layoutTableView()},t.prototype.layoutSubviews=function(){e.prototype.layoutSubviews.call(this),this._layoutTableView()},t.prototype._updateSectionsCache=function(){var e=this;this._sections.forEach(function(e){e.headerView&&e.headerView.removeFromSuperview(),e.footerView&&e.footerView.removeFromSuperview()}),this._sections=[];for(var t=this.numberOfSections(),i=function(t){var i=o.numberOfRows(t),r=new UITableViewSection,h=Array(i).fill(0).map(function(i,o){return e.heightForRow(new UIIndexPath_1.UIIndexPath(o,t))}),n=h.length>0?h.reduce(function(e,t){return e+t}):0,s=o.viewForHeader(t);s?(o.addSubview(s),r.headerView=s,r.headerHeight=o.heightForHeader(t)):r.headerHeight=0;var c=o.viewForHeader(t);c?(o.addSubview(c),r.footerView=c,r.footerHeight=o.heightForFooter(t)):r.footerHeight=0,r.rowsHeight=n,r.setNumberOfRows(i,h),o._sections.push(r)},o=this,r=0;r<t;r++)i(r)},t.prototype._updateSectionsCacheIfNeeded=function(){0==this._sections.length&&this._updateSectionsCache()},t.prototype._setContentSize=function(){this._updateSectionsCacheIfNeeded();var e=this.tableHeaderView?this.tableHeaderView.frame.height:0,t=this._sections.length>0?this._sections.map(function(e){return e.sectionHeight()}).reduce(function(e,t){return e+t}):0,i=this.tableFooterView?this.tableFooterView.frame.height:0;this.contentSize={width:0,height:e+t+i}},t.prototype._layoutTableView=function(){var e=this,t={width:this.bounds.width,height:this.bounds.height},i={x:0,y:this.contentOffset.y,width:t.width,height:t.height},o=0;this.tableHeaderView&&(this.tableHeaderView.frame={x:0,y:0,width:t.width,height:this.tableHeaderView.frame.height},o+=this.tableHeaderView.frame.height);var r=this._cachedCells,h=this._sections.length;this._cachedCells={};for(var n=0;n<h;n++){var s=this._rectForSection(n);if(o+=s.height,UIRect_1.UIRectIntersectsRect(s,i)){var c,a=this._rectForHeaderInSection(n),l=this._rectForFooterInSection(n),d=this._sections[n],u=d.numberOfRows;d.headerView&&(d.headerView.frame=a),d.footerView&&(d.footerView.frame=l);for(var f=0,w=Math.max(0,d.numberOfRows-1);;){if(Math.abs(w-f)<=1){c=f;break}var _=Math.ceil((w+f)/2),p=new UIIndexPath_1.UIIndexPath(_,n);if((b=this._rectForRowAtIndexPath(p)).y<=this.contentOffset.y&&b.y+b.height>=this.contentOffset.y){c=_;break}b.y+b.height<this.contentOffset.y?f=_:b.y>this.contentOffset.y&&(w=_)}for(var g=0,I=c;I<u;I++){g++;p=new UIIndexPath_1.UIIndexPath(I,n);var b=this._rectForRowAtIndexPath(p);if(UIRect_1.UIRectIntersectsRect(b,i)&&b.height>0){var v=r[p.mapKey()]||this.cellForRow(p);v.currentIndexPath=p,v.currentSectionRecord=d,this._cachedCells[p.mapKey()]=v,delete r[p.mapKey()],v.highlighted=this._highlightedRow==p.mapKey(),v.emit("highlighted",v,v.highlighted,!1),v.selected=this._selectedRows.indexOf(p.mapKey())>=0,v.emit("selected",v,v.selected,!1),v.frame=b,v.backgroundColor=this.backgroundColor,null==v.superview&&this.addSubview(v),v.hidden=!1}else if(g>10)break}}}Object.keys(r).forEach(function(t){var i=r[t];i.reuseIdentifier?e._reusableCells.push(i):i.hidden=!0});var y=Object.keys(this._cachedCells).map(function(t){return e._cachedCells[t]});this._reusableCells.forEach(function(e){UIRect_1.UIRectIntersectsRect(e.frame,i)&&y.indexOf(e)<0&&(e.hidden=!0)}),this.tableFooterView&&(this.tableFooterView.frame={x:0,y:o,width:t.width,height:this.tableFooterView.frame.height})},t.prototype._rectForSection=function(e){return this._updateSectionsCacheIfNeeded(),this._UIRectFromVerticalOffset(this._offsetForSection(e),this._sections[e].sectionHeight())},t.prototype._rectForHeaderInSection=function(e){return this._updateSectionsCacheIfNeeded(),this._UIRectFromVerticalOffset(this._offsetForSection(e),this._sections[e].headerHeight)},t.prototype._rectForFooterInSection=function(e){this._updateSectionsCacheIfNeeded();var t=this._sections[e],i=this._offsetForSection(e);return i+=t.headerHeight,i+=t.rowsHeight,this._UIRectFromVerticalOffset(i,this._sections[e].footerHeight)},t.prototype._rectForRowAtIndexPath=function(e){if(this._updateSectionsCacheIfNeeded(),e.section<this._sections.length){var t=this._sections[e.section];if(e.row<t.numberOfRows){var i=this._offsetForSection(e.section);i+=t.headerHeight;for(var o=0;o<e.row;o++)i+=t.rowHeights[o];return this._UIRectFromVerticalOffset(i,t.rowHeights[e.row])}}return UIRect_1.UIRectZero},t.prototype._offsetForSection=function(e){for(var t=this.tableHeaderView?this.tableHeaderView.frame.height:0,i=0;i<e;i++)t+=this._sections[i].sectionHeight();return t},t.prototype._cellForRow=function(e){return this._cachedCells[e.mapKey()]},t.prototype._UIRectFromVerticalOffset=function(e,t){return{x:0,y:e,width:this.bounds.width,height:t}},t.prototype.touchesBegan=function(t){e.prototype.touchesBegan.call(this,t);var i=t[0];void 0!==i&&this.handleTouch(UITouch_1.UITouchPhase.began,i)},t.prototype.touchesMoved=function(t){e.prototype.touchesMoved.call(this,t);var i=t[0];void 0!==i&&this.handleTouch(UITouch_1.UITouchPhase.moved,i)},t.prototype.touchesEnded=function(t){e.prototype.touchesEnded.call(this,t);var i=t[0];void 0!==i&&this.handleTouch(UITouch_1.UITouchPhase.ended,i)},t.prototype.touchesCancelled=function(t){e.prototype.touchesCancelled.call(this,t);var i=t[0];void 0!==i&&this.handleTouch(UITouch_1.UITouchPhase.cancelled,i)},t.prototype.handleTouch=function(e,t){var i=this;if(this.allowsSelection)switch(e){case UITouch_1.UITouchPhase.began:if(!this.tracking){for(var o=t.view,r=!0;void 0!==o&&!(o instanceof UITableViewCell);)o.gestureRecognizers.length>0&&(r=!1),o=o.superview;r&&(this.firstTouchPoint=t.windowPoint,o instanceof UITableViewCell&&(this.firstTouchCell=o,setTimeout(function(){o instanceof UITableViewCell&&void 0!==i.firstTouchPoint&&(o.currentIndexPath&&(i._highlightedRow=o.currentIndexPath.mapKey()),o.highlighted=!0,o.emit("highlighted",o,!0,!1))},150)))}break;case UITouch_1.UITouchPhase.moved:void 0!==this.firstTouchPoint&&t.windowPoint&&(void 0!==UIView_1.UIView.recognizedGesture||Math.abs(t.windowPoint.y-this.firstTouchPoint.y)>8)&&(this._highlightedRow=void 0,Object.keys(this._cachedCells).map(function(e){return i._cachedCells[e]}).forEach(function(e){e.highlighted=!1,e.emit("highlighted",e,!0,!1)}),this.firstTouchPoint=void 0,this.firstTouchCell=void 0);break;case UITouch_1.UITouchPhase.ended:if(this.firstTouchCell){var h=this.firstTouchCell;if(this._highlightedRow=void 0,this.allowsMultipleSelection||(this._selectedRows.forEach(function(e){Object.keys(i._cachedCells).map(function(e){return i._cachedCells[e]}).forEach(function(t){t.currentIndexPath&&t.currentIndexPath.mapKey()===e&&(t.selected=!1,t.emit("selected",t,!1,!1),i.emit("didDeselectRow",t.currentIndexPath,t))})}),this._selectedRows=[]),this.firstTouchPoint=void 0,this.firstTouchCell=void 0,this._highlightedRow=void 0,Object.keys(this._cachedCells).map(function(e){return i._cachedCells[e]}).forEach(function(e){e.highlighted=!1,e.emit("highlighted",e,!1,!1)}),h.currentIndexPath){var n=h.currentIndexPath.mapKey(),s=this._selectedRows.indexOf(n);s>=0?this._selectedRows.splice(s,1):this._selectedRows.push(n)}h.selected=!h.selected,h.emit("selected",h,h.selected,!1),h.selected?(h.currentIndexPath&&this.didSelectRow(h.currentIndexPath),this.emit("didSelectRow",h.currentIndexPath,h)):(h.currentIndexPath&&this.didDeselectRow(h.currentIndexPath),this.emit("didDeselectRow",h.currentIndexPath,h))}else this.firstTouchPoint=void 0,this.firstTouchCell=void 0,this._highlightedRow=void 0,Object.keys(this._cachedCells).map(function(e){return i._cachedCells[e]}).forEach(function(e){e.highlighted=!1,e.emit("highlighted",e,!1,!1)});break;case UITouch_1.UITouchPhase.cancelled:this.firstTouchPoint=void 0,this.firstTouchCell=void 0,this._highlightedRow=void 0,Object.keys(this._cachedCells).map(function(e){return i._cachedCells[e]}).forEach(function(e){e.highlighted=!1,e.emit("highlighted",e,!1,!1)})}},t}(UIScrollView_1.UIScrollView);exports.UITableView=UITableView;var UITableViewSection=function(){function e(){this.rowsHeight=0,this.headerHeight=0,this.footerHeight=0,this.numberOfRows=0,this.rowHeights=[],this.headerView=void 0,this.footerView=void 0}return e.prototype.sectionHeight=function(){return this.headerHeight+this.rowsHeight+this.footerHeight},e.prototype.setNumberOfRows=function(e,t){this.numberOfRows=e,this.rowHeights=t},e}(),UITableViewCell=function(e){function t(){var t=e.call(this)||this;return t.selectionView=new UIView_1.UIView,t.contentView=new UIView_1.UIView,t.reuseIdentifier=void 0,t.hasSelectionStyle=!0,t._selected=!1,t._highlighted=!1,t.currentIndexPath=void 0,t.currentSectionRecord=void 0,t.restoringContentViewBackgroundColor=void 0,t.selectionView.alpha=0,t.selectionView.backgroundColor=new UIColor_1.UIColor(208/255,208/255,208/255,1),t.contentView.backgroundColor=UIColor_1.UIColor.white,t.addSubview(t.selectionView),t.addSubview(t.contentView),t}return __extends(t,e),Object.defineProperty(t.prototype,"selected",{get:function(){return this._selected},set:function(e){this._selected=e,this.onStateChanged()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"highlighted",{get:function(){return this._highlighted},set:function(e){this._highlighted=e,this.onStateChanged()},enumerable:!0,configurable:!0}),t.prototype.onStateChanged=function(){this.hasSelectionStyle&&(this.selected||this.highlighted?(null==this.restoringContentViewBackgroundColor&&(this.restoringContentViewBackgroundColor=this.contentView.backgroundColor),this.selectionView.alpha=1,this.contentView.backgroundColor=UIColor_1.UIColor.clear):(this.selectionView.alpha=0,null!=this.restoringContentViewBackgroundColor&&(this.contentView.backgroundColor=this.restoringContentViewBackgroundColor,this.restoringContentViewBackgroundColor=void 0)))},t.prototype.layoutSubviews=function(){e.prototype.layoutSubviews.call(this),this.selectionView.frame=this.bounds,this.contentView.frame=this.bounds},t}(UIView_1.UIView);exports.UITableViewCell=UITableViewCell;
},{"./UIAnimator":9,"./UIColor":13,"./UIEdgeInsets":15,"./UIIndexPath":22,"./UIRect":33,"./UIScrollView":37,"./UITouch":45,"./UIView":46}],42:[function(require,module,exports){
"use strict";var __extends=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(exports,"__esModule",{value:!0});var UITouch_1=require("./UITouch"),UIGestureRecognizer_1=require("./UIGestureRecognizer"),UIView_1=require("./UIView"),UITapGestureRecognizer=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.numberOfTapsRequired=1,t.numberOfTouchesRequired=1,t.beganPoints={},t.validPointsCount=0,t}return __extends(t,e),t.prototype.handleTouch=function(t){var n=this;e.prototype.handleTouch.call(this,t),t.forEach(function(e){if(e.phase==UITouch_1.UITouchPhase.began){if(null!=UIView_1.UIView.recognizedGesture)return void(n.beganPoints={});e.windowPoint&&(n.beganPoints[e.identifier]=e.windowPoint)}else if(e.phase==UITouch_1.UITouchPhase.moved)e.windowPoint&&n.beganPoints[e.identifier]&&(Math.abs(n.beganPoints[e.identifier].x-e.windowPoint.x)>=22||Math.abs(n.beganPoints[e.identifier].y-e.windowPoint.y)>=22)&&delete n.beganPoints[e.identifier];else if(e.phase==UITouch_1.UITouchPhase.ended){if(null!=UIView_1.UIView.recognizedGesture)return n.beganPoints={},n.state=UIGestureRecognizer_1.UIGestureRecognizerState.possible,void(n.validPointsCount=0);e.tapCount>=n.numberOfTapsRequired&&null!=n.beganPoints[e.identifier]&&n.validPointsCount++,delete n.beganPoints[e.identifier],n.validPointsCount>=n.numberOfTouchesRequired&&(UIView_1.UIView.recognizedGesture=n,n.state=UIGestureRecognizer_1.UIGestureRecognizerState.ended,n.handleEvent("touch"),n.emit("touch",n),setTimeout(function(){UIView_1.UIView.recognizedGesture=void 0},0)),0!=Object.keys(n.beganPoints).length&&n.state!=UIGestureRecognizer_1.UIGestureRecognizerState.ended||(n.state=UIGestureRecognizer_1.UIGestureRecognizerState.possible,n.validPointsCount=0)}})},t}(UIGestureRecognizer_1.UIGestureRecognizer);exports.UITapGestureRecognizer=UITapGestureRecognizer;
},{"./UIGestureRecognizer":19,"./UITouch":45,"./UIView":46}],43:[function(require,module,exports){
"use strict";var __extends=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(exports,"__esModule",{value:!0});var UIView_1=require("./UIView"),UIColor_1=require("./UIColor"),UILabel_1=require("./UILabel"),UIEnums_1=require("./UIEnums"),UIButton_1=require("./UIButton"),UIImage_1=require("./UIImage"),clearButtonImage=new UIImage_1.UIImage({name:"icon_clear@3x",base64:"iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAMAAADyHTlpAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAABjUExURUdwTKqqqo+OlZGRto+OlZOTmY+OlY+OlJCQlpCQlZGOlpGRnZCQmY+OlJCOlJCOlI+OlI+OlJCOlI+OlJCOlI+OlI+PlI+OlI+OlI+OlI+PlI+OlP///4+OlI+PlY+PlI+OlI/lPb8AAAAgdFJOUwAG4AfzLcP7VS5mFR7Zob+l/Y/eiPd89vXum/AB+HuJvx1C8wAAASxJREFUOMuVlUeigzAMRAWYXkMnEKL7n/LzaRaOKZoVwm+hMpYBjrLHLI2FiNNstOFCdl4gUZGf0VHyQkWvJNKARvlBjarSUMnQwRM54ZH0TTyV6R9IgRcShA1NvJS552A4eCNnq+2LtyrXflb3aLX0N5F/mp6ed638TuZpyhm9rSFwt8ANwHrLuf3PON/D1ppCb2VdbwqsZj/Mp1A6pJvzWdiZhEEmVEzdJ8kFO7uQEJBDH2oSrYDn7h/ksIYMNayGxAxS1LAaElOI8YRVSIxB9dTGqiQKDspIgFEWo1mPRzA+H6xN7dL/2AU6ahdiwubXhO3BhAdrA7X2oFqbXpi2ozX3jXJhIPo8voaMy81ZGYxFxFlvnKXJWcWcBc95NliP0VJfvT1xtVIN/AEiR40jdo0zSQAAAABJRU5ErkJggg==",renderingMode:UIImage_1.UIImageRenderingMode.alwaysOriginal}),NativeEditText=function(e){function t(){var t=e.call(this)||this;return t.inputElement=document.createElement("input"),t.inputElement.style.position="absolute",t.inputElement.style.backgroundColor="transparent",t.inputElement.style.width="100%",t.inputElement.style.height="100%",t.inputElement.style.border="none",t.inputElement.style.outline="none",t.inputElement.style.color="black",t.inputElement.style.fontSize="14px",t.inputElement.type="text","Apple Computer, Inc."===navigator.vendor&&"iPhone"===navigator.platform&&(t.inputElement.style.marginLeft="-8px",t.inputElement.style.marginTop="-3px"),t.domElement.appendChild(t.inputElement),t}return __extends(t,e),t}(UIView_1.UINativeTouchView),UITextField=function(e){function t(){var t=e.call(this)||this;return t.editText=new NativeEditText,t.placeholderLabel=new UILabel_1.UILabel,t._oldValue="",t._textColor=void 0,t._font=void 0,t._textAlignment=UIEnums_1.UITextAlignment.left,t.clearsOnBeginEditing=!1,t.editing=!1,t._clearButtonMode=UIEnums_1.UITextFieldViewMode.never,t._leftView=void 0,t._leftViewMode=UIEnums_1.UITextFieldViewMode.never,t._rightView=void 0,t._rightViewMode=UIEnums_1.UITextFieldViewMode.never,t.clearsOnInsertion=!1,t._autocapitalizationType=UIEnums_1.UITextAutocapitalizationType.none,t._autocorrectionType=UIEnums_1.UITextAutocorrectionType.default,t._spellCheckingType=UIEnums_1.UITextSpellCheckingType.default,t._keyboardType=UIEnums_1.UIKeyboardType.default,t.returnKeyType=UIEnums_1.UIReturnKeyType.default,t._secureTextEntry=!1,t.clearButtonView=(new UIButton_1.UIButton).on("touchUpInside",function(){!1!==t.val("shouldClear")&&(t.text="")}),t.backgroundColor=UIColor_1.UIColor.white,t.addSubview(t.editText),t.clearButtonView.hidden=!0,t.clearButtonView.setImage(clearButtonImage,UIEnums_1.UIControlState.normal),t.addSubview(t.clearButtonView),t.placeholderLabel.alpha=.25,t.addSubview(t.placeholderLabel),t.editText.inputElement.addEventListener("focus",function(){!1!==t.val("shouldBeginEditing",t)?(t.editing=!0,t.clearsOnBeginEditing&&(t.text=""),t._oldValue=t.editText.inputElement.value,t.emit("didBeginEditing",t)):t.editText.inputElement.blur()}),t.editText.inputElement.addEventListener("blur",function(){!1!==t.val("shouldEndEditing",t)?(t.editing=!1,t.emit("didEndEditing",t)):t.editText.inputElement.focus()}),t.editText.inputElement.addEventListener("input",function(e){t.keyboardType!==UIEnums_1.UIKeyboardType.numberPad&&t.keyboardType!==UIEnums_1.UIKeyboardType.decimalPad||t.editText.inputElement.checkValidity()||(t.editText.inputElement.value=t._oldValue),"insertText"===e.inputType&&!1===t.val("shouldChange",t,{location:0,length:0},e.data)&&(t.editText.inputElement.value=t._oldValue),t._oldValue=t.editText.inputElement.value,t.reloadExtraContents()}),t.editText.inputElement.addEventListener("keypress",function(e){13===e.keyCode&&(t.emit("shouldReturn",t),e.preventDefault())}),t}return __extends(t,e),Object.defineProperty(t.prototype,"text",{get:function(){return this.editText.inputElement.value||""},set:function(e){this.editText.inputElement.value=e,this.reloadExtraContents()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"textColor",{get:function(){return this._textColor},set:function(e){this._textColor=e,this.editText.inputElement.style.color=e?e.toStyle():null,this.placeholderLabel.textColor=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"font",{get:function(){return this._font},set:function(e){this._font=e,e?(this.editText.inputElement.style.fontSize=e.pointSize.toString()+"px",this.editText.inputElement.style.fontFamily="string"==typeof e.fontName?e.fontName:null,this.editText.inputElement.style.fontWeight="string"==typeof e.fontStyle?e.fontStyle:null,this.editText.inputElement.style.fontStyle="string"==typeof e.fontStyle?e.fontStyle:null):(this.editText.inputElement.style.fontSize="14px",this.editText.inputElement.style.fontFamily=null,this.editText.inputElement.style.fontWeight=null,this.editText.inputElement.style.fontStyle=null),this.placeholderLabel.font=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"textAlignment",{get:function(){return this._textAlignment},set:function(e){switch(this._textAlignment=e,e){case UIEnums_1.UITextAlignment.left:this.editText.inputElement.style.textAlign="left";break;case UIEnums_1.UITextAlignment.center:this.editText.inputElement.style.textAlign="center";break;case UIEnums_1.UITextAlignment.right:this.editText.inputElement.style.textAlign="right"}this.placeholderLabel.textAlignment=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"placeholder",{get:function(){return this.placeholderLabel.text},set:function(e){this.placeholderLabel.text=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"clearButtonMode",{get:function(){return this._clearButtonMode},set:function(e){this._clearButtonMode=e,this.reloadExtraContents()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"leftView",{get:function(){return this._leftView},set:function(e){this._leftView&&this._leftView.removeFromSuperview(),this._leftView=e,this.reloadExtraContents()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"leftViewMode",{get:function(){return this._leftViewMode},set:function(e){this._leftViewMode=e,this.reloadExtraContents()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rightView",{get:function(){return this._rightView},set:function(e){this._rightView&&this._rightView.removeFromSuperview(),this._rightView=e,this.reloadExtraContents()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rightViewMode",{get:function(){return this._rightViewMode},set:function(e){this._rightViewMode=e,this.reloadExtraContents()},enumerable:!0,configurable:!0}),t.prototype.focus=function(){!1!==this.val("shouldBeginEditing",this)&&this.editText.inputElement.focus()},t.prototype.blur=function(){!1!==this.val("shouldEndEditing",this)&&this.editText.inputElement.blur()},Object.defineProperty(t.prototype,"autocapitalizationType",{get:function(){return this._autocapitalizationType},set:function(e){switch(this._autocapitalizationType=e,e){case UIEnums_1.UITextAutocapitalizationType.none:this.editText.inputElement.autocapitalize="off";break;case UIEnums_1.UITextAutocapitalizationType.allCharacters:this.editText.inputElement.autocapitalize="characters";break;case UIEnums_1.UITextAutocapitalizationType.sentences:this.editText.inputElement.autocapitalize="sentences";break;case UIEnums_1.UITextAutocapitalizationType.words:this.editText.inputElement.autocapitalize="words"}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"autocorrectionType",{get:function(){return this._autocorrectionType},set:function(e){this._autocorrectionType=e,e==UIEnums_1.UITextAutocorrectionType.yes?this.editText.inputElement.setAttribute("autocorrect","on"):this.editText.inputElement.setAttribute("autocorrect","off")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"spellCheckingType",{get:function(){return this._spellCheckingType},set:function(e){this._spellCheckingType=e,this.editText.inputElement.spellcheck=e!==UIEnums_1.UITextSpellCheckingType.no},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"keyboardType",{get:function(){return this._keyboardType},set:function(e){this._keyboardType=e,this.resetInputType()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"secureTextEntry",{get:function(){return this._secureTextEntry},set:function(e){this._secureTextEntry=e,this.resetInputType()},enumerable:!0,configurable:!0}),t.prototype.resetInputType=function(){this.secureTextEntry?this.editText.inputElement.type="password":this.keyboardType==UIEnums_1.UIKeyboardType.numberPad?(this.editText.inputElement.type="number",this.editText.inputElement.step=""):this.keyboardType==UIEnums_1.UIKeyboardType.decimalPad?(this.editText.inputElement.type="number",this.editText.inputElement.step="0.0000001"):this.keyboardType==UIEnums_1.UIKeyboardType.phonePad?this.editText.inputElement.type="tel":this.keyboardType==UIEnums_1.UIKeyboardType.emailAddress?this.editText.inputElement.type="email":this.editText.inputElement.type="text"},t.prototype.layoutSubviews=function(){e.prototype.layoutSubviews.call(this),this.reloadExtraContents()},t.prototype.reloadExtraContents=function(){var e=this;this.placeholderLabel.hidden=void 0!==this.text&&this.text.length>0;var t=e.clearButtonMode==UIEnums_1.UITextFieldViewMode.always||!e.editing&&e.clearButtonMode==UIEnums_1.UITextFieldViewMode.unlessEditing||!!(e.editing&&e.clearButtonMode==UIEnums_1.UITextFieldViewMode.whileEditing&&e.text&&e.text.length>0),i=!t&&null!=e.rightView&&(e.rightViewMode==UIEnums_1.UITextFieldViewMode.always||!e.editing&&e.rightViewMode==UIEnums_1.UITextFieldViewMode.unlessEditing||!(!e.editing||e.rightViewMode!=UIEnums_1.UITextFieldViewMode.whileEditing)),n=null!=e.leftView&&(e.leftViewMode==UIEnums_1.UITextFieldViewMode.always||!e.editing&&e.leftViewMode==UIEnums_1.UITextFieldViewMode.unlessEditing||!(!e.editing||e.leftViewMode!=UIEnums_1.UITextFieldViewMode.whileEditing));this.clearButtonView.hidden=!t,this.clearButtonView.frame={x:this.bounds.width-36,y:(this.bounds.height-44)/2,width:36,height:44},n?this.leftView&&(this.addSubview(this.leftView),this.leftView.frame={x:0,y:(this.bounds.height-this.leftView.frame.height)/2,width:this.leftView.frame.width,height:this.leftView.frame.height}):this.leftView&&this.leftView.removeFromSuperview(),i?this.rightView&&(this.addSubview(this.rightView),this.rightView.frame={x:this.bounds.width-this.rightView.frame.width,y:(this.bounds.height-this.rightView.frame.height)/2,width:this.rightView.frame.width,height:this.rightView.frame.height}):this.rightView&&this.rightView.removeFromSuperview(),this.editText.frame={x:n&&void 0!==this.leftView?this.leftView.frame.width+1:0,y:0,width:this.bounds.width-(n&&void 0!==this.leftView?this.leftView.frame.width+1:0)-(i&&this.rightView?this.rightView.frame.width+1:0)-(t?36:0),height:this.bounds.height},this.placeholderLabel.frame=this.editText.frame},t}(UIView_1.UIView);exports.UITextField=UITextField;
},{"./UIButton":10,"./UIColor":13,"./UIEnums":16,"./UIImage":20,"./UILabel":23,"./UIView":46}],44:[function(require,module,exports){
"use strict";var __extends=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(exports,"__esModule",{value:!0});var UIView_1=require("./UIView"),UIColor_1=require("./UIColor"),UIEnums_1=require("./UIEnums"),NativeEditText=function(t){function e(){var e=t.call(this)||this;return e.inputElement=document.createElement("textarea"),e.inputElement.style.position="absolute",e.inputElement.style.backgroundColor="transparent",e.inputElement.style.width="100%",e.inputElement.style.height="100%",e.inputElement.style.border="none",e.inputElement.style.outline="none",e.inputElement.style.color="black",e.inputElement.style.fontSize="14px",e.domElement.appendChild(e.inputElement),e}return __extends(e,t),e}(UIView_1.UINativeTouchView),UITextView=function(t){function e(){var e=t.call(this)||this;return e.editText=new NativeEditText,e._oldValue="",e._textColor=void 0,e._font=void 0,e._textAlignment=UIEnums_1.UITextAlignment.left,e._editable=!0,e._selectable=!0,e.editing=!1,e.clearsOnInsertion=!1,e._autocapitalizationType=UIEnums_1.UITextAutocapitalizationType.none,e._autocorrectionType=UIEnums_1.UITextAutocorrectionType.default,e._spellCheckingType=UIEnums_1.UITextSpellCheckingType.default,e.keyboardType=UIEnums_1.UIKeyboardType.default,e.returnKeyType=UIEnums_1.UIReturnKeyType.default,e.secureTextEntry=!1,e.backgroundColor=UIColor_1.UIColor.white,e.addSubview(e.editText),e.editText.inputElement.addEventListener("focus",function(){!1!==e.val("shouldBeginEditing",e)?(e.editing=!0,e._oldValue=e.editText.inputElement.value,e.emit("didBeginEditing",e)):e.editText.inputElement.blur()}),e.editText.inputElement.addEventListener("blur",function(){!1!==e.val("shouldEndEditing",e)?(e.editing=!1,e.emit("didEndEditing",e)):e.editText.inputElement.focus()}),e.editText.inputElement.addEventListener("input",function(t){e.keyboardType!==UIEnums_1.UIKeyboardType.numberPad&&e.keyboardType!==UIEnums_1.UIKeyboardType.decimalPad||e.editText.inputElement.checkValidity()||(e.editText.inputElement.value=e._oldValue),"insertText"===t.inputType&&!1===e.val("shouldChange",e,{location:0,length:0},t.data)&&(e.editText.inputElement.value=e._oldValue),e._oldValue=e.editText.inputElement.value}),e}return __extends(e,t),Object.defineProperty(e.prototype,"text",{get:function(){return this.editText.inputElement.value||""},set:function(t){this.editText.inputElement.value=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"textColor",{get:function(){return this._textColor},set:function(t){this._textColor=t,this.editText.inputElement.style.color=t?t.toStyle():null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"font",{get:function(){return this._font},set:function(t){this._font=t,t?(this.editText.inputElement.style.fontSize=t.pointSize.toString()+"px",this.editText.inputElement.style.fontFamily="string"==typeof t.fontName?t.fontName:null,this.editText.inputElement.style.fontWeight="string"==typeof t.fontStyle?t.fontStyle:null,this.editText.inputElement.style.fontStyle="string"==typeof t.fontStyle?t.fontStyle:null):(this.editText.inputElement.style.fontSize="14px",this.editText.inputElement.style.fontFamily=null,this.editText.inputElement.style.fontWeight=null,this.editText.inputElement.style.fontStyle=null)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"textAlignment",{get:function(){return this._textAlignment},set:function(t){switch(this._textAlignment=t,t){case UIEnums_1.UITextAlignment.left:this.editText.inputElement.style.textAlign="left";break;case UIEnums_1.UITextAlignment.center:this.editText.inputElement.style.textAlign="center";break;case UIEnums_1.UITextAlignment.right:this.editText.inputElement.style.textAlign="right"}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"editable",{get:function(){return this._editable},set:function(t){this._editable=t,this.editText.inputElement.readOnly=!t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectable",{get:function(){return this._selectable},set:function(t){this._selectable=t,this.editText.inputElement.style.userSelect=t?"auto":"none"},enumerable:!0,configurable:!0}),e.prototype.focus=function(){!1!==this.val("shouldBeginEditing",this)&&this.editText.inputElement.focus()},e.prototype.blur=function(){!1!==this.val("shouldEndEditing",this)&&this.editText.inputElement.blur()},Object.defineProperty(e.prototype,"autocapitalizationType",{get:function(){return this._autocapitalizationType},set:function(t){switch(this._autocapitalizationType=t,t){case UIEnums_1.UITextAutocapitalizationType.none:this.editText.inputElement.autocapitalize="off";break;case UIEnums_1.UITextAutocapitalizationType.allCharacters:this.editText.inputElement.autocapitalize="characters";break;case UIEnums_1.UITextAutocapitalizationType.sentences:this.editText.inputElement.autocapitalize="sentences";break;case UIEnums_1.UITextAutocapitalizationType.words:this.editText.inputElement.autocapitalize="words"}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"autocorrectionType",{get:function(){return this._autocorrectionType},set:function(t){this._autocorrectionType=t,t==UIEnums_1.UITextAutocorrectionType.yes?this.editText.inputElement.setAttribute("autocorrect","on"):this.editText.inputElement.setAttribute("autocorrect","off")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"spellCheckingType",{get:function(){return this._spellCheckingType},set:function(t){this._spellCheckingType=t,this.editText.inputElement.spellcheck=t!==UIEnums_1.UITextSpellCheckingType.no},enumerable:!0,configurable:!0}),e.prototype.layoutSubviews=function(){t.prototype.layoutSubviews.call(this),this.editText.frame={x:4,y:4,width:this.bounds.width-8,height:this.bounds.height-8}},e}(UIView_1.UIView);exports.UITextView=UITextView;
},{"./UIColor":13,"./UIEnums":16,"./UIView":46}],45:[function(require,module,exports){
"use strict";var __assign=this&&this.__assign||function(){return(__assign=Object.assign||function(t){for(var e,o=1,i=arguments.length;o<i;o++)for(var n in e=arguments[o])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}).apply(this,arguments)};Object.defineProperty(exports,"__esModule",{value:!0});var UITouchPhase,UIPoint_1=require("./UIPoint");!function(t){t[t.began=0]="began",t[t.moved=1]="moved",t[t.stationary=2]="stationary",t[t.ended=3]="ended",t[t.cancelled=4]="cancelled"}(UITouchPhase=exports.UITouchPhase||(exports.UITouchPhase={}));var UITouch=function(){function t(){this.identifier=0,this.timestamp=0,this.phase=UITouchPhase.cancelled,this.tapCount=0,this.window=void 0,this.windowPoint=void 0,this.view=void 0,this.gestureRecognizers=[]}return t.prototype.locationInView=function(t){var e=t||this.view;if(void 0===e)return UIPoint_1.UIPointZero;var o=this.windowPoint||UIPoint_1.UIPointZero;return e.convertPointFromWindow(o)||UIPoint_1.UIPointZero},t.prototype.previousLocationInView=function(t){return UIPoint_1.UIPointZero},t}();exports.UITouch=UITouch;var VelocityTracker=function(){function t(){this.movements=[],this.velocity={x:0,y:0}}return t.prototype.reset=function(){this.movements=[],this.velocity={x:0,y:0}},t.prototype.addMovement=function(t){this.movements.push(__assign({},t))},t.prototype.computeCurrentVelocity=function(){for(var t=this.movements.length-1;t>=1;t--){var e=this.movements[t],o=this.movements[t-1];if(e.windowPoint&&o.windowPoint){if(e.phase==UITouchPhase.ended&&o.phase==UITouchPhase.moved&&e.timestamp-o.timestamp>.024){this.velocity={x:0,y:0};break}if(e.phase==UITouchPhase.moved&&o.phase==UITouchPhase.moved){var i=e.timestamp-o.timestamp;if(i>.002){this.velocity={x:(e.windowPoint.x-o.windowPoint.x)/i,y:(e.windowPoint.y-o.windowPoint.y)/i};break}}}}},t}();exports.VelocityTracker=VelocityTracker;
},{"./UIPoint":30}],46:[function(require,module,exports){
"use strict";var __extends=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),__assign=this&&this.__assign||function(){return(__assign=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},__values=this&&this.__values||function(e){var t="function"==typeof Symbol&&e[Symbol.iterator],i=0;return t?t.call(e):{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}}},__read=this&&this.__read||function(e,t){var i="function"==typeof Symbol&&e[Symbol.iterator];if(!i)return e;var n,o,r=i.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=r.next()).done;)a.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(i=r.return)&&i.call(r)}finally{if(o)throw o.error}}return a};Object.defineProperty(exports,"__esModule",{value:!0});var UIRect_1=require("./UIRect"),UIColor_1=require("./UIColor"),CALayer_1=require("../coregraphics/CALayer"),UIAffineTransform_1=require("./UIAffineTransform"),UIEnums_1=require("./UIEnums"),EventEmitter_1=require("../kimi/EventEmitter"),Matrix_1=require("./helpers/Matrix"),UITouch_1=require("./UITouch"),UIEdgeInsets_1=require("./UIEdgeInsets"),UIAnimator_1=require("./UIAnimator");exports.sharedVelocityTracker=new UITouch_1.VelocityTracker;var UIView=function(e){function t(){var t=e.call(this)||this;return t.domElement=document.createElement("div"),t.layer=new CALayer_1.CALayer,t._frame=UIRect_1.UIRectZero,t.viewDelegate=void 0,t.bounds=UIRect_1.UIRectZero,t._transform=UIAffineTransform_1.UIAffineTransformIdentity,t.touchAreaInsets=UIEdgeInsets_1.UIEdgeInsetsZero,t.tag=0,t.superview=void 0,t._subviews=[],t._clipsToBounds=!1,t._backgroundColor=void 0,t._alpha=1,t._hidden=!1,t._opaque=!1,t._contentMode=UIEnums_1.UIViewContentMode.scaleToFill,t._tintColor=void 0,t._userInteractionEnabled=!0,t.gestureRecognizers=[],t.isAccessibilityElement=!1,t.backgroundColor_animations=[],t.frame_animations=[],t.transform_animations=[],t.domElement.style.position="absolute",t.domElement.style.userSelect="none",t.domElement.style.webkitUserSelect="none",t.domElement.style.setProperty("webkitTouchCallout","none"),t.layer.view=t,t}return __extends(t,e),t.prototype.attachToElement=function(e,t){var i=this;void 0===t&&(t=void 0),e==document.body&&(document.body.style.width="100%",document.body.style.height="100%",document.body.style.overflow="hidden",document.body.style.margin="0",document.addEventListener("contextmenu",function(e){return e.preventDefault()}),document.documentElement.style.userSelect="none",document.documentElement.style.webkitUserSelect="none",document.documentElement.style.setProperty("webkitTouchCallout","none"),document.getElementsByTagName("html")[0].style.height="100%",document.getElementsByTagName("html")[0].style.overflow="hidden");var n=function(){if(i instanceof UIWindow)return i;var e=new UIWindow;return e.clipsToBounds=!0,void 0!==t&&!0===t._isUIViewController?e.rootViewController=t:e.addSubview(i),e}();e.appendChild(n.domElement),window.addEventListener("resize",function(){i.onResize(e,n)}),this.onResize(e,n)},t.prototype.onResize=function(e,t){t.frame={x:0,y:0,width:e.clientWidth,height:e.clientHeight}},Object.defineProperty(t.prototype,"subviews",{get:function(){return this._subviews},set:function(e){this._subviews=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"window",{get:function(){return this instanceof UIWindow?this:this.superview?this.superview.window:void 0},enumerable:!0,configurable:!0}),t.prototype.removeFromSuperview=function(){var e=this;if(void 0!==this.superview){var t=this.superview;t.willRemoveSubview(this),this.willMoveToSuperview(void 0),t.subviews=this.superview.subviews.filter(function(t){return t!==e}),t.domElement.removeChild(this.domElement),this.superview=void 0,this.didMoveToSuperview(),this.didRemovedFromWindow()}},t.prototype.didRemovedFromWindow=function(){this.subviews.forEach(function(e){return e.didRemovedFromWindow()})},t.prototype.insertSubviewAtIndex=function(e,t){void 0!==e.superview&&e.removeFromSuperview(),e.willMoveToSuperview(this),e.superview=this,this._subviews.splice(t,0,e),this.domElement.insertBefore(e.domElement,this.domElement.children[t]),this.setNeedsDisplay(),e.didMoveToSuperview(),this.didAddSubview(e)},t.prototype.exchangeSubview=function(e,t){if(e<t){var i=this._subviews[e],n=this._subviews[t];this.domElement.removeChild(i.domElement),this.domElement.insertBefore(i.domElement,n.domElement),this.domElement.removeChild(n.domElement),this.domElement.insertBefore(n.domElement,this.domElement.children[e])}else if(e>t){i=this._subviews[e];var o=this._subviews[t];this.domElement.removeChild(o.domElement),this.domElement.insertBefore(o.domElement,i.domElement),this.domElement.removeChild(i.domElement),this.domElement.insertBefore(i.domElement,this.domElement.children[t])}var r=this._subviews[t];this._subviews[t]=this._subviews[e],this._subviews[e]=r},t.prototype.addSubview=function(e){void 0!==e.superview&&e.removeFromSuperview(),e.willMoveToSuperview(this),e.superview=this,this._subviews.push(e),this.domElement.appendChild(e.domElement),this.setNeedsDisplay(),e.didMoveToSuperview(),this.didAddSubview(e)},t.prototype.insertSubviewBelowSubview=function(e,t){var i=this._subviews.indexOf(t);i>=0&&this.insertSubviewAtIndex(e,i)},t.prototype.insertSubviewAboveSubview=function(e,t){var i=this._subviews.indexOf(t);i>=0&&this.insertSubviewAtIndex(e,i+1)},t.prototype.bringSubviewToFront=function(e){var t=this._subviews.indexOf(e);t>=0&&(this._subviews.splice(t,1),this._subviews.push(e),this.domElement.removeChild(e.domElement),this.domElement.appendChild(e.domElement))},t.prototype.sendSubviewToBack=function(e){var t=this._subviews.indexOf(e);t>=0&&(this._subviews.splice(t,1),this._subviews.unshift(e),this.domElement.removeChild(e.domElement),this.domElement.insertBefore(e.domElement,this.domElement.firstChild))},t.prototype.isDescendantOfView=function(e){for(var t=this;null!=t;){if(t==e)return!0;t=t.superview}return!1},t.prototype.viewWithTag=function(e){for(var t=0;t<this.subviews.length;t++){var i=this.subviews[t];if(i.tag===e)return i;var n=i.viewWithTag(e);if(void 0!==n)return n}},t.prototype.didAddSubview=function(e){this.viewDelegate&&this.viewDelegate.didAddSubview(e)},t.prototype.willRemoveSubview=function(e){},t.prototype.willMoveToSuperview=function(e){},t.prototype.didMoveToSuperview=function(){this.tintColorDidChange()},t.prototype.setNeedsLayout=function(e){var t=this;void 0===e&&(e=!1),e&&(clearTimeout(this._layoutTimer),this._layoutTimer=setTimeout(function(){t.layoutIfNeeded()},0))},t.prototype.layoutIfNeeded=function(){this.layoutSubviews()},t.prototype.layoutSubviews=function(){this.viewDelegate&&(this.viewDelegate.viewWillLayoutSubviews(),this.viewDelegate.viewDidLayoutSubviews())},t.prototype.setNeedsDisplay=function(){},t.prototype.tintColorDidChange=function(){this._subviews.forEach(function(e){return e.tintColorDidChange()})},Object.defineProperty(t.prototype,"userInteractionEnabled",{get:function(){return this._userInteractionEnabled},set:function(e){this._userInteractionEnabled=e,this.domElement.style.pointerEvents=e?"auto":"none"},enumerable:!0,configurable:!0}),t.prototype.addGestureRecognizer=function(e){this.gestureRecognizers.push(e)},t.prototype.removeGestureRecognizer=function(e){var t=this.gestureRecognizers.indexOf(e);t>=0&&this.gestureRecognizers.splice(t,1)},t.prototype.endEditing=function(){},Object.defineProperty(t.prototype,"alpha",{get:function(){return this._alpha},set:function(e){var t=this;if(UIAnimator_1.UIAnimator.duringAnimationValueSet||this.alpha_animation&&(this.alpha_animation.cancel(),this.alpha_animation=void 0),UIAnimator_1.UIAnimator.activeAnimator&&!UIAnimator_1.UIAnimator.duringAnimationValueSet&&UIAnimator_1.UIAnimator.activeAnimator.animationCreater){var i=UIAnimator_1.UIAnimator.activeAnimator.animationCreater();return this.alpha_animation=i,i.setUpdateListener(function(e){UIAnimator_1.UIAnimator.duringAnimationValueSet=!0,t.alpha=e,UIAnimator_1.UIAnimator.duringAnimationValueSet=!1}),i.setStartValue(this.alpha),void i.setEndValue(e)}this._alpha!==e&&(this._alpha=e,this.domElement.style.opacity=e.toString())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"backgroundColor",{get:function(){return this._backgroundColor},set:function(e){var t=this;if(UIAnimator_1.UIAnimator.duringAnimationValueSet||this.backgroundColor_animations&&(this.backgroundColor_animations.forEach(function(e){return e.cancel()}),this.backgroundColor_animations=[]),UIAnimator_1.UIAnimator.activeAnimator&&!UIAnimator_1.UIAnimator.duringAnimationValueSet&&UIAnimator_1.UIAnimator.activeAnimator.animationCreater&&this._backgroundColor&&e){var i,n=[];this._backgroundColor.r!=e.r&&((i=UIAnimator_1.UIAnimator.activeAnimator.animationCreater()).setUpdateListener(function(e){var i=t.backgroundColor;i&&(UIAnimator_1.UIAnimator.duringAnimationValueSet=!0,t.backgroundColor=new UIColor_1.UIColor(Math.max(0,Math.min(1,e)),i.g,i.b,i.a),UIAnimator_1.UIAnimator.duringAnimationValueSet=!1)}),i.setStartValue(this._backgroundColor.r),i.setEndValue(e.r),n.push(i)),this._backgroundColor.g!=e.g&&((i=UIAnimator_1.UIAnimator.activeAnimator.animationCreater()).setUpdateListener(function(e){var i=t.backgroundColor;i&&(UIAnimator_1.UIAnimator.duringAnimationValueSet=!0,t.backgroundColor=new UIColor_1.UIColor(i.r,Math.max(0,Math.min(1,e)),i.b,i.a),UIAnimator_1.UIAnimator.duringAnimationValueSet=!1)}),i.setStartValue(this._backgroundColor.g),i.setEndValue(e.g),n.push(i)),this._backgroundColor.b!=e.b&&((i=UIAnimator_1.UIAnimator.activeAnimator.animationCreater()).setUpdateListener(function(e){var i=t.backgroundColor;i&&(UIAnimator_1.UIAnimator.duringAnimationValueSet=!0,t.backgroundColor=new UIColor_1.UIColor(i.r,i.g,Math.max(0,Math.min(1,e)),i.a),UIAnimator_1.UIAnimator.duringAnimationValueSet=!1)}),i.setStartValue(this._backgroundColor.b),i.setEndValue(e.b),n.push(i)),this._backgroundColor.a!=e.a&&((i=UIAnimator_1.UIAnimator.activeAnimator.animationCreater()).setUpdateListener(function(e){var i=t.backgroundColor;i&&(UIAnimator_1.UIAnimator.duringAnimationValueSet=!0,t.backgroundColor=new UIColor_1.UIColor(i.r,i.g,i.b,Math.max(0,Math.min(1,e))),UIAnimator_1.UIAnimator.duringAnimationValueSet=!1)}),i.setStartValue(this._backgroundColor.a),i.setEndValue(e.a),n.push(i)),this.backgroundColor_animations=n}else this._backgroundColor&&e&&this._backgroundColor.r===e.r&&this._backgroundColor.g===e.g&&this._backgroundColor.b===e.b&&this._backgroundColor.a===e.a||(this._backgroundColor=e,this.domElement.style.backgroundColor=e?e.toStyle():null)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"frame",{get:function(){return this._frame},set:function(e){var t=this;if(UIAnimator_1.UIAnimator.duringAnimationValueSet||(this.frame_animations.forEach(function(e){return e.cancel()}),this.frame_animations=[]),UIAnimator_1.UIAnimator.activeAnimator&&!UIAnimator_1.UIAnimator.duringAnimationValueSet&&UIAnimator_1.UIAnimator.activeAnimator.animationCreater){var i,n=[];this._frame.x!==e.x&&((i=UIAnimator_1.UIAnimator.activeAnimator.animationCreater()).setUpdateListener(function(e){UIAnimator_1.UIAnimator.duringAnimationValueSet=!0,t.frame=__assign({},t.frame,{x:e}),UIAnimator_1.UIAnimator.duringAnimationValueSet=!1}),i.setStartValue(this._frame.x),i.setEndValue(e.x),n.push(i)),this._frame.y!==e.y&&((i=UIAnimator_1.UIAnimator.activeAnimator.animationCreater()).setUpdateListener(function(e){UIAnimator_1.UIAnimator.duringAnimationValueSet=!0,t.frame=__assign({},t.frame,{y:e}),UIAnimator_1.UIAnimator.duringAnimationValueSet=!1}),i.setStartValue(this._frame.y),i.setEndValue(e.y),n.push(i)),this._frame.width!==e.width&&((i=UIAnimator_1.UIAnimator.activeAnimator.animationCreater()).setUpdateListener(function(e){UIAnimator_1.UIAnimator.duringAnimationValueSet=!0,t.frame=__assign({},t.frame,{width:e}),UIAnimator_1.UIAnimator.duringAnimationValueSet=!1}),i.setStartValue(this._frame.width),i.setEndValue(e.width),n.push(i)),this._frame.height!==e.height&&((i=UIAnimator_1.UIAnimator.activeAnimator.animationCreater()).setUpdateListener(function(e){UIAnimator_1.UIAnimator.duringAnimationValueSet=!0,t.frame=__assign({},t.frame,{height:e}),UIAnimator_1.UIAnimator.duringAnimationValueSet=!1}),i.setStartValue(this._frame.height),i.setEndValue(e.height),n.push(i)),this.frame_animations=n}else if(!UIRect_1.UIRectEqualToRect(this._frame,e)){var o=this._frame.width!=e.width||this._frame.height!=e.height;this._frame=e,this.layer.frame=e,o&&(this.bounds=__assign({},e,{x:0,y:0})),this.setNeedsLayout(o),this.domElement.style.left=e.x.toString()+"px",this.domElement.style.top=e.y.toString()+"px",this.domElement.style.width=e.width.toString()+"px",this.domElement.style.height=e.height.toString()+"px"}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"center",{get:function(){return{x:this.frame.x+this.frame.width/2,y:this.frame.y+this.frame.height/2}},set:function(e){this.frame={x:e.x-this.frame.width/2,y:e.y-this.frame.height/2,width:this.frame.width,height:this.frame.height}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"transform",{get:function(){return this._transform},set:function(e){var t=this;if(UIAnimator_1.UIAnimator.duringAnimationValueSet||(this.transform_animations.forEach(function(e){return e.cancel()}),this.transform_animations=[]),UIAnimator_1.UIAnimator.activeAnimator&&!UIAnimator_1.UIAnimator.duringAnimationValueSet&&UIAnimator_1.UIAnimator.activeAnimator.animationCreater){var i,n=[],o=Matrix_1.Matrix.unmatrix(this._transform),r=Matrix_1.Matrix.unmatrix(e);o.scale.x!=r.scale.x&&((i=UIAnimator_1.UIAnimator.activeAnimator.animationCreater()).setUpdateListener(function(e){var i=new Matrix_1.Matrix;i.setValues(t._transform),i.setScale(e),UIAnimator_1.UIAnimator.duringAnimationValueSet=!0,t.transform=i.getValues(),UIAnimator_1.UIAnimator.duringAnimationValueSet=!1}),i.setStartValue(o.scale.x),i.setEndValue(r.scale.x),n.push(i)),o.scale.y!=r.scale.y&&((i=UIAnimator_1.UIAnimator.activeAnimator.animationCreater()).setUpdateListener(function(e){var i=new Matrix_1.Matrix;i.setValues(t._transform),i.setScale(void 0,e),UIAnimator_1.UIAnimator.duringAnimationValueSet=!0,t.transform=i.getValues(),UIAnimator_1.UIAnimator.duringAnimationValueSet=!1}),i.setStartValue(o.scale.y),i.setEndValue(r.scale.y),n.push(i)),o.degree!=r.degree&&((i=UIAnimator_1.UIAnimator.activeAnimator.animationCreater()).setUpdateListener(function(e){var i=new Matrix_1.Matrix;i.setValues(t._transform),i.setRotate(e*Math.PI/180),UIAnimator_1.UIAnimator.duringAnimationValueSet=!0,t.transform=i.getValues(),UIAnimator_1.UIAnimator.duringAnimationValueSet=!1}),i.setStartValue(o.degree),i.setEndValue(r.degree),n.push(i)),o.translate.x!=r.translate.x&&((i=UIAnimator_1.UIAnimator.activeAnimator.animationCreater()).setUpdateListener(function(e){var i=new Matrix_1.Matrix;i.setValues(t._transform),i.setTranslate(e),UIAnimator_1.UIAnimator.duringAnimationValueSet=!0,t.transform=i.getValues(),UIAnimator_1.UIAnimator.duringAnimationValueSet=!1}),i.setStartValue(o.translate.x),i.setEndValue(r.translate.x),n.push(i)),o.translate.y!=r.translate.y&&((i=UIAnimator_1.UIAnimator.activeAnimator.animationCreater()).setUpdateListener(function(e){var i=new Matrix_1.Matrix;i.setValues(t._transform),i.setTranslate(void 0,e),UIAnimator_1.UIAnimator.duringAnimationValueSet=!0,t.transform=i.getValues(),UIAnimator_1.UIAnimator.duringAnimationValueSet=!1}),i.setStartValue(o.translate.y),i.setEndValue(r.translate.y),n.push(i))}else UIAffineTransform_1.UIAffineTransformEqualTo(this._transform,e)||(this._transform=e,this.domElement.style.transform="matrix("+e.a+", "+e.b+", "+e.c+", "+e.d+", "+e.tx+", "+e.ty+")",this.domElement.style.webkitTransform=this.domElement.style.transform)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"clipsToBounds",{get:function(){return this._clipsToBounds},set:function(e){this._clipsToBounds=e,this.domElement.style.overflow=e?"hidden":null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hidden",{get:function(){return this._hidden},set:function(e){this._hidden=e,this.domElement.style.visibility=e?"hidden":"inherit"},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"opaque",{get:function(){return this._opaque},set:function(e){this._opaque=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"contentMode",{get:function(){return this._contentMode},set:function(e){this._contentMode=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tintColor",{get:function(){return this._tintColor||this.superview&&this.superview.tintColor||new UIColor_1.UIColor(0,122/255,1,1)},set:function(e){this._tintColor=e,this.tintColorDidChange()},enumerable:!0,configurable:!0}),t.prototype.convertPointFromView=function(e,t){var i=t.convertPointToWindow(e);return i&&this.convertPointFromWindow(i)||e},t.prototype.convertPointToWindow=function(e){if(void 0!==this.window){for(var t=new Matrix_1.Matrix,i=this,n=[];null!=i&&!(i instanceof UIWindow);)n.push(i),i=i.superview;return n.forEach(function(e){if(t.postTranslate(e.frame.x,e.frame.y),!UIAffineTransform_1.UIAffineTransformIsIdentity(e.transform)){var i=Matrix_1.Matrix.unmatrix(e.transform),n=new Matrix_1.Matrix;n.postTranslate(-e.frame.width/2,-e.frame.height/2),n.postRotate(i.degree),n.postScale(i.scale.x,i.scale.y),n.postTranslate(i.translate.x,i.translate.y),n.postTranslate(e.frame.width/2,e.frame.height/2),t.concat(n)}}),{x:e.x*t.a+e.x*t.c+t.tx,y:e.y*t.b+e.y*t.d+t.ty}}},t.prototype.convertPointFromWindow=function(e){if(null!=this.window){for(var t=new Matrix_1.Matrix,i=this,n=[];null!=i&&!(i instanceof UIWindow);)n.push(i),i=i.superview;return n.forEach(function(e){if(t.postTranslate(e.frame.x,e.frame.y),!UIAffineTransform_1.UIAffineTransformIsIdentity(e.transform)){var i=Matrix_1.Matrix.unmatrix(e.transform),n=new Matrix_1.Matrix;n.postTranslate(-e.frame.width/2,-e.frame.height/2),n.postRotate(i.degree),n.postScale(i.scale.x,i.scale.y),n.postTranslate(i.translate.x,i.translate.y),n.postTranslate(e.frame.width/2,e.frame.height/2),t.preConcat(n)}}),{x:(e.x-t.tx)/(t.a+t.b),y:(e.y-t.ty)/(t.d+t.c)}}},t.prototype.hitTest=function(e){if(this.userInteractionEnabled&&this.alpha>0&&!this.hidden&&this.pointInside(e)){for(var t=this._subviews.length-1;t>=0;t--){var i=this._subviews[t],n=i.convertPointFromView(e,this),o=i.hitTest(n);if(void 0!==o)return o}return this}},t.prototype.touchesBegan=function(e){this.gestureRecognizers.filter(function(e){return e.enabled}).forEach(function(t){t.handleTouch(e)}),this.superview&&this.superview.touchesBegan(e)},t.prototype.touchesMoved=function(e){this.gestureRecognizers.filter(function(e){return e.enabled}).forEach(function(t){t.handleTouch(e)}),this.superview&&this.superview.touchesMoved(e)},t.prototype.touchesEnded=function(e){this.gestureRecognizers.filter(function(e){return e.enabled}).forEach(function(t){t.handleTouch(e)}),this.superview&&this.superview.touchesEnded(e)},t.prototype.touchesCancelled=function(e){this.gestureRecognizers.filter(function(e){return e.enabled}).forEach(function(t){t.handleTouch(e)}),this.superview&&this.superview.touchesCancelled(e)},t.prototype.intrinsicContentSize=function(){},t.prototype.pointInside=function(e){return e.x>=0-this.touchAreaInsets.left&&e.y>=0-this.touchAreaInsets.top&&e.x<=this.frame.width+this.touchAreaInsets.right&&e.y<=this.frame.height+this.touchAreaInsets.bottom},t}(EventEmitter_1.EventEmitter);exports.UIView=UIView;var UIWindow=function(e){function t(){var t=e.call(this)||this;return t.shouldPreventDefault=!0,t.currentTouchesID=[],t.touches={},t.upCount=new Map,t.upTimestamp=new Map,t.mouseDowned=!1,t._rootViewController=void 0,t.setupTouches(),t}return __extends(t,e),t.prototype.handleTouchStart=function(e){for(var t=this,i=this.standardlizeTouches(e),n=function(e){var n=i[e],r=o.standardlizeTouchIdentifier(n);o.currentTouchesID.push(r);var a={x:n.pageX,y:n.pageY},s=o.hitTest(a);if(s){if(s instanceof UINativeTouchView)return o.shouldPreventDefault=!1,{value:!1};var u=new UITouch_1.UITouch;o.touches[r]=u,u.identifier=r,u.phase=UITouch_1.UITouchPhase.began,u.tapCount=function(){var e,i;try{for(var n=__values(t.upCount),o=n.next();!o.done;o=n.next()){var r=__read(o.value,2),s=r[0],u=r[1],h=t.upTimestamp.get(s)||0;if(Date.now()/1e3-h<1&&Math.abs(s.x-a.x)<44&&Math.abs(s.y-a.y)<44)return u+1}}catch(t){e={error:t}}finally{try{o&&!o.done&&(i=n.return)&&i.call(n)}finally{if(e)throw e.error}}return 1}(),u.timestamp=Date.now()/1e3,u.window=o,u.windowPoint=a,u.view=s,0==u.identifier&&exports.sharedVelocityTracker.addMovement(u),u.view.touchesBegan([u])}},o=this,r=0;r<i.length;r++){var a=n(r);if("object"==typeof a)return a.value}this.shouldPreventDefault},t.prototype.handleTouchMove=function(e){for(var t=this.standardlizeTouches(e),i=0;i<t.length;i++){var n=t[i],o=this.standardlizeTouchIdentifier(n),r={x:n.pageX,y:n.pageY},a=this.touches[o];if(void 0===a)return!1;a.phase=UITouch_1.UITouchPhase.moved,a.timestamp=Date.now()/1e3,a.windowPoint=r,0==a.identifier&&exports.sharedVelocityTracker.addMovement(a),a.view&&a.view.touchesMoved([a])}this.shouldPreventDefault&&e.preventDefault()},t.prototype.handleTouchEnd=function(e){for(var t=this.standardlizeTouches(e),i=0;i<t.length;i++){var n=t[i],o=this.standardlizeTouchIdentifier(n),r={x:n.pageX,y:n.pageY},a=this.touches[o];void 0!==a&&(a.phase=UITouch_1.UITouchPhase.ended,a.timestamp=Date.now()/1e3,a.windowPoint=r,0==a.identifier&&exports.sharedVelocityTracker.addMovement(a),a.view&&a.view.touchesEnded([a]));var s=this.currentTouchesID.indexOf(o);s>=0&&this.currentTouchesID.splice(s,1)}if(0==this.currentTouchesID.length){for(var u in this.upCount.clear(),this.upTimestamp.clear(),this.touches)if(this.touches.hasOwnProperty(u)){var h=this.touches[u];h.windowPoint&&(this.upCount.set(h.windowPoint,h.tapCount),this.upTimestamp.set(h.windowPoint,h.timestamp))}this.touches={},exports.sharedVelocityTracker.reset(),setTimeout(function(){UIView.recognizedGesture=void 0},0)}this.shouldPreventDefault&&e.preventDefault(),0==this.currentTouchesID.length&&(this.shouldPreventDefault=!0)},t.prototype.handleTouchCancel=function(e){for(var t=this.standardlizeTouches(e),i=0;i<t.length;i++){var n=t[i],o=this.standardlizeTouchIdentifier(n),r={x:n.pageX,y:n.pageY},a=this.touches[o];a&&(a.phase=UITouch_1.UITouchPhase.cancelled,a.timestamp=Date.now()/1e3,a.windowPoint=r,0==a.identifier&&exports.sharedVelocityTracker.addMovement(a),a.view&&a.view.touchesCancelled([a]))}this.upCount.clear(),this.upTimestamp.clear(),this.touches={},this.shouldPreventDefault&&e.preventDefault(),this.shouldPreventDefault=!0},t.prototype.standardlizeTouches=function(e){if(e.changedTouches)return new Array(e.changedTouches.length).fill(0).map(function(t,i){return e.changedTouches[i]}).map(function(t){return t.identifier<-100||t.identifier>100?(t.identifier_2=function(){for(var i=0;i<e.touches.length;i++)if(e.touches[i].identifier===t.identifier)return i;return 0}(),t):t});if(e.constructor.toString().startsWith("function MouseEvent()")){var t=e;return[{identifier:0,pageX:t.pageX,pageY:t.pageY}]}return[]},t.prototype.standardlizeTouchIdentifier=function(e){return"number"==typeof e.identifier_2?e.identifier_2:e.identifier},t.prototype.setupTouches=function(){var e=this;this.domElement.addEventListener("mousedown",function(t){e.mouseDowned=!0,e.handleTouchStart(t)}),this.domElement.addEventListener("mousemove",function(t){e.mouseDowned&&e.handleTouchMove(t)}),this.domElement.addEventListener("mouseup",function(t){e.handleTouchEnd(t),e.mouseDowned=!1}),this.domElement.addEventListener("touchstart",function(t){e.handleTouchStart(t)}),this.domElement.addEventListener("touchmove",function(t){e.handleTouchMove(t)}),this.domElement.addEventListener("touchend",function(t){e.handleTouchEnd(t)}),this.domElement.addEventListener("touchcancel",function(t){e.handleTouchCancel(t)})},Object.defineProperty(t.prototype,"rootViewController",{get:function(){return this._rootViewController},set:function(e){this._rootViewController&&(this._rootViewController.window=void 0,this._rootViewController.view.removeFromSuperview()),this._rootViewController=e,this._rootViewController&&(this._rootViewController.window=this,this.addSubview(this._rootViewController.view))},enumerable:!0,configurable:!0}),t.prototype.layoutSubviews=function(){e.prototype.layoutSubviews.call(this),this.rootViewController&&(this.rootViewController.view.frame=this.bounds)},t}(UIView);exports.UIWindow=UIWindow;var UINativeTouchView=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(UIView);exports.UINativeTouchView=UINativeTouchView;
},{"../coregraphics/CALayer":1,"../kimi/EventEmitter":3,"./UIAffineTransform":7,"./UIAnimator":9,"./UIColor":13,"./UIEdgeInsets":15,"./UIEnums":16,"./UIRect":33,"./UITouch":45,"./helpers/Matrix":50}],47:[function(require,module,exports){
"use strict";var __extends=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function o(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}();Object.defineProperty(exports,"__esModule",{value:!0});var EventEmitter_1=require("../kimi/EventEmitter"),UIView_1=require("./UIView"),UIColor_1=require("./UIColor"),UINavigationBar_1=require("./UINavigationBar"),UIViewController=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._isUIViewController=!0,t._title=void 0,t._view=void 0,t.parentViewController=void 0,t.presentedViewController=void 0,t.presentingViewController=void 0,t.childViewControllers=[],t.navigationItem=new UINavigationBar_1.UINavigationItem,t.hidesBottomBarWhenPushed=!1,t._window=void 0,t}return __extends(t,e),Object.defineProperty(t.prototype,"title",{get:function(){return this._title},set:function(e){this._title=e,this.navigationItem.viewController=this,this.navigationItem.setNeedsUpdate()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"view",{get:function(){return void 0===this._view&&(this.loadView(),this._view&&(this._view.viewDelegate=this),this.viewDidLoad()),this._view},set:function(e){void 0===this._view&&(this._view=e)},enumerable:!0,configurable:!0}),t.prototype.attachToElement=function(e){this.view.attachToElement(e,this)},t.prototype.loadView=function(){this.view=new UIView_1.UIView,this.view.backgroundColor=UIColor_1.UIColor.white},t.prototype.viewDidLoad=function(){},t.prototype.viewWillAppear=function(e){this.childViewControllers.forEach(function(t){return t.viewWillAppear(e)})},t.prototype.viewDidAppear=function(e){this.childViewControllers.forEach(function(t){return t.viewDidAppear(e)})},t.prototype.viewWillDisappear=function(e){this.childViewControllers.forEach(function(t){return t.viewWillDisappear(e)})},t.prototype.viewDidDisappear=function(e){this.childViewControllers.forEach(function(t){return t.viewDidDisappear(e)})},t.prototype.viewWillLayoutSubviews=function(){this.emit("viewWillLayoutSubviews",this)},t.prototype.viewDidLayoutSubviews=function(){},t.prototype.addChildViewController=function(e){if(e!=this){if(e.parentViewController){if(e.parentViewController==this)return;e.parentViewController.removeFromParentViewController()}e.willMoveToParentViewController(this),this.childViewControllers.push(e),e.parentViewController=this,e.didMoveToParentViewController(this)}},t.prototype.removeFromParentViewController=function(){if(this.parentViewController){var e=this.parentViewController;this.willMoveToParentViewController(void 0);var t=e.childViewControllers.indexOf(this);t>=0&&e.childViewControllers.splice(t,1),this.parentViewController=void 0,this.didMoveToParentViewController(void 0)}},t.prototype.willMoveToParentViewController=function(e){},t.prototype.didMoveToParentViewController=function(e){},t.prototype.didAddSubview=function(e){},Object.defineProperty(t.prototype,"navigationController",{get:function(){for(var e=this;null!=e;){if(!0===e._isUINavigationController)return e;e=e.parentViewController}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"window",{get:function(){return this._window||(this.parentViewController?this.parentViewController.window:void 0)},set:function(e){this._window=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"visibleViewController",{get:function(){},enumerable:!0,configurable:!0}),t}(EventEmitter_1.EventEmitter);exports.UIViewController=UIViewController;
},{"../kimi/EventEmitter":3,"./UIColor":13,"./UINavigationBar":25,"./UIView":46}],48:[function(require,module,exports){
"use strict";var NEWTON_ITERATIONS=4,NEWTON_MIN_SLOPE=.001,SUBDIVISION_PRECISION=1e-7,SUBDIVISION_MAX_ITERATIONS=10,kSplineTableSize=11,kSampleStepSize=1/(kSplineTableSize-1),float32ArraySupported="function"==typeof Float32Array;function A(e,r){return 1-3*r+3*e}function B(e,r){return 3*r-6*e}function C(e){return 3*e}function calcBezier(e,r,n){return((A(r,n)*e+B(r,n))*e+C(r))*e}function getSlope(e,r,n){return 3*A(r,n)*e*e+2*B(r,n)*e+C(r)}function binarySubdivide(e,r,n,S,t){var i,a,o=0;do{(i=calcBezier(a=r+(n-r)/2,S,t)-e)>0?n=a:r=a}while(Math.abs(i)>SUBDIVISION_PRECISION&&++o<SUBDIVISION_MAX_ITERATIONS);return a}function newtonRaphsonIterate(e,r,n,S){for(var t=0;t<NEWTON_ITERATIONS;++t){var i=getSlope(r,n,S);if(0===i)return r;r-=(calcBezier(r,n,S)-e)/i}return r}module.exports=function(e,r,n,S){if(!(0<=e&&e<=1&&0<=n&&n<=1))throw new Error("bezier x values must be in [0, 1] range");var t=float32ArraySupported?new Float32Array(kSplineTableSize):new Array(kSplineTableSize);if(e!==r||n!==S)for(var i=0;i<kSplineTableSize;++i)t[i]=calcBezier(i*kSampleStepSize,e,n);return function(i){return e===r&&n===S?i:0===i?0:1===i?1:calcBezier(function(r){for(var S=0,i=1,a=kSplineTableSize-1;i!==a&&t[i]<=r;++i)S+=kSampleStepSize;var o=S+(r-t[--i])/(t[i+1]-t[i])*kSampleStepSize,l=getSlope(o,e,n);return l>=NEWTON_MIN_SLOPE?newtonRaphsonIterate(r,o,e,n):0===l?o:binarySubdivide(r,S,S+kSampleStepSize,e,n)}(i),r,S)}};
},{}],49:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var Bezier=require("./Bezier"),LinearAndCurveAnimator=function(){function t(t){void 0===t&&(t=!1),this.isCurve=t,this.duration=0,this.startValue=0,this.currentValue=0,this.endValue=0,this.startTime=0,this.cancelled=!1,this.bezier=void 0,this.allListenners=[],t&&(this.bezier=Bezier(.42,0,1,1))}return t.prototype.addListener=function(t){this.allListenners.push(t)},t.prototype.start=function(){this.startTime=Date.now(),this.doFrame()},t.prototype.doFrame=function(){var t=this;if(!this.cancelled){var e=(Date.now()-this.startTime)/this.duration;this.bezier&&(e=this.bezier(e)),this.currentValue=this.startValue+(this.endValue-this.startValue)*e,this.allListenners.forEach(function(e){return e.onUpdate(t.currentValue)}),e>=1?this.allListenners.forEach(function(t){return t.onEnd()}):this.rafHandler=requestAnimationFrame(this.doFrame.bind(this))}},t.prototype.cancel=function(){this.cancelled=!0,cancelAnimationFrame(this.rafHandler)},t}();exports.LinearAndCurveAnimator=LinearAndCurveAnimator;
},{"./Bezier":48}],50:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var MatrixAlgorithm=function(){function t(){this.props=[],this.props[0]=1,this.props[1]=0,this.props[2]=0,this.props[3]=0,this.props[4]=0,this.props[5]=1,this.props[6]=0,this.props[7]=0,this.props[8]=0,this.props[9]=0,this.props[10]=1,this.props[11]=0,this.props[12]=0,this.props[13]=0,this.props[14]=0,this.props[15]=1}return t.prototype.rotate=function(t){if(0===t)return this;var s=Math.cos(t),p=Math.sin(t);return this._t(s,-p,0,0,p,s,0,0,0,0,1,0,0,0,0,1)},t.prototype.rotateX=function(t){if(0===t)return this;var s=Math.cos(t),p=Math.sin(t);return this._t(1,0,0,0,0,s,-p,0,0,p,s,0,0,0,0,1)},t.prototype.rotateY=function(t){if(0===t)return this;var s=Math.cos(t),p=Math.sin(t);return this._t(s,0,p,0,0,1,0,0,-p,0,s,0,0,0,0,1)},t.prototype.rotateZ=function(t){if(0===t)return this;var s=Math.cos(t),p=Math.sin(t);return this._t(s,-p,0,0,p,s,0,0,0,0,1,0,0,0,0,1)},t.prototype.shear=function(t,s){return this._t(1,s,t,1,0,0)},t.prototype.skew=function(t,s){return this.shear(Math.tan(t),Math.tan(s))},t.prototype.skewFromAxis=function(t,s){var p=Math.cos(s),r=Math.sin(s);return this._t(p,r,0,0,-r,p,0,0,0,0,1,0,0,0,0,1)},t.prototype.scale=function(t,s,p){return p=isNaN(p)?1:p,1==t&&1==s&&1==p?this:this._t(t,0,0,0,0,s,0,0,0,0,p,0,0,0,0,1)},t.prototype.setTransform=function(t,s,p,r,o,i,h,a,e,n,c,u,y,l,x,f){return this.props[0]=t,this.props[1]=s,this.props[2]=p,this.props[3]=r,this.props[4]=o,this.props[5]=i,this.props[6]=h,this.props[7]=a,this.props[8]=e,this.props[9]=n,this.props[10]=c,this.props[11]=u,this.props[12]=y,this.props[13]=l,this.props[14]=x,this.props[15]=f,this},t.prototype.translate=function(t,s,p){return p=isNaN(p)?0:p,0!==t||0!==s||0!==p?this._t(1,0,0,0,0,1,0,0,0,0,1,0,t,s,p,1):this},t.prototype._t=function(t,s,p,r,o,i,h,a,e,n,c,u,y,l,x,f){this.transform(t,s,p,r,o,i,h,a,e,n,c,u,y,l,x,f)},t.prototype.transform=function(t,s,p,r,o,i,h,a,e,n,c,u,y,l,x,f){if(1===t&&0===s&&0===p&&0===r&&0===o&&1===i&&0===h&&0===a&&0===e&&0===n&&1===c&&0===u)return 0===y&&0===l&&0===x||(this.props[12]=this.props[12]*t+this.props[13]*o+this.props[14]*e+this.props[15]*y,this.props[13]=this.props[12]*s+this.props[13]*i+this.props[14]*n+this.props[15]*l,this.props[14]=this.props[12]*p+this.props[13]*h+this.props[14]*c+this.props[15]*x,this.props[15]=this.props[12]*r+this.props[13]*a+this.props[14]*u+this.props[15]*f),this;var d=this.props[0],M=this.props[1],v=this.props[2],m=this.props[3],g=this.props[4],b=this.props[5],A=this.props[6],P=this.props[7],_=this.props[8],w=this.props[9],T=this.props[10],I=this.props[11],N=this.props[12],S=this.props[13],k=this.props[14],q=this.props[15];return this.props[0]=d*t+M*o+v*e+m*y,this.props[1]=d*s+M*i+v*n+m*l,this.props[2]=d*p+M*h+v*c+m*x,this.props[3]=d*r+M*a+v*u+m*f,this.props[4]=g*t+b*o+A*e+P*y,this.props[5]=g*s+b*i+A*n+P*l,this.props[6]=g*p+b*h+A*c+P*x,this.props[7]=g*r+b*a+A*u+P*f,this.props[8]=_*t+w*o+T*e+I*y,this.props[9]=_*s+w*i+T*n+I*l,this.props[10]=_*p+w*h+T*c+I*x,this.props[11]=_*r+w*a+T*u+I*f,this.props[12]=N*t+S*o+k*e+q*y,this.props[13]=N*s+S*i+k*n+q*l,this.props[14]=N*p+S*h+k*c+q*x,this.props[15]=N*r+S*a+k*u+q*f,this},t.prototype.clone=function(t){var s;for(s=0;s<16;s+=1)t.props[s]=this.props[s]},t.prototype.cloneFromProps=function(t){var s;for(s=0;s<16;s+=1)this.props[s]=t[s]},t.prototype.applyToPoint=function(t,s,p){return{x:t*this.props[0]+s*this.props[4]+p*this.props[8]+this.props[12],y:t*this.props[1]+s*this.props[5]+p*this.props[9]+this.props[13],z:t*this.props[2]+s*this.props[6]+p*this.props[10]+this.props[14]}},t.prototype.applyToX=function(t,s,p){return t*this.props[0]+s*this.props[4]+p*this.props[8]+this.props[12]},t.prototype.applyToY=function(t,s,p){return t*this.props[1]+s*this.props[5]+p*this.props[9]+this.props[13]},t.prototype.applyToZ=function(t,s,p){return t*this.props[2]+s*this.props[6]+p*this.props[10]+this.props[14]},t.prototype.applyToPointArray=function(t,s,p){return[t*this.props[0]+s*this.props[4]+p*this.props[8]+this.props[12],t*this.props[1]+s*this.props[5]+p*this.props[9]+this.props[13],t*this.props[2]+s*this.props[6]+p*this.props[10]+this.props[14]]},t.prototype.applyToPointStringified=function(t,s){return Math.round(t*this.props[0]+s*this.props[4]+this.props[12])+","+Math.round(t*this.props[1]+s*this.props[5]+this.props[13])},t}();exports.MatrixAlgorithm=MatrixAlgorithm;var Matrix=function(){function t(t,s,p,r,o,i){void 0===t&&(t=1),void 0===s&&(s=0),void 0===p&&(p=0),void 0===r&&(r=1),void 0===o&&(o=0),void 0===i&&(i=0),this.a=t,this.b=s,this.c=p,this.d=r,this.tx=o,this.ty=i}return t.unmatrix=function(t){var s=t.a,p=t.b,r=t.c,o=t.d;if(s*o==p*r)return{scale:{x:1,y:1},degree:0,translate:{x:0,y:0}};var i=Math.sqrt(s*s+p*p),h=(s/=i)*r+(p/=i)*o;r-=s*h,o-=p*h;var a=Math.sqrt(r*r+o*o);return h/=a,s*(o/=a)<p*(r/=a)&&(s=-s,p=-p,h=-h,i=-i),{scale:{x:i,y:a},degree:Math.atan2(p,s)/(Math.PI/180),translate:{x:t.tx,y:t.ty}}},t.prototype.setValues=function(t){this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty},t.prototype.getValues=function(){return{a:this.a,b:this.b,c:this.c,d:this.d,tx:this.tx,ty:this.ty}},t.prototype.isIdentity=function(){return 1==this.a&&0==this.b&&0==this.c&&1==this.d&&0==this.tx&&0==this.ty},t.prototype.setScale=function(s,p){var r=new MatrixAlgorithm,o=t.unmatrix(this);r.rotate(-o.degree*Math.PI/180),r.scale(s||o.scale.x,p||o.scale.y,1),r.translate(o.translate.x,o.translate.y,0),this.a=r.props[0],this.b=r.props[1],this.c=r.props[4],this.d=r.props[5],this.tx=r.props[12],this.ty=r.props[13]},t.prototype.postScale=function(s,p){var r=new MatrixAlgorithm,o=t.unmatrix(this);r.rotate(-o.degree*Math.PI/180),r.scale(o.scale.x,o.scale.y,1),r.translate(o.translate.x,o.translate.y,0),r.scale(s||1,p||1,1),this.a=r.props[0],this.b=r.props[1],this.c=r.props[4],this.d=r.props[5],this.tx=r.props[12],this.ty=r.props[13]},t.prototype.setTranslate=function(s,p){var r=new MatrixAlgorithm,o=t.unmatrix(this);r.rotate(-o.degree*Math.PI/180),r.scale(o.scale.x,o.scale.y,1),r.translate(s||o.translate.x,p||o.translate.y,0),this.a=r.props[0],this.b=r.props[1],this.c=r.props[4],this.d=r.props[5],this.tx=r.props[12],this.ty=r.props[13]},t.prototype.postTranslate=function(s,p){var r=new MatrixAlgorithm,o=t.unmatrix(this);r.rotate(-o.degree*Math.PI/180),r.scale(o.scale.x,o.scale.y,1),r.translate(o.translate.x,o.translate.y,0),r.translate(s||0,p||0,0),this.a=r.props[0],this.b=r.props[1],this.c=r.props[4],this.d=r.props[5],this.tx=r.props[12],this.ty=r.props[13]},t.prototype.setRotate=function(s){var p=new MatrixAlgorithm,r=t.unmatrix(this);p.rotate(-s||-r.degree*Math.PI/180),p.scale(r.scale.x,r.scale.y,1),p.translate(r.translate.x,r.translate.y,0),this.a=p.props[0],this.b=p.props[1],this.c=p.props[4],this.d=p.props[5],this.tx=p.props[12],this.ty=p.props[13]},t.prototype.postRotate=function(s){var p=new MatrixAlgorithm,r=t.unmatrix(this);p.rotate(-r.degree*Math.PI/180),p.scale(r.scale.x,r.scale.y,1),p.translate(r.translate.x,r.translate.y,0),p.rotate(-s),this.a=p.props[0],this.b=p.props[1],this.c=p.props[4],this.d=p.props[5],this.tx=p.props[12],this.ty=p.props[13]},t.prototype.preConcat=function(t){var s=new MatrixAlgorithm;s.props[0]=t.a,s.props[1]=t.b,s.props[4]=t.c,s.props[5]=t.d,s.props[12]=t.tx,s.props[13]=t.ty,s.transform(this.a,this.b,0,0,this.c,this.d,0,0,0,0,1,0,this.tx,this.ty,0,1),this.a=s.props[0],this.b=s.props[1],this.c=s.props[4],this.d=s.props[5],this.tx=s.props[12],this.ty=s.props[13]},t.prototype.concat=function(t){var s=new MatrixAlgorithm;s.props[0]=this.a,s.props[1]=this.b,s.props[4]=this.c,s.props[5]=this.d,s.props[12]=this.tx,s.props[13]=this.ty,s.transform(t.a,t.b,0,0,t.c,t.d,0,0,0,0,1,0,t.tx,t.ty,0,1),this.a=s.props[0],this.b=s.props[1],this.c=s.props[4],this.d=s.props[5],this.tx=s.props[12],this.ty=s.props[13]},t}();exports.Matrix=Matrix;
},{}],51:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.currentAnimationTimeMillis=function(){return"object"==typeof window.performance?window.performance.now():Date.now()};
},{}],52:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var Now_1=require("./Now"),ViscousFluidInterpolator=function(){function t(){}return t.viscousFluid=function(i){if((i*=t.VISCOUS_FLUID_SCALE)<1)i-=1-Math.exp(-i);else{i=.36787944117+(i=1-Math.exp(1-i))*(1-.36787944117)}return i},t.prototype.getInterpolation=function(i){var s=t.VISCOUS_FLUID_NORMALIZE*t.viscousFluid(i);return s>0?s+t.VISCOUS_FLUID_OFFSET:s},t.VISCOUS_FLUID_SCALE=8,t}();ViscousFluidInterpolator.VISCOUS_FLUID_NORMALIZE=1/ViscousFluidInterpolator.viscousFluid(1),ViscousFluidInterpolator.VISCOUS_FLUID_OFFSET=1-ViscousFluidInterpolator.VISCOUS_FLUID_NORMALIZE*ViscousFluidInterpolator.viscousFluid(1);var Scroller=function(){function t(){this.mode=0,this.startX=0,this.startY=0,this.finalX=0,this.finalY=0,this.minX=0,this.maxX=0,this.minY=0,this.maxY=0,this.currX=0,this.currY=0,this.startTime=0,this.duration=0,this.durationReciprocal=0,this.deltaX=0,this.deltaY=0,this.finished=!1,this.flywheel=!1,this.velocity=0,this.currVelocity=0,this.distance=0,this.flingFriction=.015,this.deceleration=0,this.physicalCoeff=0,this.finished=!0,this.interpolator=new ViscousFluidInterpolator,this.deceleration=this.computeDeceleration(.015),this.physicalCoeff=this.computeDeceleration(.84)}return t.prototype.setFriction=function(t){this.deceleration=this.computeDeceleration(t),this.flingFriction=t},t.prototype.computeDeceleration=function(t){return 61774.04967999999*t},t.prototype.forceFinished=function(t){this.finished=t},t.prototype.getCurrVelocity=function(){return this.mode==t.FLING_MODE?this.currVelocity:this.velocity-this.deceleration*this.timePassed()/2e3},t.prototype.computeScrollOffset=function(){if(this.finished)return!1;var i=Now_1.currentAnimationTimeMillis()-this.startTime;if(i<this.duration)switch(this.mode){case t.SCROLL_MODE:var s=this.interpolator.getInterpolation(i*this.durationReciprocal);this.currX=this.startX+Math.round(s*this.deltaX),this.currY=this.startY+Math.round(s*this.deltaY);break;case t.FLING_MODE:var r=i/this.duration,e=Math.floor(t.NB_SAMPLES*r),n=1,h=0;if(e<t.NB_SAMPLES){var o=e/t.NB_SAMPLES,a=(e+1)/t.NB_SAMPLES,l=t.SPLINE_POSITION[e];n=l+(r-o)*(h=(t.SPLINE_POSITION[e+1]-l)/(a-o))}this.currVelocity=h*this.distance/(1e3*this.duration),this.currX=this.startX+Math.round(n*(this.finalX-this.startX)),this.currX=Math.min(this.currX,this.maxX),this.currX=Math.max(this.currX,this.minX),this.currY=this.startY+Math.round(n*(this.finalY-this.startY)),this.currY=Math.min(this.currY,this.maxY),this.currY=Math.max(this.currY,this.minY),this.currX==this.finalX&&this.currY==this.finalY&&(this.finished=!0)}else this.currX=this.finalX,this.currY=this.finalY,this.finished=!0;return!0},t.prototype.startScroll=function(i,s,r,e,n){void 0===n&&(n=t.DEFAULT_DURATION),this.mode=t.SCROLL_MODE,this.finished=!1,this.duration=n,this.startTime=Now_1.currentAnimationTimeMillis(),this.startX=i,this.startY=s,this.finalX=i+r,this.finalY=s+e,this.deltaX=r,this.deltaY=e,this.durationReciprocal=1/this.duration},t.prototype.fling=function(i,s,r,e,n,h,o,a){this.mode=t.FLING_MODE,this.finished=!1;var l=Math.hypot(r,e);this.velocity=l,this.duration=this.getSplineFlingDuration(l),this.startTime=Now_1.currentAnimationTimeMillis(),this.startX=i,this.startY=s;var c=0==l?1:r/l,u=0==l?1:e/l,f=this.getSplineFlingDistance(l);this.distance=f*Math.sign(l),this.minX=n,this.maxX=h,this.minY=o,this.maxY=a,this.finalX=i+Math.round(f*c),this.finalX=Math.min(this.finalX,this.maxX),this.finalX=Math.max(this.finalX,this.minX),this.finalY=s+Math.round(f*u),this.finalY=Math.min(this.finalY,this.maxY),this.finalY=Math.max(this.finalY,this.minY)},t.prototype.getSplineDeceleration=function(i){return Math.log(t.INFLEXION*Math.abs(i)/(this.flingFriction*this.physicalCoeff))},t.prototype.getSplineFlingDuration=function(i){var s=this.getSplineDeceleration(i),r=t.DECELERATION_RATE-1;return 1e3*Math.exp(s/r)},t.prototype.getSplineFlingDistance=function(i){var s=this.getSplineDeceleration(i),r=t.DECELERATION_RATE-1;return this.flingFriction*this.physicalCoeff*Math.exp(t.DECELERATION_RATE/r*s)},t.prototype.abortAnimation=function(){this.currX=this.finalX,this.currY=this.finalY,this.finished=!0},t.prototype.extendDuration=function(t){var i=this.timePassed();this.duration=i+t,this.durationReciprocal=1/this.duration,this.finished=!1},t.prototype.timePassed=function(){return Now_1.currentAnimationTimeMillis()-this.startTime},t.prototype.setFinalX=function(t){this.finalX=t,this.deltaX=this.finalX-this.startX,this.finished=!1},t.prototype.setFinalY=function(t){this.finalY=t,this.deltaY=this.finalY-this.startY,this.finished=!1},t.prototype.isScrollingInDirection=function(t,i){return!this.finished&&Math.sign(t)==Math.sign(this.finalX-this.startX)&&Math.sign(i)==Math.sign(this.finalY-this.startY)},t.DEFAULT_DURATION=250,t.SCROLL_MODE=0,t.FLING_MODE=1,t.DECELERATION_RATE=Math.log(.78)/Math.log(.9),t.INFLEXION=.35,t.START_TENSION=.5,t.END_TENSION=1,t.P1=t.START_TENSION*t.INFLEXION,t.P2=1-t.END_TENSION*(1-t.INFLEXION),t.NB_SAMPLES=100,t.SPLINE_POSITION=[],t.SPLINE_TIME=[],t}();exports.Scroller=Scroller;for(var x_min=0,y_min=0,i=0;i<Scroller.NB_SAMPLES;i++){for(var alpha=i/Scroller.NB_SAMPLES,x_max=1,x=0,tx=0,coef=0;tx=(coef=3*(x=x_min+(x_max-x_min)/2)*(1-x))*((1-x)*Scroller.P1+x*Scroller.P2)+x*x*x,!(Math.abs(tx-alpha)<1e-5);)tx>alpha?x_max=x:x_min=x;Scroller.SPLINE_POSITION[i]=coef*((1-x)*Scroller.START_TENSION+x)+x*x*x;for(var y_max=1,y=0,dy=0;dy=(coef=3*(y=y_min+(y_max-y_min)/2)*(1-y))*((1-y)*Scroller.START_TENSION+y)+y*y*y,!(Math.abs(dy-alpha)<1e-5);)dy>alpha?y_max=y:y_min=y;Scroller.SPLINE_TIME[i]=coef*((1-y)*Scroller.P1+y*Scroller.P2)+y*y*y}Scroller.SPLINE_POSITION[Scroller.NB_SAMPLES]=Scroller.SPLINE_TIME[Scroller.NB_SAMPLES]=1;
},{"./Now":51}],53:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var measureSpan=document.createElement("span"),TextMeasurer=function(){function e(){}return e.measureText=function(e,t){if(null===measureSpan.parentNode&&(measureSpan.style.opacity="0.0",measureSpan.style.position="absolute",measureSpan.style.left="-10000000px",measureSpan.style.top="-10000000px",document.body.appendChild(measureSpan)),measureSpan.style.fontSize=t.font.pointSize.toString()+"px",measureSpan.style.fontFamily="string"==typeof t.font.fontName?t.font.fontName:null,measureSpan.style.fontWeight="string"==typeof t.font.fontStyle?t.font.fontStyle:null,measureSpan.style.fontStyle="string"==typeof t.font.fontStyle?t.font.fontStyle:null,measureSpan.style.letterSpacing=t.letterSpace?t.letterSpace.toString():null,1===t.numberOfLines||void 0===t.numberOfLines)return measureSpan.style.overflow="hidden",measureSpan.style.wordWrap=null,measureSpan.style.wordBreak=null,measureSpan.style.display="inline-block",measureSpan.style.setProperty("-webkit-line-clamp",null),measureSpan.style.whiteSpace="nowrap",measureSpan.innerText=e,{x:0,y:0,width:Math.min(t.inRect.width,Math.ceil(measureSpan.offsetWidth+1)),height:Math.ceil(measureSpan.offsetHeight)};measureSpan.style.overflow="hidden",measureSpan.style.wordWrap=null,measureSpan.style.wordBreak=null,measureSpan.style.display="-webkit-box",measureSpan.style.webkitBoxOrient="vertical",measureSpan.style.maxWidth=t.inRect.width.toString()+"px",measureSpan.innerText=e;var n=0==t.numberOfLines?99999:t.numberOfLines,a=16;t.font&&(a=Math.max(1.5*t.font.pointSize,t.font.pointSize+12));var r=Math.min(Math.floor(t.inRect.height/a),n);return r>0&&measureSpan.style.setProperty("-webkit-line-clamp",r.toFixed(0)),{x:0,y:0,width:Math.min(t.inRect.width,Math.ceil(measureSpan.offsetWidth+1)),height:Math.min(t.inRect.height,Math.ceil(measureSpan.offsetHeight))}},e}();exports.TextMeasurer=TextMeasurer;
},{}],54:[function(require,module,exports){
!function(t,i){"object"==typeof exports&&"undefined"!=typeof module?module.exports=i():"function"==typeof define&&define.amd?define(i):t.rebound=i()}(this,function(){"use strict";var t=void 0;"undefined"!=typeof window&&(t=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame),t||"undefined"==typeof process||"node"!==process.title||(t=setImmediate);var i=t=t||function(t){window.setTimeout(t,1e3/60)},e=Array.prototype.concat,n=Array.prototype.slice;function r(t){return i(t)}function o(t,i){var e=t.indexOf(i);-1!==e&&t.splice(e,1)}var s={};function h(t){if(s[t])return s[t];var i=t.replace("#","");3===i.length&&(i=i[0]+i[0]+i[1]+i[1]+i[2]+i[2]);var e=i.match(/.{2}/g);if(!e||e.length<3)throw new Error("Expected a color string of format #rrggbb");var n={r:parseInt(e[0],16),g:parseInt(e[1],16),b:parseInt(e[2],16)};return s[t]=n,n}function a(t,i,e){var n=t.toString(16),r=i.toString(16),o=e.toString(16);return"#"+(n=n.length<2?"0"+n:n)+(r=r.length<2?"0"+r:r)+(o=o.length<2?"0"+o:o)}var p=Object.freeze({bind:function(t,i){for(var r=arguments.length,o=Array(r>2?r-2:0),s=2;s<r;s++)o[s-2]=arguments[s];return function(){for(var r=arguments.length,s=Array(r),h=0;h<r;h++)s[h]=arguments[h];t.apply(i,e.call(o,n.call(s)))}},extend:function(t,i){for(var e in i)i.hasOwnProperty(e)&&(t[e]=i[e])},onFrame:r,removeFirst:o,hexToRGB:h,rgbToHex:a});function u(t,i,e,n,r){return n+(t-i)/(e-i)*(r-n)}var c=Object.freeze({mapValueInRange:u,interpolateColor:function(t,i,e){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,o=arguments[5],s=h(i),p=h(e),c=Math.floor(u(t,n,r,s.r,p.r)),l=Math.floor(u(t,n,r,s.g,p.g)),g=Math.floor(u(t,n,r,s.b,p.b));return o?"rgb("+c+","+l+","+g+")":a(c,l,g)},degreesToRadians:function(t){return t*Math.PI/180},radiansToDegrees:function(t){return 180*t/Math.PI}});function l(t){return 3.62*(t-30)+194}function g(t){return 3*(t-8)+25}var f=Object.freeze({tensionFromOrigamiValue:l,origamiValueFromTension:function(t){return(t-194)/3.62+30},frictionFromOrigamiValue:g,origamiFromFriction:function(t){return(t-25)/3+8}}),_=function(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")},d=Object.assign||function(t){for(var i=1;i<arguments.length;i++){var e=arguments[i];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}return t},S=function(){function t(){_(this,t),this.springSystem=null}return t.prototype.run=function(){var t=v.call(this);r(function(){t.loop(Date.now())})},t}(),y=function(){function t(i){_(this,t),this.springSystem=null,this.time=0,this.running=!1,this.timestep=i||16.667}return t.prototype.run=function(){var t=v.call(this);if(!this.running){for(this.running=!0;!t.getIsIdle();)t.loop(this.time+=this.timestep);this.running=!1}},t}(),m=function(){function t(){_(this,t),this.springSystem=null,this.time=0,this.running=!1}return t.prototype.run=function(){},t.prototype.step=function(t){v.call(this).loop(this.time+=t)},t}();function v(){if(null==this.springSystem)throw new Error("cannot run looper without a springSystem");return this.springSystem}var E=Object.freeze({AnimationLooper:S,SimulationLooper:y,SteppingSimulationLooper:m}),I=function(){function t(i,e){_(this,t),this.bounciness=i,this.speed=e;var n=this.normalize(i/1.7,0,20);n=this.projectNormal(n,0,.8);var r=this.normalize(e/1.7,0,20);this.bouncyTension=this.projectNormal(r,.5,200),this.bouncyFriction=this.quadraticOutInterpolation(n,this.b3Nobounce(this.bouncyTension),.01)}return t.prototype.normalize=function(t,i,e){return(t-i)/(e-i)},t.prototype.projectNormal=function(t,i,e){return i+t*(e-i)},t.prototype.linearInterpolation=function(t,i,e){return t*e+(1-t)*i},t.prototype.quadraticOutInterpolation=function(t,i,e){return this.linearInterpolation(2*t-t*t,i,e)},t.prototype.b3Friction1=function(t){return 7e-4*Math.pow(t,3)-.031*Math.pow(t,2)+.64*t+1.28},t.prototype.b3Friction2=function(t){return 44e-6*Math.pow(t,3)-.006*Math.pow(t,2)+.36*t+2},t.prototype.b3Friction3=function(t){return 4.5e-7*Math.pow(t,3)-332e-6*Math.pow(t,2)+.1078*t+5.84},t.prototype.b3Nobounce=function(t){return t<=18?this.b3Friction1(t):t>18&&t<=44?this.b3Friction2(t):this.b3Friction3(t)},t}(),T=function(){function t(i,e){_(this,t),this.tension=i,this.friction=e}return t.fromOrigamiTensionAndFriction=function(i,e){return new t(l(i),g(e))},t.fromBouncinessAndSpeed=function(i,e){var n=new I(i,e);return t.fromOrigamiTensionAndFriction(n.bouncyTension,n.bouncyFriction)},t.coastingConfigWithOrigamiFriction=function(i){return new t(0,g(i))},t}();T.DEFAULT_ORIGAMI_SPRING_CONFIG=T.fromOrigamiTensionAndFriction(40,7);var A=function t(){_(this,t),this.position=0,this.velocity=0},R=function(){function t(i){_(this,t),this.listeners=[],this._startValue=0,this._currentState=new A,this._displacementFromRestThreshold=.001,this._endValue=0,this._overshootClampingEnabled=!1,this._previousState=new A,this._restSpeedThreshold=.001,this._tempState=new A,this._timeAccumulator=0,this._wasAtRest=!0,this._id="s"+t._ID++,this._springSystem=i}return t.prototype.destroy=function(){this.listeners=[],this._springSystem.deregisterSpring(this)},t.prototype.getId=function(){return this._id},t.prototype.setSpringConfig=function(t){return this._springConfig=t,this},t.prototype.getSpringConfig=function(){return this._springConfig},t.prototype.setCurrentValue=function(t,i){return this._startValue=t,this._currentState.position=t,i||this.setAtRest(),this.notifyPositionUpdated(!1,!1),this},t.prototype.getStartValue=function(){return this._startValue},t.prototype.getCurrentValue=function(){return this._currentState.position},t.prototype.getCurrentDisplacementDistance=function(){return this.getDisplacementDistanceForState(this._currentState)},t.prototype.getDisplacementDistanceForState=function(t){return Math.abs(this._endValue-t.position)},t.prototype.setEndValue=function(t){if(this._endValue===t&&this.isAtRest())return this;this._startValue=this.getCurrentValue(),this._endValue=t,this._springSystem.activateSpring(this.getId());for(var i=0,e=this.listeners.length;i<e;i++){var n=this.listeners[i].onSpringEndStateChange;n&&n(this)}return this},t.prototype.getEndValue=function(){return this._endValue},t.prototype.setVelocity=function(t){return t===this._currentState.velocity?this:(this._currentState.velocity=t,this._springSystem.activateSpring(this.getId()),this)},t.prototype.getVelocity=function(){return this._currentState.velocity},t.prototype.setRestSpeedThreshold=function(t){return this._restSpeedThreshold=t,this},t.prototype.getRestSpeedThreshold=function(){return this._restSpeedThreshold},t.prototype.setRestDisplacementThreshold=function(t){this._displacementFromRestThreshold=t},t.prototype.getRestDisplacementThreshold=function(){return this._displacementFromRestThreshold},t.prototype.setOvershootClampingEnabled=function(t){return this._overshootClampingEnabled=t,this},t.prototype.isOvershootClampingEnabled=function(){return this._overshootClampingEnabled},t.prototype.isOvershooting=function(){var t=this._startValue,i=this._endValue;return this._springConfig.tension>0&&(t<i&&this.getCurrentValue()>i||t>i&&this.getCurrentValue()<i)},t.prototype.advance=function(i,e){var n=this.isAtRest();if(!n||!this._wasAtRest){var r=e;e>t.MAX_DELTA_TIME_SEC&&(r=t.MAX_DELTA_TIME_SEC),this._timeAccumulator+=r;for(var o=this._springConfig.tension,s=this._springConfig.friction,h=this._currentState.position,a=this._currentState.velocity,p=this._tempState.position,u=this._tempState.velocity,c=void 0,l=void 0,g=void 0,f=void 0,_=void 0,d=void 0,S=void 0,y=void 0;this._timeAccumulator>=t.SOLVER_TIMESTEP_SEC;)this._timeAccumulator-=t.SOLVER_TIMESTEP_SEC,this._timeAccumulator<t.SOLVER_TIMESTEP_SEC&&(this._previousState.position=h,this._previousState.velocity=a),c=a,l=o*(this._endValue-p)-s*a,p=h+c*t.SOLVER_TIMESTEP_SEC*.5,g=u=a+l*t.SOLVER_TIMESTEP_SEC*.5,f=o*(this._endValue-p)-s*u,p=h+g*t.SOLVER_TIMESTEP_SEC*.5,_=u=a+f*t.SOLVER_TIMESTEP_SEC*.5,d=o*(this._endValue-p)-s*u,p=h+_*t.SOLVER_TIMESTEP_SEC,S=u=a+d*t.SOLVER_TIMESTEP_SEC,y=1/6*(l+2*(f+d)+(o*(this._endValue-p)-s*u)),h+=1/6*(c+2*(g+_)+S)*t.SOLVER_TIMESTEP_SEC,a+=y*t.SOLVER_TIMESTEP_SEC;this._tempState.position=p,this._tempState.velocity=u,this._currentState.position=h,this._currentState.velocity=a,this._timeAccumulator>0&&this._interpolate(this._timeAccumulator/t.SOLVER_TIMESTEP_SEC),(this.isAtRest()||this._overshootClampingEnabled&&this.isOvershooting())&&(this._springConfig.tension>0?(this._startValue=this._endValue,this._currentState.position=this._endValue):(this._endValue=this._currentState.position,this._startValue=this._endValue),this.setVelocity(0),n=!0);var m=!1;this._wasAtRest&&(this._wasAtRest=!1,m=!0);var v=!1;n&&(this._wasAtRest=!0,v=!0),this.notifyPositionUpdated(m,v)}},t.prototype.notifyPositionUpdated=function(t,i){for(var e=0,n=this.listeners.length;e<n;e++){var r=this.listeners[e];t&&r.onSpringActivate&&r.onSpringActivate(this),r.onSpringUpdate&&r.onSpringUpdate(this),i&&r.onSpringAtRest&&r.onSpringAtRest(this)}},t.prototype.systemShouldAdvance=function(){return!this.isAtRest()||!this.wasAtRest()},t.prototype.wasAtRest=function(){return this._wasAtRest},t.prototype.isAtRest=function(){return Math.abs(this._currentState.velocity)<this._restSpeedThreshold&&(this.getDisplacementDistanceForState(this._currentState)<=this._displacementFromRestThreshold||0===this._springConfig.tension)},t.prototype.setAtRest=function(){return this._endValue=this._currentState.position,this._tempState.position=this._currentState.position,this._currentState.velocity=0,this},t.prototype._interpolate=function(t){this._currentState.position=this._currentState.position*t+this._previousState.position*(1-t),this._currentState.velocity=this._currentState.velocity*t+this._previousState.velocity*(1-t)},t.prototype.getListeners=function(){return this.listeners},t.prototype.addListener=function(t){return this.listeners.push(t),this},t.prototype.removeListener=function(t){return o(this.listeners,t),this},t.prototype.removeAllListeners=function(){return this.listeners=[],this},t.prototype.currentValueIsApproximately=function(t){return Math.abs(this.getCurrentValue()-t)<=this.getRestDisplacementThreshold()},t}();R._ID=0,R.MAX_DELTA_TIME_SEC=.064,R.SOLVER_TIMESTEP_SEC=.001;var V=function(){function t(i){_(this,t),this.listeners=[],this._activeSprings=[],this._idleSpringIndices=[],this._isIdle=!0,this._lastTimeMillis=-1,this._springRegistry={},this.looper=i||new S,this.looper.springSystem=this}return t.prototype.setLooper=function(t){this.looper=t,t.springSystem=this},t.prototype.createSpring=function(t,i){var e=void 0;return e=void 0===t||void 0===i?T.DEFAULT_ORIGAMI_SPRING_CONFIG:T.fromOrigamiTensionAndFriction(t,i),this.createSpringWithConfig(e)},t.prototype.createSpringWithBouncinessAndSpeed=function(t,i){var e=void 0;return e=void 0===t||void 0===i?T.DEFAULT_ORIGAMI_SPRING_CONFIG:T.fromBouncinessAndSpeed(t,i),this.createSpringWithConfig(e)},t.prototype.createSpringWithConfig=function(t){var i=new R(this);return this.registerSpring(i),i.setSpringConfig(t),i},t.prototype.getIsIdle=function(){return this._isIdle},t.prototype.getSpringById=function(t){return this._springRegistry[t]},t.prototype.getAllSprings=function(){var t=[];for(var i in this._springRegistry)this._springRegistry.hasOwnProperty(i)&&t.push(this._springRegistry[i]);return t},t.prototype.registerSpring=function(t){this._springRegistry[t.getId()]=t},t.prototype.deregisterSpring=function(t){o(this._activeSprings,t),delete this._springRegistry[t.getId()]},t.prototype.advance=function(t,i){for(;this._idleSpringIndices.length>0;)this._idleSpringIndices.pop();for(var e=0,n=this._activeSprings.length;e<n;e++){var r=this._activeSprings[e];r.systemShouldAdvance()?r.advance(t/1e3,i/1e3):this._idleSpringIndices.push(this._activeSprings.indexOf(r))}for(;this._idleSpringIndices.length>0;){var o=this._idleSpringIndices.pop();o>=0&&this._activeSprings.splice(o,1)}},t.prototype.loop=function(t){var i=void 0;-1===this._lastTimeMillis&&(this._lastTimeMillis=t-1);var e=t-this._lastTimeMillis;this._lastTimeMillis=t;var n=0,r=this.listeners.length;for(n=0;n<r;n++)(i=this.listeners[n]).onBeforeIntegrate&&i.onBeforeIntegrate(this);for(this.advance(t,e),0===this._activeSprings.length&&(this._isIdle=!0,this._lastTimeMillis=-1),n=0;n<r;n++)(i=this.listeners[n]).onAfterIntegrate&&i.onAfterIntegrate(this);this._isIdle||this.looper.run()},t.prototype.activateSpring=function(t){var i=this._springRegistry[t];-1===this._activeSprings.indexOf(i)&&this._activeSprings.push(i),this.getIsIdle()&&(this._isIdle=!1,this.looper.run())},t.prototype.addListener=function(t){this.listeners.push(t)},t.prototype.removeListener=function(t){o(this.listeners,t)},t.prototype.removeAllListeners=function(){this.listeners=[]},t}();return d({},E,{OrigamiValueConverter:f,MathUtil:c,Spring:R,SpringConfig:T,SpringSystem:V,util:d({},p,c)})});
},{}]},{},[5]);
