(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var UIRect_1=require("../uikit/UIRect"),CALayer=function(){return function(){this._view=void 0,this.frame=UIRect_1.UIRectZero}}();exports.CALayer=CALayer;
},{"../uikit/UIRect":16}],2:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var DispatchQueue=function(){function e(e){}return e.prototype.async=function(e){setTimeout(e,0)},e.prototype.asyncAfter=function(e,t){setTimeout(t,1e3*e)},e.prototype.isolate=function(e){for(var t=[],o=1;o<arguments.length;o++)t[o-1]=arguments[o];setTimeout(function(){e.apply(void 0,t)},0)},e.main=new e,e.global=new e,e}();exports.DispatchQueue=DispatchQueue;
},{}],3:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var EventEmitterIMP=require("./EventEmitterImp");console.log(EventEmitterIMP.EventEmitter),exports.EventEmitter=EventEmitterIMP.EventEmitter;
},{"./EventEmitterImp":4}],4:[function(require,module,exports){
!function(e){"use strict";function t(){}var n=t.prototype;e.EventEmitter;function r(e,t){for(var n=e.length;n--;)if(e[n].listener===t)return n;return-1}function i(e){return function(){return this[e].apply(this,arguments)}}n.getListeners=function(e){var t,n,r=this._getEvents();if(e instanceof RegExp)for(n in t={},r)r.hasOwnProperty(n)&&e.test(n)&&(t[n]=r[n]);else t=r[e]||(r[e]=[]);return t},n.flattenListeners=function(e){var t,n=[];for(t=0;t<e.length;t+=1)n.push(e[t].listener);return n},n.getListenersAsObject=function(e){var t,n=this.getListeners(e);return n instanceof Array&&((t={})[e]=n),t||n},n.addListener=function(e,t){if(!function e(t){return"function"==typeof t||t instanceof RegExp||!(!t||"object"!=typeof t)&&e(t.listener)}(t))throw new TypeError("listener must be a function");var n,i=this.getListenersAsObject(e),s="object"==typeof t;for(n in i)i.hasOwnProperty(n)&&-1===r(i[n],t)&&i[n].push(s?t:{listener:t,once:!1});return this},n.on=i("addListener"),n.addOnceListener=function(e,t){return this.addListener(e,{listener:t,once:!0})},n.once=i("addOnceListener"),n.defineEvent=function(e){return this.getListeners(e),this},n.defineEvents=function(e){for(var t=0;t<e.length;t+=1)this.defineEvent(e[t]);return this},n.removeListener=function(e,t){var n,i,s=this.getListenersAsObject(e);for(i in s)s.hasOwnProperty(i)&&-1!==(n=r(s[i],t))&&s[i].splice(n,1);return this},n.off=i("removeListener"),n.addListeners=function(e,t){return this.manipulateListeners(!1,e,t)},n.removeListeners=function(e,t){return this.manipulateListeners(!0,e,t)},n.manipulateListeners=function(e,t,n){var r,i,s=e?this.removeListener:this.addListener,o=e?this.removeListeners:this.addListeners;if("object"!=typeof t||t instanceof RegExp)for(r=n.length;r--;)s.call(this,t,n[r]);else for(r in t)t.hasOwnProperty(r)&&(i=t[r])&&("function"==typeof i?s.call(this,r,i):o.call(this,r,i));return this},n.removeEvent=function(e){var t,n=typeof e,r=this._getEvents();if("string"===n)delete r[e];else if(e instanceof RegExp)for(t in r)r.hasOwnProperty(t)&&e.test(t)&&delete r[t];else delete this._events;return this},n.removeAllListeners=i("removeEvent"),n.emitEvent=function(e,t){var n,r,i,s,o=this.getListenersAsObject(e);for(s in o)if(o.hasOwnProperty(s))for(n=o[s].slice(0),i=0;i<n.length;i++)!0===(r=n[i]).once&&this.removeListener(e,r.listener),r.listener.apply(this,t||[])===this._getOnceReturnValue()&&this.removeListener(e,r.listener);return this},n.val=function(e){var t,n,r,i,s=Array.prototype.slice.call(arguments,1),o=this.getListenersAsObject(e);for(i in o)if(o.hasOwnProperty(i))for(t=o[i].slice(0),r=0;r<t.length;r++)return!0===(n=t[r]).once&&this.removeListener(e,n.listener),n.listener.apply(this,s||[])},n.trigger=i("emitEvent"),n.emit=function(e){var t=Array.prototype.slice.call(arguments,1);return this.emitEvent(e,t)},n.setOnceReturnValue=function(e){return this._onceReturnValue=e,this},n._getOnceReturnValue=function(){return!this.hasOwnProperty("_onceReturnValue")||this._onceReturnValue},n._getEvents=function(){return this._events||(this._events={})},e.EventEmitter=t}(this||{});
},{}],5:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),void 0===window.global&&(window.global=window);var UIEnums_1=require("./uikit/UIEnums");global.UIViewContentMode=UIEnums_1.UIViewContentMode,global.UIControlState=UIEnums_1.UIControlState,global.UIControlContentVerticalAlignment=UIEnums_1.UIControlContentVerticalAlignment,global.UIControlContentHorizontalAlignment=UIEnums_1.UIControlContentHorizontalAlignment,global.UITextAlignment=UIEnums_1.UITextAlignment,global.UILineBreakMode=UIEnums_1.UILineBreakMode,global.UITextFieldViewMode=UIEnums_1.UITextFieldViewMode,global.UITextAutocapitalizationType=UIEnums_1.UITextAutocapitalizationType,global.UITextAutocorrectionType=UIEnums_1.UITextAutocorrectionType,global.UITextSpellCheckingType=UIEnums_1.UITextSpellCheckingType,global.UIKeyboardType=UIEnums_1.UIKeyboardType,global.UIReturnKeyType=UIEnums_1.UIReturnKeyType,global.UILayoutConstraintAxis=UIEnums_1.UILayoutConstraintAxis,global.UIStackViewDistribution=UIEnums_1.UIStackViewDistribution,global.UIStackViewAlignment=UIEnums_1.UIStackViewAlignment,global.UIStatusBarStyle=UIEnums_1.UIStatusBarStyle;var UIView_1=require("./uikit/UIView");global.UIView=UIView_1.UIView,global.UIWindow=UIView_1.UIWindow;var UIGestureRecognizer_1=require("./uikit/UIGestureRecognizer");global.UIGestureRecognizerState=UIGestureRecognizer_1.UIGestureRecognizerState,global.UIGestureRecognizer=UIGestureRecognizer_1.UIGestureRecognizer;var UITapGestureRecognizer_1=require("./uikit/UITapGestureRecognizer");global.UITapGestureRecognizer=UITapGestureRecognizer_1.UITapGestureRecognizer;var UILongPressGestureRecognizer_1=require("./uikit/UILongPressGestureRecognizer");global.UILongPressGestureRecognizer=UILongPressGestureRecognizer_1.UILongPressGestureRecognizer;var UIPanGestureRecognizer_1=require("./uikit/UIPanGestureRecognizer");global.UIPanGestureRecognizer=UIPanGestureRecognizer_1.UIPanGestureRecognizer;var UIPinchGestureRecognizer_1=require("./uikit/UIPinchGestureRecognizer");global.UIPinchGestureRecognizer=UIPinchGestureRecognizer_1.UIPinchGestureRecognizer;var UIRotationGestureRecognizer_1=require("./uikit/UIRotationGestureRecognizer");global.UIRotationGestureRecognizer=UIRotationGestureRecognizer_1.UIRotationGestureRecognizer;var UIColor_1=require("./uikit/UIColor");global.UIColor=UIColor_1.UIColor;var UIAnimator_1=require("./uikit/UIAnimator");global.UIAnimator=UIAnimator_1.UIAnimator;var DispatchQueue_1=require("./foundation/DispatchQueue");global.DispatchQueue=DispatchQueue_1.DispatchQueue;
},{"./foundation/DispatchQueue":2,"./uikit/UIAnimator":7,"./uikit/UIColor":8,"./uikit/UIEnums":10,"./uikit/UIGestureRecognizer":11,"./uikit/UILongPressGestureRecognizer":12,"./uikit/UIPanGestureRecognizer":13,"./uikit/UIPinchGestureRecognizer":14,"./uikit/UIRotationGestureRecognizer":17,"./uikit/UITapGestureRecognizer":18,"./uikit/UIView":20}],6:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.UIAffineTransformIdentity={a:1,b:0,c:0,d:1,tx:0,ty:0},exports.UIAffineTransformIsIdentity=function(t){return 1==t.a&&0==t.b&&0==t.c&&1==t.d&&0==t.tx&&0==t.ty},exports.UIAffineTransformEqual=function(t,e){return t.a==e.a&&t.b==e.b&&t.c==e.c&&t.d==e.d&&t.tx==e.tx&&t.ty==e.ty};
},{}],7:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var LinearAnimator_1=require("./helpers/LinearAnimator"),SpringSystem=require("./helpers/rebound.min").SpringSystem,LinearAnimation=function(){function n(n){this.animator=n}return n.prototype.setStartValue=function(n){this.animator.startValue=n},n.prototype.setEndValue=function(n){this.animator.endValue=n,this.animator.start()},n.prototype.setUpdateListener=function(n){this.animator.addListener({onUpdate:function(t){n(t)},onEnd:function(){}})},n.prototype.cancel=function(){this.animator.cancel()},n}(),SpringAnimation=function(){function n(n){this.spring=n}return n.prototype.setStartValue=function(n){this.spring.setCurrentValue(n)},n.prototype.setEndValue=function(n){this.spring.setEndValue(n)},n.prototype.setUpdateListener=function(n){var t=this;this.spring.addListener({onSpringUpdate:function(){n(t.spring.getCurrentValue())}})},n.prototype.cancel=function(){this.spring.removeAllListeners()},n}(),UIAnimator=function(){function n(){this.springSystem=new SpringSystem,this.animationCreater=void 0}return n.prototype.linear=function(t,i,e,r){n.activeAnimator=this;var a=!1;this.animationCreater=function(){var n=new LinearAnimator_1.LinearAndCurveAnimator(i);return n.duration=1e3*t,n.addListener({onUpdate:function(){},onEnd:function(){a||(a=!0,r&&r())}}),new LinearAnimation(n)},e(),n.activeAnimator=void 0},n.linear=function(t,i,e){n.shared.linear(t,!1,i,e)},n.curve=function(t,i,e){n.shared.linear(t,!0,i,e)},n.prototype.spring=function(t,i,e,r,a){var o=this;n.activeAnimator=this;var s=!1;this.animationCreater=function(){var n=e?o.springSystem.createSpringWithBouncinessAndSpeed(t,i):o.springSystem.createSpring(t,i);return n.addListener({onSpringAtRest:function(){s||(s=!0,a&&a())}}),new SpringAnimation(n)},r(),n.activeAnimator=void 0},n.spring=function(t,i,e,r){n.shared.spring(t,i,!1,e,r)},n.bouncy=function(t,i,e,r){n.shared.spring(t,i,!0,e,r)},n.shared=new n,n.duringAnimationValueSet=!1,n.activeAnimator=void 0,n}();exports.UIAnimator=UIAnimator;
},{"./helpers/LinearAnimator":22,"./helpers/rebound.min":24}],8:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var UIColor=function(){function e(e,t,r,o){this.r=e,this.g=t,this.b=r,this.a=o}return e.prototype.toStyle=function(){return"rgba("+(255*this.r).toFixed(0)+", "+(255*this.g).toFixed(0)+", "+(255*this.b).toFixed(0)+", "+this.a.toString()+")"},e.black=new e(0,0,0,1),e.clear=new e(0,0,0,0),e.gray=new e(.5,.5,.5,1),e.red=new e(1,0,0,1),e.yellow=new e(1,1,0,1),e.green=new e(0,1,0,1),e.blue=new e(0,0,1,1),e.white=new e(1,1,1,1),e}();exports.UIColor=UIColor;
},{}],9:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.UIEdgeInsetsZero={top:0,left:0,bottom:0,right:0};
},{}],10:[function(require,module,exports){
"use strict";var UIViewContentMode,UIControlState,UIControlContentVerticalAlignment,UIControlContentHorizontalAlignment,UITextAlignment,UILineBreakMode,UITextFieldViewMode,UITextAutocapitalizationType,UITextAutocorrectionType,UITextSpellCheckingType,UIKeyboardType,UIReturnKeyType,UILayoutConstraintAxis,UIStackViewDistribution,UIStackViewAlignment,UIStatusBarStyle;Object.defineProperty(exports,"__esModule",{value:!0}),function(e){e[e.scaleToFill=0]="scaleToFill",e[e.scaleAspectFit=1]="scaleAspectFit",e[e.scaleAspectFill=2]="scaleAspectFill"}(UIViewContentMode=exports.UIViewContentMode||(exports.UIViewContentMode={})),function(e){e[e.normal=0]="normal",e[e.highlighted=1]="highlighted",e[e.disabled=2]="disabled",e[e.selected=3]="selected"}(UIControlState=exports.UIControlState||(exports.UIControlState={})),function(e){e[e.center=0]="center",e[e.top=1]="top",e[e.bottom=2]="bottom",e[e.fill=3]="fill"}(UIControlContentVerticalAlignment=exports.UIControlContentVerticalAlignment||(exports.UIControlContentVerticalAlignment={})),function(e){e[e.center=0]="center",e[e.left=1]="left",e[e.right=2]="right",e[e.fill=3]="fill"}(UIControlContentHorizontalAlignment=exports.UIControlContentHorizontalAlignment||(exports.UIControlContentHorizontalAlignment={})),function(e){e[e.left=0]="left",e[e.center=1]="center",e[e.right=2]="right"}(UITextAlignment=exports.UITextAlignment||(exports.UITextAlignment={})),function(e){e[e.wordWrapping=0]="wordWrapping",e[e.charWrapping=1]="charWrapping",e[e.clipping=2]="clipping",e[e.truncatingHead=3]="truncatingHead",e[e.truncatingTail=4]="truncatingTail",e[e.truncatingMiddle=5]="truncatingMiddle"}(UILineBreakMode=exports.UILineBreakMode||(exports.UILineBreakMode={})),function(e){e[e.never=0]="never",e[e.whileEditing=1]="whileEditing",e[e.unlessEditing=2]="unlessEditing",e[e.always=3]="always"}(UITextFieldViewMode=exports.UITextFieldViewMode||(exports.UITextFieldViewMode={})),function(e){e[e.none=0]="none",e[e.words=1]="words",e[e.sentences=2]="sentences",e[e.allCharacters=3]="allCharacters"}(UITextAutocapitalizationType=exports.UITextAutocapitalizationType||(exports.UITextAutocapitalizationType={})),function(e){e[e.default=0]="default",e[e.no=1]="no",e[e.yes=2]="yes"}(UITextAutocorrectionType=exports.UITextAutocorrectionType||(exports.UITextAutocorrectionType={})),function(e){e[e.default=0]="default",e[e.no=1]="no",e[e.yes=2]="yes"}(UITextSpellCheckingType=exports.UITextSpellCheckingType||(exports.UITextSpellCheckingType={})),function(e){e[e.default=0]="default",e[e.ASCIICapable=1]="ASCIICapable",e[e.numbersAndPunctuation=2]="numbersAndPunctuation",e[e.numberPad=3]="numberPad",e[e.phonePad=4]="phonePad",e[e.emailAddress=5]="emailAddress",e[e.decimalPad=6]="decimalPad"}(UIKeyboardType=exports.UIKeyboardType||(exports.UIKeyboardType={})),function(e){e[e.default=0]="default",e[e.go=1]="go",e[e.next=2]="next",e[e.send=3]="send",e[e.done=4]="done"}(UIReturnKeyType=exports.UIReturnKeyType||(exports.UIReturnKeyType={})),function(e){e[e.horizontal=0]="horizontal",e[e.vertical=1]="vertical"}(UILayoutConstraintAxis=exports.UILayoutConstraintAxis||(exports.UILayoutConstraintAxis={})),function(e){e[e.fill=0]="fill",e[e.fillEqually=1]="fillEqually",e[e.fillProportionally=2]="fillProportionally",e[e.equalSpacing=3]="equalSpacing",e[e.equalCentering=4]="equalCentering"}(UIStackViewDistribution=exports.UIStackViewDistribution||(exports.UIStackViewDistribution={})),function(e){e[e.fill=0]="fill",e[e.leading=1]="leading",e[e.center=2]="center",e[e.trailing=3]="trailing"}(UIStackViewAlignment=exports.UIStackViewAlignment||(exports.UIStackViewAlignment={})),function(e){e[e.default=0]="default",e[e.lightContent=1]="lightContent"}(UIStatusBarStyle=exports.UIStatusBarStyle||(exports.UIStatusBarStyle={}));
},{}],11:[function(require,module,exports){
"use strict";var __extends=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(exports,"__esModule",{value:!0});var UIGestureRecognizerState,UIPoint_1=require("./UIPoint"),EventEmitter_1=require("../kimi/EventEmitter");!function(e){e[e.possible=0]="possible",e[e.began=1]="began",e[e.changed=2]="changed",e[e.ended=3]="ended",e[e.cancelled=4]="cancelled",e[e.failed=5]="failed"}(UIGestureRecognizerState=exports.UIGestureRecognizerState||(exports.UIGestureRecognizerState={}));var UIGestureRecognizer=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state=UIGestureRecognizerState.possible,t.enabled=!0,t.view=void 0,t.touches=[],t}return __extends(t,e),t.prototype.requireGestureRecognizerToFail=function(e){},t.prototype.locationInView=function(e){var t=this.touches[0];return t?t.locationInView(e):UIPoint_1.UIPointZero},t.prototype.numberOfTouches=function(){return this.touches.values.length},t.prototype.locationOfTouch=function(e,t){var n=this.touches[e];return n?n.locationInView(t):UIPoint_1.UIPointZero},t.prototype.handleTouch=function(e){this.touches=e},t.prototype.handleEvent=function(e){},t}(EventEmitter_1.EventEmitter);exports.UIGestureRecognizer=UIGestureRecognizer;
},{"../kimi/EventEmitter":3,"./UIPoint":15}],12:[function(require,module,exports){
"use strict";var __extends=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(exports,"__esModule",{value:!0});var UIGestureRecognizer_1=require("./UIGestureRecognizer"),UITouch_1=require("./UITouch"),UIView_1=require("./UIView"),UILongPressGestureRecognizer=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.numberOfTapsRequired=1,t.numberOfTouchesRequired=1,t.minimumPressDuration=.5,t.allowableMovement=10,t.beganPoints={},t}return __extends(t,e),t.prototype.handleTouch=function(t){var n=this;e.prototype.handleTouch.call(this,t),t.forEach(function(e){if(e.phase==UITouch_1.UITouchPhase.began){if(null!=UIView_1.UIView.recognizedGesture)return void(n.beganPoints={});e.windowPoint&&(n.beganPoints[e.identifier]=e.windowPoint),void 0===n.timerTask&&Object.keys(n.beganPoints).length>=n.numberOfTouchesRequired&&(n.timerTask=setTimeout(function(){null==UIView_1.UIView.recognizedGesture&&n.state==UIGestureRecognizer_1.UIGestureRecognizerState.possible?(UIView_1.UIView.recognizedGesture=n,n.state=UIGestureRecognizer_1.UIGestureRecognizerState.began,n.handleEvent("began"),n.emit("began",n)):n.state=UIGestureRecognizer_1.UIGestureRecognizerState.failed},1e3*n.minimumPressDuration))}else if(e.phase==UITouch_1.UITouchPhase.moved)if(n.state==UIGestureRecognizer_1.UIGestureRecognizerState.possible){if(e.windowPoint&&n.beganPoints[e.identifier]){var t=n.beganPoints[e.identifier];(Math.abs(t.x-e.windowPoint.x)>=n.allowableMovement||Math.abs(t.y-e.windowPoint.y)>=n.allowableMovement)&&(clearTimeout(n.timerTask),n.state=UIGestureRecognizer_1.UIGestureRecognizerState.failed)}}else n.state!=UIGestureRecognizer_1.UIGestureRecognizerState.began&&n.state!=UIGestureRecognizer_1.UIGestureRecognizerState.changed||(n.state=UIGestureRecognizer_1.UIGestureRecognizerState.changed,n.handleEvent("changed"),n.emit("changed",n));else e.phase==UITouch_1.UITouchPhase.ended?(clearTimeout(n.timerTask),n.timerTask=void 0,n.state!=UIGestureRecognizer_1.UIGestureRecognizerState.began&&n.state!=UIGestureRecognizer_1.UIGestureRecognizerState.changed||(n.state=UIGestureRecognizer_1.UIGestureRecognizerState.ended,n.handleEvent("ended"),n.emit("ended",n),setTimeout(function(){UIView_1.UIView.recognizedGesture=void 0})),n.state=UIGestureRecognizer_1.UIGestureRecognizerState.possible,n.beganPoints={}):e.phase==UITouch_1.UITouchPhase.cancelled&&(clearTimeout(n.timerTask),n.timerTask=void 0,n.state!=UIGestureRecognizer_1.UIGestureRecognizerState.began&&n.state!=UIGestureRecognizer_1.UIGestureRecognizerState.changed||(n.state=UIGestureRecognizer_1.UIGestureRecognizerState.cancelled,n.handleEvent("cancelled"),n.emit("cancelled",n),setTimeout(function(){UIView_1.UIView.recognizedGesture=void 0})),n.state=UIGestureRecognizer_1.UIGestureRecognizerState.possible,n.beganPoints={})})},t}(UIGestureRecognizer_1.UIGestureRecognizer);exports.UILongPressGestureRecognizer=UILongPressGestureRecognizer;
},{"./UIGestureRecognizer":11,"./UITouch":19,"./UIView":20}],13:[function(require,module,exports){
"use strict";var __extends=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(exports,"__esModule",{value:!0});var UIGestureRecognizer_1=require("./UIGestureRecognizer"),UIView_1=require("./UIView"),UITouch_1=require("./UITouch"),UIPanGestureRecognizer=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.lockedDirection=void 0,t.firstTouch=void 0,t.translationPoint=void 0,t.beganPoints={},t}return __extends(t,e),t.prototype.translationInView=function(e){if(!this.firstTouch)return{x:0,y:0};var t=this.firstTouch.windowPoint;if(!t)return{x:0,y:0};var i=this.translationPoint;return i?{x:t.x-i.x,y:t.y-i.y}:{x:0,y:0}},t.prototype.setTranslation=function(e,t){if(this.firstTouch){var i=this.firstTouch.windowPoint;i&&(this.translationPoint={x:i.x-e.x,y:i.y-e.y})}},t.prototype.velocityInView=function(e){return UIView_1.sharedVelocityTracker.computeCurrentVelocity(),UIView_1.sharedVelocityTracker.velocity},t.prototype.handleTouch=function(t){var i=this;e.prototype.handleTouch.call(this,t),t.forEach(function(e){if(0==e.identifier&&(i.firstTouch=e),e.phase==UITouch_1.UITouchPhase.began){if(null!=UIView_1.UIView.recognizedGesture&&UIView_1.UIView.recognizedGesture!=i)return void(i.beganPoints={});e.windowPoint&&(i.beganPoints[e.identifier]=e.windowPoint),0==e.identifier&&(i.translationPoint=e.windowPoint)}else if(e.phase==UITouch_1.UITouchPhase.moved)if(i.state==UIGestureRecognizer_1.UIGestureRecognizerState.possible){if(null!=UIView_1.UIView.recognizedGesture&&UIView_1.UIView.recognizedGesture!=i)return void(i.state=UIGestureRecognizer_1.UIGestureRecognizerState.failed);if(e.windowPoint&&i.beganPoints[e.identifier]){var t=i.beganPoints[e.identifier];void 0!==i.lockedDirection?1===i.lockedDirection?Math.abs(t.y-e.windowPoint.y)>=8&&(UIView_1.UIView.recognizedGesture=i,i.state=UIGestureRecognizer_1.UIGestureRecognizerState.began,i.handleEvent("began"),i.emit("began",i)):2===i.lockedDirection&&Math.abs(t.x-e.windowPoint.x)>=8&&(UIView_1.UIView.recognizedGesture=i,i.state=UIGestureRecognizer_1.UIGestureRecognizerState.began,i.handleEvent("began"),i.emit("began",i)):(Math.abs(t.x-e.windowPoint.x)>=8||Math.abs(t.y-e.windowPoint.y)>=8)&&(UIView_1.UIView.recognizedGesture=i,i.state=UIGestureRecognizer_1.UIGestureRecognizerState.began,i.handleEvent("began"),i.emit("began",i))}}else i.state!=UIGestureRecognizer_1.UIGestureRecognizerState.began&&i.state!=UIGestureRecognizer_1.UIGestureRecognizerState.changed||(i.state=UIGestureRecognizer_1.UIGestureRecognizerState.changed,i.handleEvent("changed"),i.emit("changed",i));else e.phase==UITouch_1.UITouchPhase.ended?(i.state!=UIGestureRecognizer_1.UIGestureRecognizerState.began&&i.state!=UIGestureRecognizer_1.UIGestureRecognizerState.changed||(i.state=UIGestureRecognizer_1.UIGestureRecognizerState.ended,i.handleEvent("ended"),i.emit("ended",i),setTimeout(function(){UIView_1.UIView.recognizedGesture=void 0},0)),0==e.identifier&&(i.state=UIGestureRecognizer_1.UIGestureRecognizerState.possible)):e.phase==UITouch_1.UITouchPhase.cancelled&&(i.state!=UIGestureRecognizer_1.UIGestureRecognizerState.began&&i.state!=UIGestureRecognizer_1.UIGestureRecognizerState.changed||(i.state=UIGestureRecognizer_1.UIGestureRecognizerState.cancelled,i.handleEvent("cancelled"),i.emit("cancelled",i),setTimeout(function(){UIView_1.UIView.recognizedGesture=void 0},0)),i.state=UIGestureRecognizer_1.UIGestureRecognizerState.possible)})},t}(UIGestureRecognizer_1.UIGestureRecognizer);exports.UIPanGestureRecognizer=UIPanGestureRecognizer;
},{"./UIGestureRecognizer":11,"./UITouch":19,"./UIView":20}],14:[function(require,module,exports){
"use strict";var __extends=this&&this.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(exports,"__esModule",{value:!0});var UIGestureRecognizer_1=require("./UIGestureRecognizer"),UIPinchGestureRecognizer=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.scale=1,t.velocity=0,t}return __extends(t,e),t.prototype.handleTouch=function(t){e.prototype.handleTouch.call(this,t)},t}(UIGestureRecognizer_1.UIGestureRecognizer);exports.UIPinchGestureRecognizer=UIPinchGestureRecognizer;
},{"./UIGestureRecognizer":11}],15:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.UIPointZero={x:0,y:0};
},{}],16:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.UIRectZero={x:0,y:0,width:0,height:0},exports.UIRectEqualToRect=function(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height};
},{}],17:[function(require,module,exports){
"use strict";var __extends=this&&this.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function o(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}();Object.defineProperty(exports,"__esModule",{value:!0});var UIGestureRecognizer_1=require("./UIGestureRecognizer"),UIRotationGestureRecognizer=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.rotation=1,t.velocity=0,t}return __extends(t,e),t}(UIGestureRecognizer_1.UIGestureRecognizer);exports.UIRotationGestureRecognizer=UIRotationGestureRecognizer;
},{"./UIGestureRecognizer":11}],18:[function(require,module,exports){
"use strict";var __extends=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(exports,"__esModule",{value:!0});var UITouch_1=require("./UITouch"),UIGestureRecognizer_1=require("./UIGestureRecognizer"),UIView_1=require("./UIView"),UITapGestureRecognizer=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.numberOfTapsRequired=1,t.numberOfTouchesRequired=1,t.beganPoints={},t.validPointsCount=0,t}return __extends(t,e),t.prototype.handleTouch=function(t){var n=this;e.prototype.handleTouch.call(this,t),t.forEach(function(e){if(e.phase==UITouch_1.UITouchPhase.began){if(null!=UIView_1.UIView.recognizedGesture)return void(n.beganPoints={});e.windowPoint&&(n.beganPoints[e.identifier]=e.windowPoint)}else if(e.phase==UITouch_1.UITouchPhase.moved)e.windowPoint&&n.beganPoints[e.identifier]&&(Math.abs(n.beganPoints[e.identifier].x-e.windowPoint.x)>=22||Math.abs(n.beganPoints[e.identifier].y-e.windowPoint.y)>=22)&&delete n.beganPoints[e.identifier];else if(e.phase==UITouch_1.UITouchPhase.ended){if(null!=UIView_1.UIView.recognizedGesture)return n.beganPoints={},n.state=UIGestureRecognizer_1.UIGestureRecognizerState.possible,void(n.validPointsCount=0);e.tapCount>=n.numberOfTapsRequired&&null!=n.beganPoints[e.identifier]&&n.validPointsCount++,delete n.beganPoints[e.identifier],n.validPointsCount>=n.numberOfTouchesRequired&&(UIView_1.UIView.recognizedGesture=n,n.state=UIGestureRecognizer_1.UIGestureRecognizerState.ended,n.handleEvent("touch"),n.emit("touch",n),setTimeout(function(){UIView_1.UIView.recognizedGesture=void 0},0)),0!=Object.keys(n.beganPoints).length&&n.state!=UIGestureRecognizer_1.UIGestureRecognizerState.ended||(n.state=UIGestureRecognizer_1.UIGestureRecognizerState.possible,n.validPointsCount=0)}})},t}(UIGestureRecognizer_1.UIGestureRecognizer);exports.UITapGestureRecognizer=UITapGestureRecognizer;
},{"./UIGestureRecognizer":11,"./UITouch":19,"./UIView":20}],19:[function(require,module,exports){
"use strict";var __assign=this&&this.__assign||function(){return(__assign=Object.assign||function(t){for(var o,i=1,e=arguments.length;i<e;i++)for(var n in o=arguments[i])Object.prototype.hasOwnProperty.call(o,n)&&(t[n]=o[n]);return t}).apply(this,arguments)};Object.defineProperty(exports,"__esModule",{value:!0});var UITouchPhase,UIPoint_1=require("./UIPoint");!function(t){t[t.began=0]="began",t[t.moved=1]="moved",t[t.stationary=2]="stationary",t[t.ended=3]="ended",t[t.cancelled=4]="cancelled"}(UITouchPhase=exports.UITouchPhase||(exports.UITouchPhase={}));var UITouch=function(){function t(){this.identifier=0,this.timestamp=0,this.phase=UITouchPhase.cancelled,this.tapCount=0,this.window=void 0,this.windowPoint=void 0,this.view=void 0,this.gestureRecognizers=[]}return t.prototype.locationInView=function(t){var o=t||this.view;if(void 0===o)return UIPoint_1.UIPointZero;var i=this.windowPoint||UIPoint_1.UIPointZero;return o.convertPointFromWindow(i)||UIPoint_1.UIPointZero},t.prototype.previousLocationInView=function(t){return UIPoint_1.UIPointZero},t}();exports.UITouch=UITouch;var VelocityTracker=function(){function t(){this.movements=[],this.velocity={x:0,y:0}}return t.prototype.reset=function(){this.movements=[],this.velocity={x:0,y:0}},t.prototype.addMovement=function(t){this.movements.push(__assign({},t))},t.prototype.computeCurrentVelocity=function(){for(var t=this.movements.length-1;t>=1;t--){var o=this.movements[t],i=this.movements[t-1];if(o.windowPoint&&i.windowPoint){var e=o.timestamp-i.timestamp;if(e>.008){this.velocity={x:(o.windowPoint.x-i.windowPoint.x)/e,y:(o.windowPoint.y-i.windowPoint.y)/e};break}}}},t}();exports.VelocityTracker=VelocityTracker;
},{"./UIPoint":15}],20:[function(require,module,exports){
"use strict";var __extends=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),__assign=this&&this.__assign||function(){return(__assign=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var r in e=arguments[i])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},__values=this&&this.__values||function(t){var e="function"==typeof Symbol&&t[Symbol.iterator],i=0;return e?e.call(t):{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}}},__read=this&&this.__read||function(t,e){var i="function"==typeof Symbol&&t[Symbol.iterator];if(!i)return t;var n,r,o=i.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(t){r={error:t}}finally{try{n&&!n.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}return a};Object.defineProperty(exports,"__esModule",{value:!0});var UIRect_1=require("./UIRect"),UIColor_1=require("./UIColor"),CALayer_1=require("../coregraphics/CALayer"),UIAffineTransform_1=require("./UIAffineTransform"),UIEnums_1=require("./UIEnums"),EventEmitter_1=require("../kimi/EventEmitter"),Matrix_1=require("./helpers/Matrix"),UITouch_1=require("./UITouch"),UIEdgeInsets_1=require("./UIEdgeInsets"),UIAnimator_1=require("./UIAnimator");exports.sharedVelocityTracker=new UITouch_1.VelocityTracker;var UIView=function(t){function e(){var e=t.call(this)||this;return e.domElement=document.createElement("div"),e.layer=new CALayer_1.CALayer,e._frame=UIRect_1.UIRectZero,e.bounds=UIRect_1.UIRectZero,e._transform=UIAffineTransform_1.UIAffineTransformIdentity,e.touchAreaInsets=UIEdgeInsets_1.UIEdgeInsetsZero,e.tag=0,e.superview=void 0,e.subviews=[],e._clipsToBounds=!1,e._backgroundColor=void 0,e._alpha=1,e._hidden=!1,e._opaque=!1,e._contentMode=UIEnums_1.UIViewContentMode.scaleToFill,e._tintColor=void 0,e.userInteractionEnabled=!0,e.gestureRecognizers=[],e.isAccessibilityElement=!1,e.backgroundColor_animations=[],e.frame_animations=[],e.transform_animations=[],e.domElement.style.position="absolute",e.layer._view=e,e}return __extends(e,t),e.prototype.attachToElement=function(t){var e=this;t==document.body&&(document.body.style.width="100%",document.body.style.height="100%",document.getElementsByTagName("html")[0].style.height="100%",document.getElementsByTagName("html")[0].style.overflow="hidden");var i=function(){if(e instanceof UIWindow)return e;var t=new UIWindow;return t.addSubview(e),t}();t.appendChild(i.domElement),window.addEventListener("resize",function(){e.onResize(t,i)}),this.onResize(t,i)},e.prototype.onResize=function(t,e){e.frame={x:0,y:0,width:t.clientWidth,height:t.clientHeight}},Object.defineProperty(e.prototype,"window",{get:function(){return this instanceof UIWindow?this:this.superview?this.superview.window:void 0},enumerable:!0,configurable:!0}),e.prototype.removeFromSuperview=function(){var t=this;if(void 0!==this.superview){var e=this.superview;e.willRemoveSubview(this),this.willMoveToSuperview(void 0),e.subviews=this.superview.subviews.filter(function(e){return e!==t}),e.domElement.removeChild(this.domElement),this.superview=void 0,this.didMoveToSuperview()}},e.prototype.insertSubviewAtIndex=function(t,e){void 0!==t.superview&&t.removeFromSuperview(),t.willMoveToSuperview(this),t.superview=this,this.subviews.splice(e,0,t),this.domElement.insertBefore(t.domElement,this.domElement.children[e]),this.setNeedsDisplay(),t.didMoveToSuperview(),this.didAddSubview(t)},e.prototype.exchangeSubview=function(t,e){if(t<e){var i=this.subviews[t],n=this.subviews[e];this.domElement.removeChild(i.domElement),this.domElement.insertBefore(i.domElement,n.domElement),this.domElement.removeChild(n.domElement),this.domElement.insertBefore(n.domElement,this.domElement.children[t])}else if(t>e){i=this.subviews[t];var r=this.subviews[e];this.domElement.removeChild(r.domElement),this.domElement.insertBefore(r.domElement,i.domElement),this.domElement.removeChild(i.domElement),this.domElement.insertBefore(i.domElement,this.domElement.children[e])}var o=this.subviews[e];this.subviews[e]=this.subviews[t],this.subviews[t]=o},e.prototype.addSubview=function(t){void 0!==t.superview&&t.removeFromSuperview(),t.willMoveToSuperview(this),t.superview=this,this.subviews.push(t),this.domElement.appendChild(t.domElement),this.setNeedsDisplay(),t.didMoveToSuperview(),this.didAddSubview(t)},e.prototype.insertSubviewBelowSubview=function(t,e){var i=this.subviews.indexOf(e);i>=0&&this.insertSubviewAtIndex(t,i)},e.prototype.insertSubviewAboveSubview=function(t,e){var i=this.subviews.indexOf(e);i>=0&&this.insertSubviewAtIndex(t,i+1)},e.prototype.bringSubviewToFront=function(t){var e=this.subviews.indexOf(t);e>=0&&(this.subviews.splice(e,1),this.subviews.push(t),this.domElement.removeChild(t.domElement),this.domElement.appendChild(t.domElement))},e.prototype.sendSubviewToBack=function(t){var e=this.subviews.indexOf(t);e>=0&&(this.subviews.splice(e,1),this.subviews.unshift(t),this.domElement.removeChild(t.domElement),this.domElement.insertBefore(t.domElement,this.domElement.firstChild))},e.prototype.isDescendantOfView=function(t){for(var e=this;null!=e;){if(e==t)return!0;e=e.superview}return!1},e.prototype.viewWithTag=function(t){for(var e=0;e<this.subviews.length;e++){var i=this.subviews[e];if(i.tag===t)return i;var n=i.viewWithTag(t);if(void 0!==n)return n}},e.prototype.didAddSubview=function(t){},e.prototype.willRemoveSubview=function(t){},e.prototype.willMoveToSuperview=function(t){},e.prototype.didMoveToSuperview=function(){this.tintColorDidChange()},e.prototype.setNeedsLayout=function(t){var e=this;void 0===t&&(t=!1),t&&(clearTimeout(this._layoutTimer),this._layoutTimer=setTimeout(function(){e.layoutIfNeeded()},0))},e.prototype.layoutIfNeeded=function(){this.layoutSubviews()},e.prototype.layoutSubviews=function(){},e.prototype.setNeedsDisplay=function(){},e.prototype.tintColorDidChange=function(){this.subviews.forEach(function(t){return t.tintColorDidChange()})},e.prototype.addGestureRecognizer=function(t){this.gestureRecognizers.push(t)},e.prototype.removeGestureRecognizer=function(t){var e=this.gestureRecognizers.indexOf(t);e>=0&&this.gestureRecognizers.splice(e,1)},e.prototype.endEditing=function(){},Object.defineProperty(e.prototype,"alpha",{get:function(){return this._alpha},set:function(t){var e=this;if(this._alpha!==t){if(UIAnimator_1.UIAnimator.duringAnimationValueSet||this.alpha_animation&&(this.alpha_animation.cancel(),this.alpha_animation=void 0),UIAnimator_1.UIAnimator.activeAnimator&&!UIAnimator_1.UIAnimator.duringAnimationValueSet&&UIAnimator_1.UIAnimator.activeAnimator.animationCreater){var i=UIAnimator_1.UIAnimator.activeAnimator.animationCreater();return this.alpha_animation=i,i.setUpdateListener(function(t){UIAnimator_1.UIAnimator.duringAnimationValueSet=!0,e.alpha=t,UIAnimator_1.UIAnimator.duringAnimationValueSet=!1}),i.setStartValue(this.alpha),void i.setEndValue(t)}this._alpha=t,this.domElement.style.opacity=t.toString()}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"backgroundColor",{get:function(){return this._backgroundColor},set:function(t){var e=this;if(!this._backgroundColor||!t||this._backgroundColor.r!==t.r||this._backgroundColor.g!==t.g||this._backgroundColor.b!==t.b||this._backgroundColor.a!==t.a)if(UIAnimator_1.UIAnimator.duringAnimationValueSet||this.backgroundColor_animations&&(this.backgroundColor_animations.forEach(function(t){return t.cancel()}),this.backgroundColor_animations=[]),UIAnimator_1.UIAnimator.activeAnimator&&!UIAnimator_1.UIAnimator.duringAnimationValueSet&&UIAnimator_1.UIAnimator.activeAnimator.animationCreater&&this._backgroundColor&&t){var i,n=[];this._backgroundColor.r!=t.r&&((i=UIAnimator_1.UIAnimator.activeAnimator.animationCreater()).setUpdateListener(function(t){var i=e.backgroundColor;i&&(UIAnimator_1.UIAnimator.duringAnimationValueSet=!0,e.backgroundColor=new UIColor_1.UIColor(Math.max(0,Math.min(1,t)),i.g,i.b,i.a),UIAnimator_1.UIAnimator.duringAnimationValueSet=!1)}),i.setStartValue(this._backgroundColor.r),i.setEndValue(t.r),n.push(i)),this._backgroundColor.g!=t.g&&((i=UIAnimator_1.UIAnimator.activeAnimator.animationCreater()).setUpdateListener(function(t){var i=e.backgroundColor;i&&(UIAnimator_1.UIAnimator.duringAnimationValueSet=!0,e.backgroundColor=new UIColor_1.UIColor(i.r,Math.max(0,Math.min(1,t)),i.b,i.a),UIAnimator_1.UIAnimator.duringAnimationValueSet=!1)}),i.setStartValue(this._backgroundColor.g),i.setEndValue(t.g),n.push(i)),this._backgroundColor.b!=t.b&&((i=UIAnimator_1.UIAnimator.activeAnimator.animationCreater()).setUpdateListener(function(t){var i=e.backgroundColor;i&&(UIAnimator_1.UIAnimator.duringAnimationValueSet=!0,e.backgroundColor=new UIColor_1.UIColor(i.r,i.g,Math.max(0,Math.min(1,t)),i.a),UIAnimator_1.UIAnimator.duringAnimationValueSet=!1)}),i.setStartValue(this._backgroundColor.b),i.setEndValue(t.b),n.push(i)),this._backgroundColor.a!=t.a&&((i=UIAnimator_1.UIAnimator.activeAnimator.animationCreater()).setUpdateListener(function(t){var i=e.backgroundColor;i&&(UIAnimator_1.UIAnimator.duringAnimationValueSet=!0,e.backgroundColor=new UIColor_1.UIColor(i.r,i.g,i.b,Math.max(0,Math.min(1,t))),UIAnimator_1.UIAnimator.duringAnimationValueSet=!1)}),i.setStartValue(this._backgroundColor.a),i.setEndValue(t.a),n.push(i)),this.backgroundColor_animations=n}else this._backgroundColor=t,this.domElement.style.backgroundColor=t?t.toStyle():null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"frame",{get:function(){return this._frame},set:function(t){var e=this;if(!UIRect_1.UIRectEqualToRect(this._frame,t))if(UIAnimator_1.UIAnimator.duringAnimationValueSet||(this.frame_animations.forEach(function(t){return t.cancel()}),this.frame_animations=[]),UIAnimator_1.UIAnimator.activeAnimator&&!UIAnimator_1.UIAnimator.duringAnimationValueSet&&UIAnimator_1.UIAnimator.activeAnimator.animationCreater){var i,n=[];this._frame.x!==t.x&&((i=UIAnimator_1.UIAnimator.activeAnimator.animationCreater()).setUpdateListener(function(t){UIAnimator_1.UIAnimator.duringAnimationValueSet=!0,e.frame=__assign({},e.frame,{x:t}),UIAnimator_1.UIAnimator.duringAnimationValueSet=!1}),i.setStartValue(this._frame.x),i.setEndValue(t.x),n.push(i)),this._frame.y!==t.y&&((i=UIAnimator_1.UIAnimator.activeAnimator.animationCreater()).setUpdateListener(function(t){UIAnimator_1.UIAnimator.duringAnimationValueSet=!0,e.frame=__assign({},e.frame,{y:t}),UIAnimator_1.UIAnimator.duringAnimationValueSet=!1}),i.setStartValue(this._frame.y),i.setEndValue(t.y),n.push(i)),this._frame.width!==t.width&&((i=UIAnimator_1.UIAnimator.activeAnimator.animationCreater()).setUpdateListener(function(t){UIAnimator_1.UIAnimator.duringAnimationValueSet=!0,e.frame=__assign({},e.frame,{width:t}),UIAnimator_1.UIAnimator.duringAnimationValueSet=!1}),i.setStartValue(this._frame.width),i.setEndValue(t.width),n.push(i)),this._frame.height!==t.height&&((i=UIAnimator_1.UIAnimator.activeAnimator.animationCreater()).setUpdateListener(function(t){UIAnimator_1.UIAnimator.duringAnimationValueSet=!0,e.frame=__assign({},e.frame,{height:t}),UIAnimator_1.UIAnimator.duringAnimationValueSet=!1}),i.setStartValue(this._frame.height),i.setEndValue(t.height),n.push(i)),this.frame_animations=n}else{var r=this._frame.width!=t.width||this._frame.height!=t.height;this._frame=t,this.layer.frame=t,r&&(this.bounds=__assign({},t,{x:0,y:0})),this.setNeedsLayout(r),this.domElement.style.left=t.x.toString()+"px",this.domElement.style.top=t.y.toString()+"px",this.domElement.style.width=t.width.toString()+"px",this.domElement.style.height=t.height.toString()+"px"}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"center",{get:function(){return{x:this.frame.x+this.frame.width/2,y:this.frame.y+this.frame.height/2}},set:function(t){this.frame={x:t.x-this.frame.width/2,y:t.y-this.frame.height/2,width:this.frame.width,height:this.frame.height}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"transform",{get:function(){return this._transform},set:function(t){var e=this;if(!UIAffineTransform_1.UIAffineTransformEqual(this._transform,t))if(UIAnimator_1.UIAnimator.duringAnimationValueSet||(this.transform_animations.forEach(function(t){return t.cancel()}),this.transform_animations=[]),UIAnimator_1.UIAnimator.activeAnimator&&!UIAnimator_1.UIAnimator.duringAnimationValueSet&&UIAnimator_1.UIAnimator.activeAnimator.animationCreater){var i,n=[],r=Matrix_1.Matrix.unmatrix(this._transform),o=Matrix_1.Matrix.unmatrix(t);r.scale.x!=o.scale.x&&((i=UIAnimator_1.UIAnimator.activeAnimator.animationCreater()).setUpdateListener(function(t){var i=new Matrix_1.Matrix;i.setValues(e._transform),i.setScale(t),UIAnimator_1.UIAnimator.duringAnimationValueSet=!0,e.transform=i.getValues(),UIAnimator_1.UIAnimator.duringAnimationValueSet=!1}),i.setStartValue(r.scale.x),i.setEndValue(o.scale.x),n.push(i)),r.scale.y!=o.scale.y&&((i=UIAnimator_1.UIAnimator.activeAnimator.animationCreater()).setUpdateListener(function(t){var i=new Matrix_1.Matrix;i.setValues(e._transform),i.setScale(void 0,t),UIAnimator_1.UIAnimator.duringAnimationValueSet=!0,e.transform=i.getValues(),UIAnimator_1.UIAnimator.duringAnimationValueSet=!1}),i.setStartValue(r.scale.y),i.setEndValue(o.scale.y),n.push(i)),r.degree!=o.degree&&((i=UIAnimator_1.UIAnimator.activeAnimator.animationCreater()).setUpdateListener(function(t){var i=new Matrix_1.Matrix;i.setValues(e._transform),i.setRotate(t*Math.PI/180),UIAnimator_1.UIAnimator.duringAnimationValueSet=!0,e.transform=i.getValues(),UIAnimator_1.UIAnimator.duringAnimationValueSet=!1}),i.setStartValue(r.degree),i.setEndValue(o.degree),n.push(i)),r.translate.x!=o.translate.x&&((i=UIAnimator_1.UIAnimator.activeAnimator.animationCreater()).setUpdateListener(function(t){var i=new Matrix_1.Matrix;i.setValues(e._transform),i.setTranslate(t),UIAnimator_1.UIAnimator.duringAnimationValueSet=!0,e.transform=i.getValues(),UIAnimator_1.UIAnimator.duringAnimationValueSet=!1}),i.setStartValue(r.translate.x),i.setEndValue(o.translate.x),n.push(i)),r.translate.y!=o.translate.y&&((i=UIAnimator_1.UIAnimator.activeAnimator.animationCreater()).setUpdateListener(function(t){var i=new Matrix_1.Matrix;i.setValues(e._transform),i.setTranslate(void 0,t),UIAnimator_1.UIAnimator.duringAnimationValueSet=!0,e.transform=i.getValues(),UIAnimator_1.UIAnimator.duringAnimationValueSet=!1}),i.setStartValue(r.translate.y),i.setEndValue(o.translate.y),n.push(i))}else this._transform=t,this.domElement.style.transform="matrix("+t.a+", "+t.b+", "+t.c+", "+t.d+", "+t.tx+", "+t.ty+")",this.domElement.style.webkitTransform=this.domElement.style.transform},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"clipsToBounds",{get:function(){return this._clipsToBounds},set:function(t){this._clipsToBounds=t,this.domElement.style.overflow=t?"hidden":null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hidden",{get:function(){return this._hidden},set:function(t){this._hidden=t,this.domElement.style.visibility=t?"hidden":"inherit"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"opaque",{get:function(){return this._opaque},set:function(t){this._opaque=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"contentMode",{get:function(){return this._contentMode},set:function(t){this._contentMode=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tintColor",{get:function(){return this._tintColor||this.superview&&this.superview.tintColor||new UIColor_1.UIColor(0,122/255,1,1)},set:function(t){this._tintColor=t,this.tintColorDidChange()},enumerable:!0,configurable:!0}),e.prototype.convertPointFromView=function(t,e){var i=e.convertPointToWindow(t);return i&&this.convertPointFromWindow(i)||t},e.prototype.convertPointToWindow=function(t){if(void 0!==this.window){for(var e=new Matrix_1.Matrix,i=this,n=[];null!=i&&!(i instanceof UIWindow);)n.push(i),i=i.superview;return n.forEach(function(t){if(e.postTranslate(t.frame.x,t.frame.y),!UIAffineTransform_1.UIAffineTransformIsIdentity(t.transform)){var i=Matrix_1.Matrix.unmatrix(t.transform),n=new Matrix_1.Matrix;n.postTranslate(-t.frame.width/2,-t.frame.height/2),n.postRotate(i.degree),n.postScale(i.scale.x,i.scale.y),n.postTranslate(i.translate.x,i.translate.y),n.postTranslate(t.frame.width/2,t.frame.height/2),e.concat(n)}}),{x:t.x*e.a+t.x*e.c+e.tx,y:t.y*e.b+t.y*e.d+e.ty}}},e.prototype.convertPointFromWindow=function(t){if(null!=this.window){for(var e=new Matrix_1.Matrix,i=this,n=[];null!=i&&!(i instanceof UIWindow);)n.push(i),i=i.superview;return n.forEach(function(t){if(e.postTranslate(t.frame.x,t.frame.y),!UIAffineTransform_1.UIAffineTransformIsIdentity(t.transform)){var i=Matrix_1.Matrix.unmatrix(t.transform),n=new Matrix_1.Matrix;n.postTranslate(-t.frame.width/2,-t.frame.height/2),n.postRotate(i.degree),n.postScale(i.scale.x,i.scale.y),n.postTranslate(i.translate.x,i.translate.y),n.postTranslate(t.frame.width/2,t.frame.height/2),e.preConcat(n)}}),{x:(t.x-e.tx)/(e.a+e.b),y:(t.y-e.ty)/(e.d+e.c)}}},e.prototype.hitTest=function(t){if(this.userInteractionEnabled&&this.alpha>0&&!this.hidden&&this.pointInside(t)){for(var e=this.subviews.reverse(),i=0;i<e.length;i++){var n=e[i],r=n.convertPointFromView(t,this),o=n.hitTest(r);if(void 0!==o)return o}return this}},e.prototype.touchesBegan=function(t){this.gestureRecognizers.filter(function(t){return t.enabled}).forEach(function(e){e.handleTouch(t)}),this.superview&&this.superview.touchesBegan(t)},e.prototype.touchesMoved=function(t){this.gestureRecognizers.filter(function(t){return t.enabled}).forEach(function(e){e.handleTouch(t)}),this.superview&&this.superview.touchesMoved(t)},e.prototype.touchesEnded=function(t){this.gestureRecognizers.filter(function(t){return t.enabled}).forEach(function(e){e.handleTouch(t)}),this.superview&&this.superview.touchesEnded(t)},e.prototype.touchesCancelled=function(t){this.gestureRecognizers.filter(function(t){return t.enabled}).forEach(function(e){e.handleTouch(t)}),this.superview&&this.superview.touchesCancelled(t)},e.prototype.pointInside=function(t){return t.x>=0-this.touchAreaInsets.left&&t.y>=0-this.touchAreaInsets.top&&t.x<=this.frame.width+this.touchAreaInsets.right&&t.y<=this.frame.height+this.touchAreaInsets.bottom},e}(EventEmitter_1.EventEmitter);exports.UIView=UIView;var UIWindow=function(t){function e(){var e=t.call(this)||this;return e.currentTouchesID=[],e.touches={},e.upCount=new Map,e.upTimestamp=new Map,e.setupTouches(),e}return __extends(e,t),e.prototype.setupTouches=function(){var t=this;this.domElement.addEventListener("touchstart",function(e){for(var i=function(i){var n=e.changedTouches[i];t.currentTouchesID.push(n.identifier);var r={x:n.pageX,y:n.pageY},o=t.hitTest(r);if(o){if(o instanceof UINativeTouchView)return{value:!1};var a=new UITouch_1.UITouch;t.touches[n.identifier]=a,a.identifier=n.identifier,a.phase=UITouch_1.UITouchPhase.began,a.tapCount=function(){var e,i;try{for(var n=__values(t.upCount),o=n.next();!o.done;o=n.next()){var a=__read(o.value,2),s=a[0],u=a[1],m=t.upTimestamp.get(s)||0;if(Date.now()/1e3-m<1&&Math.abs(s.x-r.x)<44&&Math.abs(s.y-r.y)<44)return u+1}}catch(t){e={error:t}}finally{try{o&&!o.done&&(i=n.return)&&i.call(n)}finally{if(e)throw e.error}}return 1}(),a.timestamp=Date.now()/1e3,a.window=t,a.windowPoint=r,a.view=o,0==a.identifier&&exports.sharedVelocityTracker.addMovement(a),a.view.touchesBegan([a])}},n=0;n<e.changedTouches.length;n++){var r=i(n);if("object"==typeof r)return r.value}e.preventDefault()}),this.domElement.addEventListener("touchmove",function(e){for(var i=0;i<e.changedTouches.length;i++){var n=e.changedTouches[i],r={x:n.pageX,y:n.pageY},o=t.touches[n.identifier];if(void 0===o)return!1;o.phase=UITouch_1.UITouchPhase.moved,o.timestamp=Date.now()/1e3,o.windowPoint=r,0==o.identifier&&exports.sharedVelocityTracker.addMovement(o),o.view&&o.view.touchesMoved([o])}e.preventDefault()}),this.domElement.addEventListener("touchend",function(e){for(var i=0;i<e.changedTouches.length;i++){var n=e.changedTouches[i],r={x:n.pageX,y:n.pageY},o=t.touches[n.identifier];void 0!==o&&(o.phase=UITouch_1.UITouchPhase.ended,o.timestamp=Date.now()/1e3,o.windowPoint=r,0==o.identifier&&exports.sharedVelocityTracker.addMovement(o),o.view&&o.view.touchesEnded([o]));var a=t.currentTouchesID.indexOf(n.identifier);a>=0&&t.currentTouchesID.splice(a,1)}if(0==t.currentTouchesID.length){for(var s in t.upCount.clear(),t.upTimestamp.clear(),t.touches)if(t.touches.hasOwnProperty(s)){var u=t.touches[s];u.windowPoint&&(t.upCount.set(u.windowPoint,u.tapCount),t.upTimestamp.set(u.windowPoint,u.timestamp))}t.touches={},exports.sharedVelocityTracker.reset(),setTimeout(function(){UIView.recognizedGesture=void 0},0)}e.preventDefault()}),this.domElement.addEventListener("touchcancel",function(e){for(var i=0;i<e.changedTouches.length;i++){var n=e.changedTouches[i],r={x:n.pageX,y:n.pageY},o=t.touches[n.identifier];o&&(o.phase=UITouch_1.UITouchPhase.cancelled,o.timestamp=Date.now()/1e3,o.windowPoint=r,0==o.identifier&&exports.sharedVelocityTracker.addMovement(o),o.view&&o.view.touchesCancelled([o]))}t.upCount.clear(),t.upTimestamp.clear(),t.touches={},e.preventDefault()})},e}(UIView);exports.UIWindow=UIWindow;var UINativeTouchView=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(UIView);exports.UINativeTouchView=UINativeTouchView;
},{"../coregraphics/CALayer":1,"../kimi/EventEmitter":3,"./UIAffineTransform":6,"./UIAnimator":7,"./UIColor":8,"./UIEdgeInsets":9,"./UIEnums":10,"./UIRect":16,"./UITouch":19,"./helpers/Matrix":23}],21:[function(require,module,exports){
"use strict";var NEWTON_ITERATIONS=4,NEWTON_MIN_SLOPE=.001,SUBDIVISION_PRECISION=1e-7,SUBDIVISION_MAX_ITERATIONS=10,kSplineTableSize=11,kSampleStepSize=1/(kSplineTableSize-1),float32ArraySupported="function"==typeof Float32Array;function A(e,r){return 1-3*r+3*e}function B(e,r){return 3*r-6*e}function C(e){return 3*e}function calcBezier(e,r,n){return((A(r,n)*e+B(r,n))*e+C(r))*e}function getSlope(e,r,n){return 3*A(r,n)*e*e+2*B(r,n)*e+C(r)}function binarySubdivide(e,r,n,S,t){var i,a,o=0;do{(i=calcBezier(a=r+(n-r)/2,S,t)-e)>0?n=a:r=a}while(Math.abs(i)>SUBDIVISION_PRECISION&&++o<SUBDIVISION_MAX_ITERATIONS);return a}function newtonRaphsonIterate(e,r,n,S){for(var t=0;t<NEWTON_ITERATIONS;++t){var i=getSlope(r,n,S);if(0===i)return r;r-=(calcBezier(r,n,S)-e)/i}return r}module.exports=function(e,r,n,S){if(!(0<=e&&e<=1&&0<=n&&n<=1))throw new Error("bezier x values must be in [0, 1] range");var t=float32ArraySupported?new Float32Array(kSplineTableSize):new Array(kSplineTableSize);if(e!==r||n!==S)for(var i=0;i<kSplineTableSize;++i)t[i]=calcBezier(i*kSampleStepSize,e,n);return function(i){return e===r&&n===S?i:0===i?0:1===i?1:calcBezier(function(r){for(var S=0,i=1,a=kSplineTableSize-1;i!==a&&t[i]<=r;++i)S+=kSampleStepSize;var o=S+(r-t[--i])/(t[i+1]-t[i])*kSampleStepSize,l=getSlope(o,e,n);return l>=NEWTON_MIN_SLOPE?newtonRaphsonIterate(r,o,e,n):0===l?o:binarySubdivide(r,S,S+kSampleStepSize,e,n)}(i),r,S)}};
},{}],22:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var Bezier=require("./Bezier"),LinearAndCurveAnimator=function(){function t(t){void 0===t&&(t=!1),this.isCurve=t,this.duration=0,this.startValue=0,this.currentValue=0,this.endValue=0,this.startTime=0,this.cancelled=!1,this.bezier=void 0,this.allListenners=[],t&&(this.bezier=Bezier(.42,0,1,1))}return t.prototype.addListener=function(t){this.allListenners.push(t)},t.prototype.start=function(){this.startTime=Date.now(),this.doFrame()},t.prototype.doFrame=function(){var t=this;if(!this.cancelled){var e=(Date.now()-this.startTime)/this.duration;this.bezier&&(e=this.bezier(e)),this.currentValue=this.startValue+(this.endValue-this.startValue)*e,this.allListenners.forEach(function(e){return e.onUpdate(t.currentValue)}),e>=1?this.allListenners.forEach(function(t){return t.onEnd()}):this.rafHandler=requestAnimationFrame(this.doFrame.bind(this))}},t.prototype.cancel=function(){this.cancelled=!0,cancelAnimationFrame(this.rafHandler)},t}();exports.LinearAndCurveAnimator=LinearAndCurveAnimator;
},{"./Bezier":21}],23:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var MatrixAlgorithm=function(){function t(){this.props=[],this.props[0]=1,this.props[1]=0,this.props[2]=0,this.props[3]=0,this.props[4]=0,this.props[5]=1,this.props[6]=0,this.props[7]=0,this.props[8]=0,this.props[9]=0,this.props[10]=1,this.props[11]=0,this.props[12]=0,this.props[13]=0,this.props[14]=0,this.props[15]=1}return t.prototype.rotate=function(t){if(0===t)return this;var s=Math.cos(t),p=Math.sin(t);return this._t(s,-p,0,0,p,s,0,0,0,0,1,0,0,0,0,1)},t.prototype.rotateX=function(t){if(0===t)return this;var s=Math.cos(t),p=Math.sin(t);return this._t(1,0,0,0,0,s,-p,0,0,p,s,0,0,0,0,1)},t.prototype.rotateY=function(t){if(0===t)return this;var s=Math.cos(t),p=Math.sin(t);return this._t(s,0,p,0,0,1,0,0,-p,0,s,0,0,0,0,1)},t.prototype.rotateZ=function(t){if(0===t)return this;var s=Math.cos(t),p=Math.sin(t);return this._t(s,-p,0,0,p,s,0,0,0,0,1,0,0,0,0,1)},t.prototype.shear=function(t,s){return this._t(1,s,t,1,0,0)},t.prototype.skew=function(t,s){return this.shear(Math.tan(t),Math.tan(s))},t.prototype.skewFromAxis=function(t,s){var p=Math.cos(s),r=Math.sin(s);return this._t(p,r,0,0,-r,p,0,0,0,0,1,0,0,0,0,1)},t.prototype.scale=function(t,s,p){return p=isNaN(p)?1:p,1==t&&1==s&&1==p?this:this._t(t,0,0,0,0,s,0,0,0,0,p,0,0,0,0,1)},t.prototype.setTransform=function(t,s,p,r,o,i,h,a,e,n,c,u,y,l,x,f){return this.props[0]=t,this.props[1]=s,this.props[2]=p,this.props[3]=r,this.props[4]=o,this.props[5]=i,this.props[6]=h,this.props[7]=a,this.props[8]=e,this.props[9]=n,this.props[10]=c,this.props[11]=u,this.props[12]=y,this.props[13]=l,this.props[14]=x,this.props[15]=f,this},t.prototype.translate=function(t,s,p){return p=isNaN(p)?0:p,0!==t||0!==s||0!==p?this._t(1,0,0,0,0,1,0,0,0,0,1,0,t,s,p,1):this},t.prototype._t=function(t,s,p,r,o,i,h,a,e,n,c,u,y,l,x,f){this.transform(t,s,p,r,o,i,h,a,e,n,c,u,y,l,x,f)},t.prototype.transform=function(t,s,p,r,o,i,h,a,e,n,c,u,y,l,x,f){if(1===t&&0===s&&0===p&&0===r&&0===o&&1===i&&0===h&&0===a&&0===e&&0===n&&1===c&&0===u)return 0===y&&0===l&&0===x||(this.props[12]=this.props[12]*t+this.props[13]*o+this.props[14]*e+this.props[15]*y,this.props[13]=this.props[12]*s+this.props[13]*i+this.props[14]*n+this.props[15]*l,this.props[14]=this.props[12]*p+this.props[13]*h+this.props[14]*c+this.props[15]*x,this.props[15]=this.props[12]*r+this.props[13]*a+this.props[14]*u+this.props[15]*f),this;var d=this.props[0],M=this.props[1],v=this.props[2],m=this.props[3],g=this.props[4],b=this.props[5],A=this.props[6],P=this.props[7],_=this.props[8],w=this.props[9],T=this.props[10],I=this.props[11],N=this.props[12],S=this.props[13],k=this.props[14],q=this.props[15];return this.props[0]=d*t+M*o+v*e+m*y,this.props[1]=d*s+M*i+v*n+m*l,this.props[2]=d*p+M*h+v*c+m*x,this.props[3]=d*r+M*a+v*u+m*f,this.props[4]=g*t+b*o+A*e+P*y,this.props[5]=g*s+b*i+A*n+P*l,this.props[6]=g*p+b*h+A*c+P*x,this.props[7]=g*r+b*a+A*u+P*f,this.props[8]=_*t+w*o+T*e+I*y,this.props[9]=_*s+w*i+T*n+I*l,this.props[10]=_*p+w*h+T*c+I*x,this.props[11]=_*r+w*a+T*u+I*f,this.props[12]=N*t+S*o+k*e+q*y,this.props[13]=N*s+S*i+k*n+q*l,this.props[14]=N*p+S*h+k*c+q*x,this.props[15]=N*r+S*a+k*u+q*f,this},t.prototype.clone=function(t){var s;for(s=0;s<16;s+=1)t.props[s]=this.props[s]},t.prototype.cloneFromProps=function(t){var s;for(s=0;s<16;s+=1)this.props[s]=t[s]},t.prototype.applyToPoint=function(t,s,p){return{x:t*this.props[0]+s*this.props[4]+p*this.props[8]+this.props[12],y:t*this.props[1]+s*this.props[5]+p*this.props[9]+this.props[13],z:t*this.props[2]+s*this.props[6]+p*this.props[10]+this.props[14]}},t.prototype.applyToX=function(t,s,p){return t*this.props[0]+s*this.props[4]+p*this.props[8]+this.props[12]},t.prototype.applyToY=function(t,s,p){return t*this.props[1]+s*this.props[5]+p*this.props[9]+this.props[13]},t.prototype.applyToZ=function(t,s,p){return t*this.props[2]+s*this.props[6]+p*this.props[10]+this.props[14]},t.prototype.applyToPointArray=function(t,s,p){return[t*this.props[0]+s*this.props[4]+p*this.props[8]+this.props[12],t*this.props[1]+s*this.props[5]+p*this.props[9]+this.props[13],t*this.props[2]+s*this.props[6]+p*this.props[10]+this.props[14]]},t.prototype.applyToPointStringified=function(t,s){return Math.round(t*this.props[0]+s*this.props[4]+this.props[12])+","+Math.round(t*this.props[1]+s*this.props[5]+this.props[13])},t}();exports.MatrixAlgorithm=MatrixAlgorithm;var Matrix=function(){function t(t,s,p,r,o,i){void 0===t&&(t=1),void 0===s&&(s=0),void 0===p&&(p=0),void 0===r&&(r=1),void 0===o&&(o=0),void 0===i&&(i=0),this.a=t,this.b=s,this.c=p,this.d=r,this.tx=o,this.ty=i}return t.unmatrix=function(t){var s=t.a,p=t.b,r=t.c,o=t.d;if(s*o==p*r)return{scale:{x:1,y:1},degree:0,translate:{x:0,y:0}};var i=Math.sqrt(s*s+p*p),h=(s/=i)*r+(p/=i)*o;r-=s*h,o-=p*h;var a=Math.sqrt(r*r+o*o);return h/=a,s*(o/=a)<p*(r/=a)&&(s=-s,p=-p,h=-h,i=-i),{scale:{x:i,y:a},degree:Math.atan2(p,s)/(Math.PI/180),translate:{x:t.tx,y:t.ty}}},t.prototype.setValues=function(t){this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty},t.prototype.getValues=function(){return{a:this.a,b:this.b,c:this.c,d:this.d,tx:this.tx,ty:this.ty}},t.prototype.isIdentity=function(){return 1==this.a&&0==this.b&&0==this.c&&1==this.d&&0==this.tx&&0==this.ty},t.prototype.setScale=function(s,p){var r=new MatrixAlgorithm,o=t.unmatrix(this);r.rotate(-o.degree*Math.PI/180),r.scale(s||o.scale.x,p||o.scale.y,1),r.translate(o.translate.x,o.translate.y,0),this.a=r.props[0],this.b=r.props[1],this.c=r.props[4],this.d=r.props[5],this.tx=r.props[12],this.ty=r.props[13]},t.prototype.postScale=function(s,p){var r=new MatrixAlgorithm,o=t.unmatrix(this);r.rotate(-o.degree*Math.PI/180),r.scale(o.scale.x,o.scale.y,1),r.translate(o.translate.x,o.translate.y,0),r.scale(s||1,p||1,1),this.a=r.props[0],this.b=r.props[1],this.c=r.props[4],this.d=r.props[5],this.tx=r.props[12],this.ty=r.props[13]},t.prototype.setTranslate=function(s,p){var r=new MatrixAlgorithm,o=t.unmatrix(this);r.rotate(-o.degree*Math.PI/180),r.scale(o.scale.x,o.scale.y,1),r.translate(s||o.translate.x,p||o.translate.y,0),this.a=r.props[0],this.b=r.props[1],this.c=r.props[4],this.d=r.props[5],this.tx=r.props[12],this.ty=r.props[13]},t.prototype.postTranslate=function(s,p){var r=new MatrixAlgorithm,o=t.unmatrix(this);r.rotate(-o.degree*Math.PI/180),r.scale(o.scale.x,o.scale.y,1),r.translate(o.translate.x,o.translate.y,0),r.translate(s||0,p||0,0),this.a=r.props[0],this.b=r.props[1],this.c=r.props[4],this.d=r.props[5],this.tx=r.props[12],this.ty=r.props[13]},t.prototype.setRotate=function(s){var p=new MatrixAlgorithm,r=t.unmatrix(this);p.rotate(-s||-r.degree*Math.PI/180),p.scale(r.scale.x,r.scale.y,1),p.translate(r.translate.x,r.translate.y,0),this.a=p.props[0],this.b=p.props[1],this.c=p.props[4],this.d=p.props[5],this.tx=p.props[12],this.ty=p.props[13]},t.prototype.postRotate=function(s){var p=new MatrixAlgorithm,r=t.unmatrix(this);p.rotate(-r.degree*Math.PI/180),p.scale(r.scale.x,r.scale.y,1),p.translate(r.translate.x,r.translate.y,0),p.rotate(-s),this.a=p.props[0],this.b=p.props[1],this.c=p.props[4],this.d=p.props[5],this.tx=p.props[12],this.ty=p.props[13]},t.prototype.preConcat=function(t){var s=new MatrixAlgorithm;s.props[0]=t.a,s.props[1]=t.b,s.props[4]=t.c,s.props[5]=t.d,s.props[12]=t.tx,s.props[13]=t.ty,s.transform(this.a,this.b,0,0,this.c,this.d,0,0,0,0,1,0,this.tx,this.ty,0,1),this.a=s.props[0],this.b=s.props[1],this.c=s.props[4],this.d=s.props[5],this.tx=s.props[12],this.ty=s.props[13]},t.prototype.concat=function(t){var s=new MatrixAlgorithm;s.props[0]=this.a,s.props[1]=this.b,s.props[4]=this.c,s.props[5]=this.d,s.props[12]=this.tx,s.props[13]=this.ty,s.transform(t.a,t.b,0,0,t.c,t.d,0,0,0,0,1,0,t.tx,t.ty,0,1),this.a=s.props[0],this.b=s.props[1],this.c=s.props[4],this.d=s.props[5],this.tx=s.props[12],this.ty=s.props[13]},t}();exports.Matrix=Matrix;
},{}],24:[function(require,module,exports){
!function(t,i){"object"==typeof exports&&"undefined"!=typeof module?module.exports=i():"function"==typeof define&&define.amd?define(i):t.rebound=i()}(this,function(){"use strict";var t=void 0;"undefined"!=typeof window&&(t=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame),t||"undefined"==typeof process||"node"!==process.title||(t=setImmediate);var i=t=t||function(t){window.setTimeout(t,1e3/60)},e=Array.prototype.concat,n=Array.prototype.slice;function r(t){return i(t)}function o(t,i){var e=t.indexOf(i);-1!==e&&t.splice(e,1)}var s={};function h(t){if(s[t])return s[t];var i=t.replace("#","");3===i.length&&(i=i[0]+i[0]+i[1]+i[1]+i[2]+i[2]);var e=i.match(/.{2}/g);if(!e||e.length<3)throw new Error("Expected a color string of format #rrggbb");var n={r:parseInt(e[0],16),g:parseInt(e[1],16),b:parseInt(e[2],16)};return s[t]=n,n}function a(t,i,e){var n=t.toString(16),r=i.toString(16),o=e.toString(16);return"#"+(n=n.length<2?"0"+n:n)+(r=r.length<2?"0"+r:r)+(o=o.length<2?"0"+o:o)}var p=Object.freeze({bind:function(t,i){for(var r=arguments.length,o=Array(r>2?r-2:0),s=2;s<r;s++)o[s-2]=arguments[s];return function(){for(var r=arguments.length,s=Array(r),h=0;h<r;h++)s[h]=arguments[h];t.apply(i,e.call(o,n.call(s)))}},extend:function(t,i){for(var e in i)i.hasOwnProperty(e)&&(t[e]=i[e])},onFrame:r,removeFirst:o,hexToRGB:h,rgbToHex:a});function u(t,i,e,n,r){return n+(t-i)/(e-i)*(r-n)}var c=Object.freeze({mapValueInRange:u,interpolateColor:function(t,i,e){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,o=arguments[5],s=h(i),p=h(e),c=Math.floor(u(t,n,r,s.r,p.r)),l=Math.floor(u(t,n,r,s.g,p.g)),g=Math.floor(u(t,n,r,s.b,p.b));return o?"rgb("+c+","+l+","+g+")":a(c,l,g)},degreesToRadians:function(t){return t*Math.PI/180},radiansToDegrees:function(t){return 180*t/Math.PI}});function l(t){return 3.62*(t-30)+194}function g(t){return 3*(t-8)+25}var f=Object.freeze({tensionFromOrigamiValue:l,origamiValueFromTension:function(t){return(t-194)/3.62+30},frictionFromOrigamiValue:g,origamiFromFriction:function(t){return(t-25)/3+8}}),_=function(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")},d=Object.assign||function(t){for(var i=1;i<arguments.length;i++){var e=arguments[i];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}return t},S=function(){function t(){_(this,t),this.springSystem=null}return t.prototype.run=function(){var t=v.call(this);r(function(){t.loop(Date.now())})},t}(),y=function(){function t(i){_(this,t),this.springSystem=null,this.time=0,this.running=!1,this.timestep=i||16.667}return t.prototype.run=function(){var t=v.call(this);if(!this.running){for(this.running=!0;!t.getIsIdle();)t.loop(this.time+=this.timestep);this.running=!1}},t}(),m=function(){function t(){_(this,t),this.springSystem=null,this.time=0,this.running=!1}return t.prototype.run=function(){},t.prototype.step=function(t){v.call(this).loop(this.time+=t)},t}();function v(){if(null==this.springSystem)throw new Error("cannot run looper without a springSystem");return this.springSystem}var E=Object.freeze({AnimationLooper:S,SimulationLooper:y,SteppingSimulationLooper:m}),I=function(){function t(i,e){_(this,t),this.bounciness=i,this.speed=e;var n=this.normalize(i/1.7,0,20);n=this.projectNormal(n,0,.8);var r=this.normalize(e/1.7,0,20);this.bouncyTension=this.projectNormal(r,.5,200),this.bouncyFriction=this.quadraticOutInterpolation(n,this.b3Nobounce(this.bouncyTension),.01)}return t.prototype.normalize=function(t,i,e){return(t-i)/(e-i)},t.prototype.projectNormal=function(t,i,e){return i+t*(e-i)},t.prototype.linearInterpolation=function(t,i,e){return t*e+(1-t)*i},t.prototype.quadraticOutInterpolation=function(t,i,e){return this.linearInterpolation(2*t-t*t,i,e)},t.prototype.b3Friction1=function(t){return 7e-4*Math.pow(t,3)-.031*Math.pow(t,2)+.64*t+1.28},t.prototype.b3Friction2=function(t){return 44e-6*Math.pow(t,3)-.006*Math.pow(t,2)+.36*t+2},t.prototype.b3Friction3=function(t){return 4.5e-7*Math.pow(t,3)-332e-6*Math.pow(t,2)+.1078*t+5.84},t.prototype.b3Nobounce=function(t){return t<=18?this.b3Friction1(t):t>18&&t<=44?this.b3Friction2(t):this.b3Friction3(t)},t}(),T=function(){function t(i,e){_(this,t),this.tension=i,this.friction=e}return t.fromOrigamiTensionAndFriction=function(i,e){return new t(l(i),g(e))},t.fromBouncinessAndSpeed=function(i,e){var n=new I(i,e);return t.fromOrigamiTensionAndFriction(n.bouncyTension,n.bouncyFriction)},t.coastingConfigWithOrigamiFriction=function(i){return new t(0,g(i))},t}();T.DEFAULT_ORIGAMI_SPRING_CONFIG=T.fromOrigamiTensionAndFriction(40,7);var A=function t(){_(this,t),this.position=0,this.velocity=0},R=function(){function t(i){_(this,t),this.listeners=[],this._startValue=0,this._currentState=new A,this._displacementFromRestThreshold=.001,this._endValue=0,this._overshootClampingEnabled=!1,this._previousState=new A,this._restSpeedThreshold=.001,this._tempState=new A,this._timeAccumulator=0,this._wasAtRest=!0,this._id="s"+t._ID++,this._springSystem=i}return t.prototype.destroy=function(){this.listeners=[],this._springSystem.deregisterSpring(this)},t.prototype.getId=function(){return this._id},t.prototype.setSpringConfig=function(t){return this._springConfig=t,this},t.prototype.getSpringConfig=function(){return this._springConfig},t.prototype.setCurrentValue=function(t,i){return this._startValue=t,this._currentState.position=t,i||this.setAtRest(),this.notifyPositionUpdated(!1,!1),this},t.prototype.getStartValue=function(){return this._startValue},t.prototype.getCurrentValue=function(){return this._currentState.position},t.prototype.getCurrentDisplacementDistance=function(){return this.getDisplacementDistanceForState(this._currentState)},t.prototype.getDisplacementDistanceForState=function(t){return Math.abs(this._endValue-t.position)},t.prototype.setEndValue=function(t){if(this._endValue===t&&this.isAtRest())return this;this._startValue=this.getCurrentValue(),this._endValue=t,this._springSystem.activateSpring(this.getId());for(var i=0,e=this.listeners.length;i<e;i++){var n=this.listeners[i].onSpringEndStateChange;n&&n(this)}return this},t.prototype.getEndValue=function(){return this._endValue},t.prototype.setVelocity=function(t){return t===this._currentState.velocity?this:(this._currentState.velocity=t,this._springSystem.activateSpring(this.getId()),this)},t.prototype.getVelocity=function(){return this._currentState.velocity},t.prototype.setRestSpeedThreshold=function(t){return this._restSpeedThreshold=t,this},t.prototype.getRestSpeedThreshold=function(){return this._restSpeedThreshold},t.prototype.setRestDisplacementThreshold=function(t){this._displacementFromRestThreshold=t},t.prototype.getRestDisplacementThreshold=function(){return this._displacementFromRestThreshold},t.prototype.setOvershootClampingEnabled=function(t){return this._overshootClampingEnabled=t,this},t.prototype.isOvershootClampingEnabled=function(){return this._overshootClampingEnabled},t.prototype.isOvershooting=function(){var t=this._startValue,i=this._endValue;return this._springConfig.tension>0&&(t<i&&this.getCurrentValue()>i||t>i&&this.getCurrentValue()<i)},t.prototype.advance=function(i,e){var n=this.isAtRest();if(!n||!this._wasAtRest){var r=e;e>t.MAX_DELTA_TIME_SEC&&(r=t.MAX_DELTA_TIME_SEC),this._timeAccumulator+=r;for(var o=this._springConfig.tension,s=this._springConfig.friction,h=this._currentState.position,a=this._currentState.velocity,p=this._tempState.position,u=this._tempState.velocity,c=void 0,l=void 0,g=void 0,f=void 0,_=void 0,d=void 0,S=void 0,y=void 0;this._timeAccumulator>=t.SOLVER_TIMESTEP_SEC;)this._timeAccumulator-=t.SOLVER_TIMESTEP_SEC,this._timeAccumulator<t.SOLVER_TIMESTEP_SEC&&(this._previousState.position=h,this._previousState.velocity=a),c=a,l=o*(this._endValue-p)-s*a,p=h+c*t.SOLVER_TIMESTEP_SEC*.5,g=u=a+l*t.SOLVER_TIMESTEP_SEC*.5,f=o*(this._endValue-p)-s*u,p=h+g*t.SOLVER_TIMESTEP_SEC*.5,_=u=a+f*t.SOLVER_TIMESTEP_SEC*.5,d=o*(this._endValue-p)-s*u,p=h+_*t.SOLVER_TIMESTEP_SEC,S=u=a+d*t.SOLVER_TIMESTEP_SEC,y=1/6*(l+2*(f+d)+(o*(this._endValue-p)-s*u)),h+=1/6*(c+2*(g+_)+S)*t.SOLVER_TIMESTEP_SEC,a+=y*t.SOLVER_TIMESTEP_SEC;this._tempState.position=p,this._tempState.velocity=u,this._currentState.position=h,this._currentState.velocity=a,this._timeAccumulator>0&&this._interpolate(this._timeAccumulator/t.SOLVER_TIMESTEP_SEC),(this.isAtRest()||this._overshootClampingEnabled&&this.isOvershooting())&&(this._springConfig.tension>0?(this._startValue=this._endValue,this._currentState.position=this._endValue):(this._endValue=this._currentState.position,this._startValue=this._endValue),this.setVelocity(0),n=!0);var m=!1;this._wasAtRest&&(this._wasAtRest=!1,m=!0);var v=!1;n&&(this._wasAtRest=!0,v=!0),this.notifyPositionUpdated(m,v)}},t.prototype.notifyPositionUpdated=function(t,i){for(var e=0,n=this.listeners.length;e<n;e++){var r=this.listeners[e];t&&r.onSpringActivate&&r.onSpringActivate(this),r.onSpringUpdate&&r.onSpringUpdate(this),i&&r.onSpringAtRest&&r.onSpringAtRest(this)}},t.prototype.systemShouldAdvance=function(){return!this.isAtRest()||!this.wasAtRest()},t.prototype.wasAtRest=function(){return this._wasAtRest},t.prototype.isAtRest=function(){return Math.abs(this._currentState.velocity)<this._restSpeedThreshold&&(this.getDisplacementDistanceForState(this._currentState)<=this._displacementFromRestThreshold||0===this._springConfig.tension)},t.prototype.setAtRest=function(){return this._endValue=this._currentState.position,this._tempState.position=this._currentState.position,this._currentState.velocity=0,this},t.prototype._interpolate=function(t){this._currentState.position=this._currentState.position*t+this._previousState.position*(1-t),this._currentState.velocity=this._currentState.velocity*t+this._previousState.velocity*(1-t)},t.prototype.getListeners=function(){return this.listeners},t.prototype.addListener=function(t){return this.listeners.push(t),this},t.prototype.removeListener=function(t){return o(this.listeners,t),this},t.prototype.removeAllListeners=function(){return this.listeners=[],this},t.prototype.currentValueIsApproximately=function(t){return Math.abs(this.getCurrentValue()-t)<=this.getRestDisplacementThreshold()},t}();R._ID=0,R.MAX_DELTA_TIME_SEC=.064,R.SOLVER_TIMESTEP_SEC=.001;var V=function(){function t(i){_(this,t),this.listeners=[],this._activeSprings=[],this._idleSpringIndices=[],this._isIdle=!0,this._lastTimeMillis=-1,this._springRegistry={},this.looper=i||new S,this.looper.springSystem=this}return t.prototype.setLooper=function(t){this.looper=t,t.springSystem=this},t.prototype.createSpring=function(t,i){var e=void 0;return e=void 0===t||void 0===i?T.DEFAULT_ORIGAMI_SPRING_CONFIG:T.fromOrigamiTensionAndFriction(t,i),this.createSpringWithConfig(e)},t.prototype.createSpringWithBouncinessAndSpeed=function(t,i){var e=void 0;return e=void 0===t||void 0===i?T.DEFAULT_ORIGAMI_SPRING_CONFIG:T.fromBouncinessAndSpeed(t,i),this.createSpringWithConfig(e)},t.prototype.createSpringWithConfig=function(t){var i=new R(this);return this.registerSpring(i),i.setSpringConfig(t),i},t.prototype.getIsIdle=function(){return this._isIdle},t.prototype.getSpringById=function(t){return this._springRegistry[t]},t.prototype.getAllSprings=function(){var t=[];for(var i in this._springRegistry)this._springRegistry.hasOwnProperty(i)&&t.push(this._springRegistry[i]);return t},t.prototype.registerSpring=function(t){this._springRegistry[t.getId()]=t},t.prototype.deregisterSpring=function(t){o(this._activeSprings,t),delete this._springRegistry[t.getId()]},t.prototype.advance=function(t,i){for(;this._idleSpringIndices.length>0;)this._idleSpringIndices.pop();for(var e=0,n=this._activeSprings.length;e<n;e++){var r=this._activeSprings[e];r.systemShouldAdvance()?r.advance(t/1e3,i/1e3):this._idleSpringIndices.push(this._activeSprings.indexOf(r))}for(;this._idleSpringIndices.length>0;){var o=this._idleSpringIndices.pop();o>=0&&this._activeSprings.splice(o,1)}},t.prototype.loop=function(t){var i=void 0;-1===this._lastTimeMillis&&(this._lastTimeMillis=t-1);var e=t-this._lastTimeMillis;this._lastTimeMillis=t;var n=0,r=this.listeners.length;for(n=0;n<r;n++)(i=this.listeners[n]).onBeforeIntegrate&&i.onBeforeIntegrate(this);for(this.advance(t,e),0===this._activeSprings.length&&(this._isIdle=!0,this._lastTimeMillis=-1),n=0;n<r;n++)(i=this.listeners[n]).onAfterIntegrate&&i.onAfterIntegrate(this);this._isIdle||this.looper.run()},t.prototype.activateSpring=function(t){var i=this._springRegistry[t];-1===this._activeSprings.indexOf(i)&&this._activeSprings.push(i),this.getIsIdle()&&(this._isIdle=!1,this.looper.run())},t.prototype.addListener=function(t){this.listeners.push(t)},t.prototype.removeListener=function(t){o(this.listeners,t)},t.prototype.removeAllListeners=function(){this.listeners=[]},t}();return d({},E,{OrigamiValueConverter:f,MathUtil:c,Spring:R,SpringConfig:T,SpringSystem:V,util:d({},p,c)})});
},{}]},{},[5]);
